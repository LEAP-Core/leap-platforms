
----------
jsemer      Date: Thu Aug 30 12:53:17 EDT 2007  CSN: CSN-platforms-2
                  Thu Aug 30 16:53:17 UTC 2007


Directory config/pm
 hasim/                    Locally Added               0 

Directory config/pm/hasim
 submodels/                Locally Added               0 

Directory config/pm/hasim/submodels
 fpgaenv/                  Locally Added               0 

Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-fsb-afu.apm Locally Added               0 
 hasim-fpgaenv-null.apm    Locally Added               0 
 hasim-fpgaenv-software.apm Locally Added               0 
 hasim-fpgaenv-rrr-sim.apm Locally Added               0 
 hasim-fpgaenv-xup.apm     Locally Added               0 
 hasim-fpgaenv-fsb-dme.apm Locally Added               0 

Directory modules
 bluespec/                 Locally Added               0 

Directory modules/bluespec
 common/                   Locally Added               0 

Directory modules/bluespec/common
 fpgaenv/                  Locally Added               0 

Directory modules/bluespec/common/fpgaenv
 fpga-components/          Locally Added               0 

Directory modules/bluespec/common/fpgaenv/fpga-components
 software/                 Locally Added               0 

Directory modules/bluespec/common/fpgaenv/fpga-components/software
 software-fpga-components.awb Locally Added               0 
 BRAM_Bluesim.bsv          Locally Added               0 
 BRAM1.bsv                 Locally Added               0 
 BRAM2.bsv                 Locally Added               0 
 BRAM3.bsv                 Locally Added               0 

Directory modules/bluespec/common/fpgaenv/fpga-components
 hardware/                 Locally Added               0 

Directory modules/bluespec/common/fpgaenv/fpga-components/hardware
 BRAM_Verilog.bsv          Locally Added               0 
 hardware-fpga-components.awb Locally Added               0 
 BRAM_base.bsv             Locally Added               0 
 BRAM.v                    Locally Added               0 
 BRAM1.bsv                 Locally Added               0 
 BRAM2.bsv                 Locally Added               0 
 BRAM3.bsv                 Locally Added               0 

Directory modules/bluespec/common/fpgaenv
 toplevel-wires/           Locally Added               0 

Directory modules/bluespec/common/fpgaenv/toplevel-wires
 fsb_dme/                  Locally Added               0 

Directory modules/bluespec/common/fpgaenv/toplevel-wires/fsb_dme
 fsb-dme-toplevel-wires.awb Locally Added               0 
 fsb_dme.ucf               Locally Added               0 
 FSB_DME_TopLevelWires.bsv Locally Added               0 

Directory modules/bluespec/common/fpgaenv/toplevel-wires
 fsb_afu/                  Locally Added               0 

Directory modules/bluespec/common/fpgaenv/toplevel-wires/fsb_afu
 fsb_afu.ucf               Locally Added               0 
 FSB_AFU_TopLevelWires.bsv Locally Added               0 
 fsb-afu-toplevel-wires.awb Locally Added               0 

Directory modules/bluespec/common/fpgaenv/toplevel-wires
 null/                     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/toplevel-wires/null
 null-toplevel-wires.awb   Locally Added               0 
 NullTopLevelWires.bsv     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/toplevel-wires
 xup/                      Locally Added               0 

Directory modules/bluespec/common/fpgaenv/toplevel-wires/xup
 xup.download              Locally Added               0 
 xup-toplevel-wires.awb    Locally Added               0 
 xup.ut                    Locally Added               0 
 xup.ucf                   Locally Added               0 
 xup.xst                   Locally Added               0 
 XUPTopLevelWires.bsv      Locally Added               0 

Directory modules/bluespec/common/fpgaenv
 fpga-environment.awb      Locally Added               0 
 virtual-platform/         Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform
 channelio/                Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio
 unix/                     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/unix
 unix-channelio.c          Locally Added               0 
 unix-channelio.awb        Locally Added               0 
 UNIXChannelIO.bsv         Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio
 sim/                      Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/sim
 SimChannelIO.bsv          Locally Added               0 
 sim-channelio.c           Locally Added               0 
 sim-channelio.h           Locally Added               0 
 sim-channelio.awb         Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio
 null/                     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/null
 null-channelio.awb        Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform
 rrr-virtual-platform.awb  Locally Added               0 
 rrr/                      Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr
 software-rrr-server.c     Locally Added               0 
 software-rrr-server.h     Locally Added               0 
 HardwareRRRClient.bsv     Locally Added               0 
 global-service-list.rrr   Locally Added               0 
 rrr.awb                   Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform
 virtual-devices/          Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 console/                  Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/console
 console-serial/           Locally Added               0 
 graphical-serial/         Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/console/graphical-serial
 graphical-serial.awb      Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/console
 null-serial/              Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/console/null-serial
 null-serial.awb           Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/console
 xup-serial/               Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 std-virtual-devices-mem.awb Locally Added               0 
 front-panel/              Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel
 fsb_dme/                  Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/fsb_dme
 fsb-dme-fp.awb            Locally Added               0 
 FSB_DME_FP.bsv            Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel
 hybrid/                   Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 HybridFP.bsv              Locally Added               0 
 hybrid-fp-sw.c            Locally Added               0 
 hybrid-fp.awb             Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel
 console/                  Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/console
 NullFP.bsv                Locally Added               0 
 console-fp.awb            Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel
 fsb_afu/                  Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/fsb_afu
 FSB_AFU_FP.bsv            Locally Added               0 
 fsb-afu-fp.awb            Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel
 graphical/                Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/graphical
 graphical-fp.awb          Locally Added               0 
 GraphicalFP.bsv           Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel
 xup/                      Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/xup
 xup-fp.awb                Locally Added               0 
 XUPFP.bsv                 Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 std-virtual-devices.awb   Locally Added               0 
 memory/                   Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory
 hybrid/                   Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-memory-sw.c        Locally Added               0 
 hybrid-memory.awb         Locally Added               0 
 HybridMemory.bsv          Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform
 std-virtual-platform.awb  Locally Added               0 
 fast-virtual-platform.awb Locally Added               0 

Moved fpga environment from hasim to here.

----------
aparasha    Date: Fri Aug 31 14:15:28 EDT 2007  CSN: CSN-platforms-3
                  Fri Aug 31 18:15:28 UTC 2007


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-fsb-afu.apm Locally Modified            2 
 hasim-fpgaenv-null.apm    Locally Modified            2 
 hasim-fpgaenv-software.apm Locally Modified            2 
 hasim-fpgaenv-rrr-sim.apm Locally Modified            2 
 hasim-fpgaenv-xup.apm     Locally Modified            2 
 hasim-fpgaenv-fsb-dme.apm Locally Modified            2 

Directory modules/bluespec/common/fpgaenv
 fpga-environment.awb      Locally Modified            2 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/null
 null-channelio.awb        Locally Modified            2 
 NullChannelIO.bsv         Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform
 rrr-virtual-platform.awb  Locally Removed             2 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr
 null-rrr.awb              Locally Added               0 
 NullRRR.bsv               Locally Added               0 
 HardwareRRRClient.bsv     Locally Modified            2 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 HybridFP.bsv              Locally Modified            2 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/graphical
 GraphicalFP.bsv           Locally Modified            2 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/xup
 XUPFP.bsv                 Locally Modified            2 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 HybridMemory.bsv          Locally Modified            2 

Directory modules/bluespec/common/fpgaenv/virtual-platform
 low-level-platform-interface/ Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/low-level-platform-interface
 LowLevelPlatformInterface.bsv Locally Added               0 
 low-level-platform-interface.awb Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform
 std-virtual-platform.awb  Locally Modified            2 


FPGAenv Reorganization: A new module called
low-level-platform-interface (LLPI) now encapsulates RRR,
Channel I/O, and Top Level Wires. The higher level HAsim
Platform Interface instantiates the LLPI and passes it down
to all the virtual devices, which can choose to use any
of the three mechanisms (RRR, ChannelIO, TopLevelWires) to
implement their functionality.

This commit only updates the AWB hierarchy to reflect the
new organization. The directory structure is slightly
inconsistent, and will be fixed in a future commit.
----------
mpellaue    Date: Fri Aug 31 16:43:56 EDT 2007  CSN: CSN-platforms-4
                  Fri Aug 31 20:43:56 UTC 2007


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-null.apm    Locally Modified            3 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/console
 NullFP.bsv                Locally Modified            3 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-memory.awb         Locally Modified            3 
 HybridMemory.bsv          Locally Modified            3 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory
 simulation/               Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/simulation
 simulation-memory.awb     Locally Added               0 
 BRAMMemory.bsv            Locally Added               0 


Added support for "Simulation only" memory virtual device which uses BRAM and
never issues invalidates. This can serve as a template for the Hybrid Memory BSV
side.

Michael P.



----------
mcadler     Date: Thu Sep  6 15:39:26 EDT 2007  CSN: CSN-platforms-5
                  Thu Sep  6 19:39:26 UTC 2007


Directory drivers
 linux/                    Locally Added               0 

Directory drivers/linux
 Xilinx_Platform_Cable/    Locally Added               0 

Directory drivers/linux/Xilinx_Platform_Cable
 usb-driver/               Locally Added               0 

Directory drivers/linux/Xilinx_Platform_Cable/usb-driver
 jtagkey.c                 Locally Added               0 
 jtagmon.c                 Locally Added               0 
 usb-driver.c              Locally Added               0 
 jtagkey.h                 Locally Added               0 
 jtagmon.h                 Locally Added               0 
 config.c                  Locally Added               0 
 parport.c                 Locally Added               0 
 usb-driver.h              Locally Added               0 
 index.html                Locally Added               0 
 config.h                  Locally Added               0 
 Makefile                  Locally Added               0 
 README                    Locally Added               0 
 parport.h                 Locally Added               0 
 libusb-driverrc           Locally Added               0 

Directory drivers/linux/Xilinx_Platform_Cable
 windriver/                Locally Added               0 

Directory drivers/linux/Xilinx_Platform_Cable/windriver
 install_drivers           Locally Added               0 
 release_notes             Locally Added               0 
 linux_drivers/            Locally Added               0 

Directory drivers/linux/Xilinx_Platform_Cable/windriver/linux_drivers
 xpc4drvr2_4/              Locally Added               0 

Directory drivers/linux/Xilinx_Platform_Cable/windriver/linux_drivers/xpc4drvr2_4
 xpc4drvr/                 Locally Added               0 

Directory drivers/linux/Xilinx_Platform_Cable/windriver/linux_drivers/xpc4drvr2_4/xpc4drvr
 xpc4.c                    Locally Added               0 
 install_drv               Locally Added               0 
 ioctl_3_64.a              Locally Added               0 
 xpc4.h                    Locally Added               0 
 ioctl_2.a                 Locally Added               0 
 ioctl_3.a                 Locally Added               0 
 Makefile                  Locally Added               0 

Directory drivers/linux/Xilinx_Platform_Cable/windriver/linux_drivers
 windriver64/              Locally Added               0 

Directory drivers/linux/Xilinx_Platform_Cable/windriver/linux_drivers/windriver64
 include/                  Locally Added               0 

Directory drivers/linux/Xilinx_Platform_Cable/windriver/linux_drivers/windriver64/include
 windrvr.h                 Locally Added               0 
 wd_ver.h                  Locally Added               0 

Directory drivers/linux/Xilinx_Platform_Cable/windriver/linux_drivers/windriver64
 windrvr/                  Locally Added               0 

Directory drivers/linux/Xilinx_Platform_Cable/windriver/linux_drivers/windriver64/windrvr
 configure                 Locally Added               0 
 makefile.in               Locally Added               0 
 linux_wrappers.c          Locally Added               0 
 wdusb_linux.c             Locally Added               0 
 linux_wrappers.h          Locally Added               0 
 wdreg                     Locally Added               0 
 wdusb_interface.h         Locally Added               0 
 setup_inst_dir            Locally Added               0 
 windrvr_gcc_v3_regparm.a  Locally Added               0 
 linux_common.h            Locally Added               0 
 windrvr_gcc_v3.a          Locally Added               0 

Directory drivers/linux/Xilinx_Platform_Cable/windriver/linux_drivers
 xpc4drvr2_6/              Locally Added               0 

Directory drivers/linux/Xilinx_Platform_Cable/windriver/linux_drivers/xpc4drvr2_6
 xpc4drvr/                 Locally Added               0 

Directory drivers/linux/Xilinx_Platform_Cable/windriver/linux_drivers/xpc4drvr2_6/xpc4drvr
 xpc4.c                    Locally Added               0 
 ioctl_3_regparm_64.a      Locally Added               0 
 install_drv               Locally Added               0 
 configure                 Locally Added               0 
 ioctl_3_64.a              Locally Added               0 
 xpc4.h                    Locally Added               0 
 Mkfile.tmp                Locally Added               0 
 ioctl_3_regparm.a         Locally Added               0 
 ioctl_3.a                 Locally Added               0 
 Makefile                  Locally Added               0 

Directory drivers/linux/Xilinx_Platform_Cable/windriver/linux_drivers
 pcusb/                    Locally Added               0 

Directory drivers/linux/Xilinx_Platform_Cable/windriver/linux_drivers/pcusb
 xusbdfwu.rules            Locally Added               0 
 xusb_xup.hex              Locally Added               0 
 xusbdfwu.usermap          Locally Added               0 
 xusb_xlp                  Locally Added               0 
 xusb_emb                  Locally Added               0 
 xusb_xlp.hex              Locally Added               0 
 xusbdfwu                  Locally Added               0 
 xusb_emb.hex              Locally Added               0 
 xusb_xpr                  Locally Added               0 
 xusbdfwu.hex              Locally Added               0 
 setup_pcusb               Locally Added               0 
 xusb_xpr.hex              Locally Added               0 
 xusb_xup                  Locally Added               0 

Directory drivers/linux/Xilinx_Platform_Cable/windriver/linux_drivers
 windriver32/              Locally Added               0 

Directory drivers/linux/Xilinx_Platform_Cable/windriver/linux_drivers/windriver32
 include/                  Locally Added               0 

Directory drivers/linux/Xilinx_Platform_Cable/windriver/linux_drivers/windriver32/include
 windrvr.h                 Locally Added               0 
 wd_ver.h                  Locally Added               0 

Directory drivers/linux/Xilinx_Platform_Cable/windriver/linux_drivers/windriver32
 windrvr/                  Locally Added               0 

Directory drivers/linux/Xilinx_Platform_Cable/windriver/linux_drivers/windriver32/windrvr
 configure                 Locally Added               0 
 makefile.in               Locally Added               0 
 linux_wrappers.c          Locally Added               0 
 wdusb_linux.c             Locally Added               0 
 linux_wrappers.h          Locally Added               0 
 wdreg                     Locally Added               0 
 wdusb_interface.h         Locally Added               0 
 setup_inst_dir            Locally Added               0 
 windrvr_gcc_v3_regparm.a  Locally Added               0 
 windrvr_gcc_v2.a          Locally Added               0 
 linux_common.h            Locally Added               0 
 windrvr_gcc_v3.a          Locally Added               0 

Directory drivers/linux/Xilinx_Platform_Cable
 README                    Locally Added               0 
 fxload/                   Locally Added               0 

Directory drivers/linux/Xilinx_Platform_Cable/fxload
 fxload.8                  Locally Added               0 
 main.c                    Locally Added               0 
 a3load.hex                Locally Added               0 
 COPYING                   Locally Added               0 
 ezusb.c                   Locally Added               0 
 README.txt                Locally Added               0 
 Makefile                  Locally Added               0 
 ezusb.h                   Locally Added               0 

Directory .
 drivers/                  Locally Added               0 

These are the drivers needed to connect the Xilinx USB Programming Cable.
This check-in is the unmodified drivers as downloaded from a few web sites.

----------
mcadler     Date: Thu Sep  6 15:58:15 EDT 2007  CSN: CSN-platforms-6
                  Thu Sep  6 19:58:15 UTC 2007


Directory drivers/linux/Xilinx_Platform_Cable/windriver
 install_drivers           Locally Modified            5 

Directory drivers/linux/Xilinx_Platform_Cable/windriver/linux_drivers/windriver64/windrvr
 configure                 Locally Modified            5 
 wdreg                     Locally Modified            5 

Directory drivers/linux/Xilinx_Platform_Cable
 patch.usb.rc              Locally Added               0 
 README                    Locally Modified            5 

Local changes to support 64 bit SuSE 9.3.

----------
mcadler     Date: Thu Sep  6 16:27:30 EDT 2007  CSN: CSN-platforms-7
                  Thu Sep  6 20:27:30 UTC 2007


Directory drivers/linux/Xilinx_Platform_Cable
 README                    Locally Modified            6 

Add note on working around a failure.

----------
aparasha    Date: Fri Sep  7 17:41:16 EDT 2007  CSN: CSN-platforms-8
                  Fri Sep  7 21:41:16 UTC 2007


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-software.apm Locally Modified            7 
 hasim-fpgaenv-rrr-sim.apm Locally Modified            7 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr
 software-rrr-server.c     Locally Removed             7 
 software-rrr-server.cpp   Locally Added               0 
 NullRRR.bsv               Locally Modified            7 
 HardwareRRRClient.bsv     Locally Modified            7 
 global-service-list.rrr   Locally Modified            7 
 rrr.awb                   Locally Modified            7 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 HybridFP.bsv              Locally Modified            7 
 hybrid-fp-sw.c            Locally Removed             7 
 hybrid-fp.awb             Locally Modified            7 
 hybrid-fp-sw.cpp          Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-memory-sw.c        Locally Removed             7 
 hybrid-memory.awb         Locally Modified            7 
 hybrid-memory-sw.cpp      Locally Added               - 
 HybridMemory.bsv          Locally Modified            7 

Directory modules/bluespec/common/fpgaenv/virtual-platform/low-level-platform-interface
 LowLevelPlatformInterface.bsv Locally Modified            7 


- Interim Checkin: added partial support for virtual memory device.
  Memory is not yet operational, but existing models should work
  as before.

- moved all sofware-partition source files from .c to .cpp

----------
aparasha    Date: Tue Sep 11 14:42:46 EDT 2007  CSN: CSN-platforms-9
                  Tue Sep 11 18:42:46 UTC 2007


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-rrr-sim.apm Locally Modified            8 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr
 software-rrr-server.cpp   Locally Modified            8 
 global-service-list.rrr   Locally Modified            8 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 HybridFP.bsv              Locally Modified            8 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 HybridMemory.bsv          Locally Modified            8 


- updated Hybrid Memory. Some basic functionalities now work.
  Please see MemTest.bsv for an example on how to use it.

- modified Hybrid Front Panel to poll RRR every few cycles
  instead of every cycle. This gives other RRR clients a chance
  to win during rule scheduling (currently, RRR arbitration is
  solely through implicit Bluespec rule-scheduling).

----------
mcadler     Date: Tue Sep 11 16:11:55 EDT 2007  CSN: CSN-platforms-10
                  Tue Sep 11 20:11:55 UTC 2007


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-fsb-afu.apm Locally Modified            9 
 hasim-fpgaenv-software-no-gui.apm Locally Added               0 
 hasim-fpgaenv-null.apm    Locally Modified            9 
 hasim-fpgaenv-software.apm Locally Modified            9 
 hasim-fpgaenv-rrr-sim.apm Locally Modified            9 
 hasim-fpgaenv-xup.apm     Locally Modified            9 
 hasim-fpgaenv-fsb-dme.apm Locally Modified            9 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 std-virtual-devices-mem.awb Locally Removed             9 
 std-virtual-devices.awb   Locally Modified            9 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory
 null/                     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/null
 null-memory.awb           Locally Added               0 
 NullMemory.bsv            Locally Added               0 

- Remove std-virtual-devices-mem since memory is required by all models.
  Just use std-virtual-devices.
- Added a null memory implementation.
- Added a hasim-fpgaenv-software-no-gui temporarily to avoid loading the
  GUI console.  We'll get rid of this after the GUI console has the option
  of not opening the GUI.

----------
aparasha    Date: Tue Sep 11 17:10:13 EDT 2007  CSN: CSN-platforms-11
                  Tue Sep 11 21:10:13 UTC 2007


Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr
 software-rrr-server.cpp   Locally Modified           10 
 global-service-list.rrr   Locally Removed            10 
 rrr.awb                   Locally Modified           10 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 hybrid-fp-services.rrr    Locally Added               0 
 hybrid-fp.awb             Locally Modified           10 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-memory.awb         Locally Modified           10 
 hybrid-memory-services.rrr Locally Added               0 


- removed global service list from Software Server module.

- added local service lists to Hybrid Front Panel and
  Hybrid Memory modules.
----------
aparasha    Date: Fri Sep 14 12:52:13 EDT 2007  CSN: CSN-platforms-12
                  Fri Sep 14 16:52:13 UTC 2007


Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr
 HardwareRRRClient.bsv     Locally Modified           11 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 HybridFP.bsv              Locally Modified           11 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 HybridMemory.bsv          Locally Modified           11 


- removed hard-coded serviceIDs from Hybrid Front Panel and
  Hybrid Memory.

- further reduced front panel's poll rate.
----------
aparasha    Date: Mon Sep 17 13:56:42 EDT 2007  CSN: CSN-platforms-13
                  Mon Sep 17 17:56:42 UTC 2007


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/sim
 SimChannelIO.bsv          Locally Modified           12 
 sim-channelio.c           Locally Modified           12 
 sim-channelio.h           Locally Modified           12 
 sim-channelio.awb         Locally Modified           12 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr
 software-rrr-server.cpp   Locally Modified           12 
 software-rrr-server.h     Locally Modified           12 
 HardwareRRRClient.bsv     Locally Modified           12 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 hybrid-fp-sw.cpp          Locally Modified           12 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-memory-sw.cpp      Locally Modified           12 

- changed the method used to launch a hybrid model. The software
  executable needs to be invoked by the user, which will in turn
  launch the hardware part of the simulation (this will be later
  extended to enable the software executable to download the bitfile
  onto the FPGA for a "real" hybrid execution).

- cleaned up the BSV-side of the sim-channelio module significantly;
  some of the functionality has now been transferred to the software
  side.

- updated the way in which software services handle exceptions:
  instead of exiting immediately, they send a message to the server
  so that it can perform some cleanup operations (terminating all
  other services and the hardware simulation) before exiting.
  This method is also used to terminate simulation if the user
  clicks on the Exit button on the front panel.
----------
aparasha    Date: Wed Sep 19 13:24:21 EDT 2007  CSN: CSN-platforms-14
                  Wed Sep 19 17:24:21 UTC 2007


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/sim
 sim-channelio.c           Locally Modified           13 
 sim-channelio.h           Locally Modified           13 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr
 software-rrr-server.cpp   Locally Modified           13 
 software-rrr-server.h     Locally Modified           13 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 hybrid-fp-sw.cpp          Locally Modified           13 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-memory.awb         Locally Modified           13 
 hybrid-memory-sw.cpp      Locally Modified           13 
 vmh-utils.cpp             Locally Added               0 
 vmh-utils.h               Locally Added               0 

- added support for loading a VMH image into the hybrid
  memory module's software partition. Hybrid SMIPS models
  are now able to run VMH benchmarks by streaming them in
  from the software partition.

  This was tested using a hybrid version of the SMPIS
  5-stage pipeline coupled with the V2 functional partition
  on the microbenchmarks. All 5 microbenchmarks complete
  successfully.

  However, there are some timing discrepancies between the
  event logs of the hybrid and pure simulations, although
  the sequence of events appears to be the same. I will
  examine these more thoroughly.

- added support for specifying a VMH file as a command-line
  parameter to the host software executable. If no
  parameter is provided, "program.vmh" is assumed to be
  the VMH image to be loaded, and should be present in the
  current directory. Since the benchmark setup script has
  not been updated to support hybrid models, as of now the
  VMH benchmark name needs to be explicitly provided for
  launching hybrid simulations.

- fixed a major bug in the software RRR server and memory
  service: void service methods were not being handled
  properly and were returning a 0 result on channelio.

- sim-channelio now uses a unique set of well-known
  descriptors (100 and 101) to communicate, freeing up
  STDIN and STDOUT for use by $display etc.

----------
aparasha    Date: Tue Sep 25 13:05:57 EDT 2007  CSN: CSN-platforms-15
                  Tue Sep 25 17:05:57 UTC 2007


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-hybrid-sim.apm Locally Added               - 
 hasim-fpgaenv-rrr-sim.apm Locally Removed            14 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr
 software-rrr-server.cpp   Locally Modified           14 
 software-rrr-server.h     Locally Modified           14 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 HybridFP.bsv              Locally Modified           14 
 hybrid-fp-sw.h            Locally Added               0 
 hybrid-fp-services.rrr    Locally Modified           14 
 hybrid-fp.awb             Locally Modified           14 
 hybrid-fp-sw.cpp          Locally Modified           14 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-memory.awb         Locally Modified           14 
 hybrid-memory-sw.cpp      Locally Modified           14 
 HybridMemory.bsv          Locally Modified           14 
 hybrid-memory-sw.h        Locally Added               0 
 hybrid-memory-services.rrr Locally Modified           14 

- changed programming style of RRR services from procedural to
  to a more ASIM-like object-oriented style. However, the RRR
  service objects are currently not dynamically instantiated by
  the server; they are statically instantiated as global variables
  within the modules themselves, and the server accesses them
  via extern pointers.

- all RRR services now have a Clock() method that is called by
  the software RRR server's clock() method.

- hybrid Front Panel's Clock() synchronizes its cached state
  with the Perl dialog box, while the Request() method simply
  returns/updates the local cached state.

- the server's main() has been removed, and the functionality
  has been moved to its clock method() which is called by the
  software controller in an infinite loop.
----------
aparasha    Date: Wed Sep 26 00:29:19 EDT 2007  CSN: CSN-platforms-16
                  Wed Sep 26 04:29:19 UTC 2007


Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr
 software-rrr-server.cpp   Locally Modified           15 
 software-rrr-server.h     Locally Modified           15 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 hybrid-fp-sw.cpp          Locally Modified           15 
 hybrid-fp-sw.h            Locally Modified           15 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-memory-sw.h        Locally Modified           15 
 hybrid-memory-sw.cpp      Locally Modified           15 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/sim
 sim-channelio-sw.h        Locally Added               0 
 sim-channelio.awb         Locally Modified           14 
 sim-channelio-sw.cpp      Locally Added               0 

- moved software channelio functionality from RRR server to channelio
  module. All RRR code is now physical-platform-independent.

- encapsulated RRR server functions in a RRR server class.

- renamed Clock() to Poll() in RRR server and services.
----------
aparasha    Date: Wed Sep 26 19:38:18 EDT 2007  CSN: CSN-platforms-17
                  Wed Sep 26 23:38:20 UTC 2007


Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr
 HardwareRRRClient.bsv     Locally Modified           16 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 HybridFP.bsv              Locally Modified           16 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 HybridMemory.bsv          Locally Modified           16 

- merged the sendReq and sendVoidReq methods in hardware RRR
  client into a single method makeRequest, with a bool paramter
  which specifies whether a response is expected or not.

- cleaned up some of the hardware RRR code.

----------
aparasha    Date: Mon Oct  8 14:25:29 EDT 2007  CSN: CSN-platforms-18
                  Mon Oct  8 18:25:29 UTC 2007


Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr
 NullRRR.bsv               Locally Modified           17 

updated NullRRR.bsv to have the same interface as the
functional RRR module.

----------
mcadler     Date: Wed Oct 17 14:26:32 EDT 2007  CSN: CSN-platforms-19
                  Wed Oct 17 18:26:32 UTC 2007


Directory modules/bluespec/common/fpgaenv/toplevel-wires/xup
 xup.download              Locally Modified           18 
 xup.xst                   Locally Modified           18 

Bit image now built in .xilinx directory.

----------
mcadler     Date: Mon Oct 22 10:38:12 EDT 2007  CSN: CSN-platforms-20
                  Mon Oct 22 14:38:12 UTC 2007


Directory modules/bluespec/common/fpgaenv/toplevel-wires/xup
 xup.download              Locally Removed            19 
 xup-toplevel-wires.awb    Locally Removed            19 
 xup.ut                    Locally Removed            19 
 xup.ucf                   Locally Removed            19 
 xup.xst                   Locally Removed            19 
 XUPTopLevelWires.bsv      Locally Removed            19 

Directory modules/bluespec/common/fpgaenv/toplevel-wires
 xup/                      Locally Removed            19 

First step in making a unified xilinx top level description.
I really renamed xup xilinx.  Hopefully svn is doing the right thing.

----------
mcadler     Date: Tue Oct 23 14:07:56 EDT 2007  CSN: CSN-platforms-21
                  Tue Oct 23 18:07:56 UTC 2007


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-htg-v5-pcie.apm Locally Added               0 
 hasim-fpgaenv-xup.apm     Locally Modified           20 

Directory modules/bluespec/common/fpgaenv/toplevel-wires/xilinx
 htg-v5-pcie-toplevel-wires.awb Locally Added               0 
 xilinx.download           Locally Added               - 
 xup.download              Locally Removed            20 
 xilinx.ut                 Locally Added               - 
 xup-toplevel-wires.awb    Locally Modified           20 
 xup.ut                    Locally Removed            20 
 htg-v5-pcie-TopLevelWires.bsv Locally Added               0 
 htg-v5-pcie.ucf           Locally Added               0 
 xup-TopLevelWires.bsv     Locally Added               - 
 xilinx.xst                Locally Added               - 
 xup.xst                   Locally Removed            20 
 XUPTopLevelWires.bsv      Locally Removed            20 

Add support for HiTech Global v5 PCIe board.  Currently configured for a
Virtex-5 LX50T.  Will change to an LX110T when we get the right card.

----------
aparasha    Date: Tue Oct 23 18:26:26 EDT 2007  CSN: CSN-platforms-22
                  Tue Oct 23 22:26:26 UTC 2007


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/sim
 sim-channelio-sw.h        Locally Modified           21 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr
 software-rrr-server.cpp   Locally Modified           21 
 software-rrr-server.h     Locally Modified           21 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 HybridFP.bsv              Locally Modified           21 
 hybrid-fp-sw.h            Locally Modified           21 
 hybrid-fp-sw.cpp          Locally Modified           21 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-memory-sw.cpp      Locally Modified           21 
 HybridMemory.bsv          Locally Modified           21 
 hybrid-memory-sw.h        Locally Modified           21 

- updated software service registration process
  * services self-instantiate statically.
  * they register themselves with a static table
    belonging to server.
  * when server gets instantiated, it calles Init()
    on all services pre-registered in its table
  * serviceID's are generated by hasim-configure
    in a global header file.

- updated hardware client registration process:
  similar to the software side, hasim-configure
  generates a global BSV with `defines for all
  services.

- hybrid front panel checks a global parameter to
  decide whether to pop up a dialog box.

----------
mcadler     Date: Mon Oct 29 17:13:22 EDT 2007  CSN: CSN-platforms-23
                  Mon Oct 29 21:13:22 UTC 2007


Directory modules/bluespec/common/fpgaenv/toplevel-wires/null
 NullTopLevelWires.bsv     Locally Modified           22 

Directory modules/bluespec/common/fpgaenv/toplevel-wires/xilinx
 htg-v5-pcie-TopLevelWires.bsv Locally Modified           22 
 htg-v5-pcie.ucf           Locally Modified           22 
 xup-TopLevelWires.bsv     Locally Modified           22 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 HybridFP.bsv              Locally Modified           22 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/console
 NullFP.bsv                Locally Modified           22 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/graphical
 GraphicalFP.bsv           Locally Modified           22 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/xup
 XUPFP.bsv                 Locally Modified           22 

- Front panel now defines 6 types for communicating the number of
  LEDs, buttons and switches.  Three are Bit vectors for holding the state
  (FRONTP_LEDS, FRONTP_SWITCHES and FRONTP_BUTTONS).  Three are sizes
  (FRONTP_NUM_LEDS...).
- Toplevel wires communicates the number of LEDS and SWITCHES with similar
  types.
- Change HiTech Global board config to 8 LEDs and switches.

----------
mcadler     Date: Thu Nov  1 14:59:03 EDT 2007  CSN: CSN-platforms-24
                  Thu Nov  1 18:59:03 UTC 2007


Directory modules/bluespec/common/fpgaenv/toplevel-wires/xilinx
 htg-v5-pcie-TopLevelWires.bsv Locally Modified           23 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 HybridFP.bsv              Locally Modified           23 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/console
 NullFP.bsv                Locally Modified           23 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/graphical
 GraphicalFP.bsv           Locally Modified           23 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/xup
 XUPFP.bsv                 Locally Modified           23 

- Add mask to data passed to writeLEDs so individual lights can be updated.
- Enable all 8 LEDs on HTG board and 8 on the software front panel.
- HTG LEDs are active high.

----------
pellauer    Date: Wed Nov 14 17:45:10 EST 2007  CSN: CSN-platforms-25
                  Wed Nov 14 22:45:10 UTC 2007


Directory modules/bluespec/common/fpgaenv
 hardware-platform/        Locally Added               0 

Directory modules/bluespec/common/fpgaenv/hardware-platform
 pcie/                     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/hardware-platform/pcie
 PCIe.bsv                  Locally Added               0 
 pcie_hardware_platform.awb Locally Added               0 


Added the first version of the PCIe hardware platform import into Bluespec.

Michael P.

----------
aparasha    Date: Tue Nov 20 09:51:18 EST 2007  CSN: CSN-platforms-26
                  Tue Nov 20 14:51:18 UTC 2007


Directory modules/bluespec/common/fpgaenv/hardware-platform/pcie
 PCIe.bsv                  Locally Modified           25 

updated Bluespec wrapper around VHDL HardwareChannels module based
on HardwareChannels v0.8 spec.
----------
aparasha    Date: Tue Nov 27 17:57:18 EST 2007  CSN: CSN-platforms-27
                  Tue Nov 27 22:57:18 UTC 2007


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/sim
 SimChannelIO.bsv          Locally Modified           26 
 sim-channelio.c           Locally Modified           26 
 sim-channelio.h           Locally Modified           26 
 sim-channelio.awb         Locally Modified           26 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr
 software-server.cpp       Locally Added               0 
 software-rrr-server.cpp   Locally Removed            26 
 software-server.h         Locally Added               0 
 HardwareClient.bsv        Locally Added               0 
 software-rrr-server.h     Locally Removed            26 
 rrr_common.bsh            Locally Added               0 
 HardwareRRRClient.bsv     Locally Removed            26 
 rrr.awb                   Locally Modified           26 
 HardwareServer.bsv        Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 HybridFP.bsv              Locally Modified           26 
 hybrid-fp-sw.h            Locally Modified           26 
 hybrid-fp-services.rrr    Locally Modified           26 
 hybrid-fp-sw.cpp          Locally Modified           26 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-memory.awb         Locally Modified           26 
 hybrid-memory-sw.cpp      Locally Modified           26 
 HybridMemory.bsv          Locally Modified           26 
 hybrid-memory-sw.h        Locally Modified           26 
 hybrid-memory-fpga-service-stub.bsh Locally Added               0 
 vmh-utils.cpp             Locally Modified           26 
 hybrid-memory-services.rrr Locally Modified           26 
 vmh-utils.h               Locally Modified           26 

Directory modules/bluespec/common/fpgaenv/virtual-platform/low-level-platform-interface
 LowLevelPlatformInterface.bsv Locally Modified           26 

Partial support for a hardware RRR server, variable-length
RRR parameters, and a richer RRR specification language:
significant changes have been made to RRR and ChannelIO
modules, but functionally all models should behave exactly
as they did before this commit (except for a noticeable
slowdown).

- altered ChannelIO interface to use vectors of read and
  write ports, to support multiple full-duplex virtual channels.

- added partial support to ChannelIO for variable-length
  parameters (currently commented out).

- added support for a hardware RRR server (incomplete).

- added a temporary placeholder stub for the hybrid Memory
  service which acts as an interface between the Service itself
  and the hardware RRR server.

- updated .rrr specification files for hybrid memory and front
  panel virtual devices according to new spec language.

- renamed some files in the RRR module.

----------
mcadler     Date: Wed Nov 28 16:55:45 EST 2007  CSN: CSN-platforms-28
                  Wed Nov 28 21:55:45 UTC 2007


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel
 htg_v5_pcie/              Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/htg_v5_pcie
 htg-v5-pcie-fp.awb        Locally Added               0 
 HTGv5PCIeFP.bsv           Locally Added               0 

Add Hitech Global front panel.

----------
pellauer    Date: Fri Nov 30 17:12:29 EST 2007  CSN: CSN-platforms-29
                  Fri Nov 30 22:12:29 UTC 2007


Directory modules/bluespec/common/fpgaenv/toplevel-wires/xilinx
 htg-v5-pcie-TopLevelWires.bsv Locally Modified           28 
 htg-v5-pcie.ucf           Locally Modified           28 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/null
 NullChannelIO.bsv         Locally Modified           28 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr
 NullRRR.bsv               Locally Modified           28 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/htg_v5_pcie
 HTGv5PCIeFP.bsv           Locally Modified           28 

Directory modules/bluespec/common/fpgaenv
 physical-platform/        Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform
 xilinx_xup/               Locally Added               0 
 htg_virtex5/              Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5
 pcie-disabled/            Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-disabled
 htg-v5-pcie-disabled.awb  Locally Added               0 
 htg-v5-pcie-disabled.bsv  Locally Added               0 
 htg-v5-pcie-disabled.ucf  Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5
 pcie-enabled/             Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.awb   Locally Added               0 
 htg-v5-pcie-enabled.bsv   Locally Added               0 
 htg-v5-pcie-enabled.ucf   Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform
 physical-devices/         Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 pci-express/              Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express
 pci_exp_64b_app.vhd       Locally Added               0 
 BMD.vhd                   Locally Added               0 
 BMD_EP_MEM_ACCESS.vhd     Locally Added               0 
 xilinx_pci_exp_ep.vhd     Locally Added               0 
 BMD_64_RX_ENGINE.vhd      Locally Added               0 
 BMD_64_TX_ENGINE.vhd      Locally Added               0 
 pcieblkplus.vhd           Locally Added               0 
 pci-express-vhdl-import.bsv Locally Added               0 
 ram.vhd                   Locally Added               0 
 BMD_INTR_CTRL.vhd         Locally Added               0 
 BMD_EP_MEM.vhd            Locally Added               0 
 BMD_EP.vhd                Locally Added               0 
 PIO_EP_MEM_ACCESS.vhd     Locally Added               0 
 bmd_pak.vhd               Locally Added               0 
 pci-express-vhdl-import.awb Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 leds/                     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/leds
 general-led-device.awb    Locally Added               0 
 general-led-device.bsv    Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 switches/                 Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/switches
 general-switch-device.awb Locally Added               0 
 general-switch-device.bsv Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 buttons/                  Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/buttons
 general-button-device.awb Locally Added               0 
 general-button-device.bsv Locally Added               0 


The beginning of "productizing" the PCIE controller.

In this checkin the existing structure and modules are not modified, but new
things are added so that we can build them up to the organization that we want
while existing models continue to function.

Includes:
 * Extremely preliminary version of the PCIE VHDL.
 * Initial import of PCIE VHDL into BSV
 * Initial set of Physical Devices:
    * LEDs
    * Switches
    * Buttons
 * Initial Physical Platforms
    * HTG PCI Enabled
    * HTG PCI Disabled

Open question: Who instantiates the physical platform and maps the virtual
devices onto it?

Michael P.


----------
aparasha    Date: Fri Nov 30 18:02:21 EST 2007  CSN: CSN-platforms-30
                  Fri Nov 30 23:02:21 UTC 2007


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/unix
 UNIXChannelIO.bsv         Locally Modified           29 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/sim
 SimChannelIO.bsv          Locally Modified           29 
 sim-channelio.h           Locally Modified           29 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/null
 NullChannelIO.bsv         Locally Modified           29 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr
 NullRRR.bsv               Locally Modified           29 

- fixed a compatibility bug in UNIX channelio module
- simplified a compatibility bugfix in Null channelio module
- reduced the poll interval in Sim channelio module. Models
  simulate significantly faster now.

----------
aparasha    Date: Mon Dec 10 17:36:53 EST 2007  CSN: CSN-platforms-31
                  Mon Dec 10 22:36:53 UTC 2007


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/sim
 SimChannelIO.bsv          Locally Modified           30 
 sim-channelio-sw.h        Locally Modified           30 
 sim-channelio.c           Locally Modified           30 
 sim-channelio.h           Locally Modified           30 
 sim-channelio.awb         Locally Modified           30 
 sim-channelio-sw.cpp      Locally Modified           30 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr
 software-server.cpp       Locally Modified           30 
 HardwareClient.bsv        Locally Modified           30 
 HardwareServer.bsv        Locally Modified           30 

Updated ChannelIO (sim):

- variable-length messages are now supported for all channels in
  both directions.

- created a Unified Message Format (UMF) which is used by multiple
  layers in the RRR stack. A UMF message contains a pre-decoded
  header with IDs and data-lengths for multiple stack layers.

- added an explicit priority arbiter to arbitrate between multiple
  virtual write channels on the hardware side.

- modified hardware RRR client and software server modules to use
  the new ChannelIO, but no changes have been made to their existing
  fixed-size parameter usage. These modules need to be cleaned up
  and generalized.

These changes should be completely invisible outside channelio
and RRR.

----------
aparasha    Date: Tue Dec 11 12:15:22 EST 2007  CSN: CSN-platforms-32
                  Tue Dec 11 17:15:22 UTC 2007


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/sim
 sim-channelio.c           Locally Removed            31 
 sim-channelio.cpp         Locally Added               0 
 umf.cpp                   Locally Added               0 
 sim-channelio-bdpi.h      Locally Added               0 
 sim-channelio.h           Locally Modified           31 
 umf.h                     Locally Added               0 
 sim-channelio.awb         Locally Modified           31 
 sim-channelio-sw.cpp      Locally Removed            31 
 sim-channelio.bsv         Locally Added               0 
 SimChannelIO.bsv          Locally Removed            31 
 umf.bsh                   Locally Added               0 
 sim-channelio-sw.h        Locally Removed            31 
 sim-channelio-bdpi.c      Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr
 software-server.h         Locally Modified           30 

Slight cleanup and of sim-channelio.

----------
pellauer    Date: Wed Dec 12 11:44:16 EST 2007  CSN: CSN-platforms-33
                  Wed Dec 12 16:44:16 UTC 2007


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-fsb-afu.apm Locally Modified           32 
 hasim-fpgaenv-software-no-gui.apm Locally Modified           32 
 hasim-fpgaenv-hybrid-sim.apm Locally Modified           32 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified           32 
 hasim-fpgaenv-null.apm    Locally Modified           32 
 hasim-fpgaenv-software.apm Locally Modified           32 
 hasim-fpgaenv-xup.apm     Locally Modified           32 
 hasim-fpgaenv-fsb-dme.apm Locally Modified           32 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/unix
 UNIXChannelIO.bsv         Locally Modified           32 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/sim
 sim-channelio.bsv         Locally Modified           32 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/null
 NullChannelIO.bsv         Locally Modified           32 

Directory modules/bluespec/common/fpgaenv/virtual-platform/low-level-platform-interface
 LowLevelPlatformInterface.bsv Locally Modified           32 
 low-level-platform-interface.awb Locally Modified           32 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/fsb_dme
 FSB_DME_FP.bsv            Locally Modified           32 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 HybridFP.bsv              Locally Modified           32 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/console
 NullFP.bsv                Locally Modified           32 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/fsb_afu
 FSB_AFU_FP.bsv            Locally Modified           32 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/graphical
 GraphicalFP.bsv           Locally Modified           32 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/xup
 XUPFP.bsv                 Locally Modified           32 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/htg_v5_pcie
 HTGv5PCIeFP.bsv           Locally Modified           32 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/simulation
 BRAMMemory.bsv            Locally Modified           32 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup
 xup-physical-platform.awb Locally Added               0 
 xup-physical-platform.bsv Locally Added               0 
 xilinx.download           Locally Added               0 
 xilinx.ut                 Locally Added               0 
 xup.ucf                   Locally Added               0 
 xilinx.xst                Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-disabled
 htg-v5-pcie-disabled.awb  Locally Modified           32 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 xilinx.download           Locally Added               0 
 xilinx.ut                 Locally Added               0 
 htg-v5-pcie-enabled.awb   Locally Modified           32 
 xilinx.xst                Locally Added               0 
 htg-v5-pcie-enabled.bsv   Locally Modified           32 
 htg-v5-pcie-enabled.ucf   Locally Modified           32 

Directory modules/bluespec/common/fpgaenv/physical-platform
 null/                     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/null
 null-physical-platfrom.bsv Locally Added               0 
 null-physical-platfrom.awb Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express
 pcieblkplus.ngc           Locally Added               0 
 ram.ngc                   Locally Added               0 
 pci-express-vhdl-import.bsv Locally Modified           32 
 pci-express-vhdl-import.awb Locally Modified           32 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/leds
 general-led-device.awb    Locally Modified           32 
 general-led-device.bsv    Locally Modified           32 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/switches
 general-switch-device.awb Locally Modified           32 
 general-switch-device.bsv Locally Modified           32 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/buttons
 general-button-device.awb Locally Modified           32 
 general-button-device.bsv Locally Modified           32 


physical_platforms replaces toplevel_wires as the way to represent the physical wires (and the way
that the wires are driven). All references to TopLevelWires should be expunged.

The HTG physical platform is in place, and XUP has also been rolled over to the new system.
Simulation platforms should still work too.

TBD: Remove obsolete files. Rename "physical-devices" and other things to their final names.

Michael P.

----------
mcadler     Date: Wed Dec 12 18:29:47 EST 2007  CSN: CSN-platforms-34
                  Wed Dec 12 23:29:47 UTC 2007


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/unix
 unix-channelio.awb        Locally Modified           33 

Explicit tagging of BDPI_C.

----------
aparasha    Date: Sun Dec 16 16:13:21 EST 2007  CSN: CSN-platforms-35
                  Sun Dec 16 21:13:21 UTC 2007


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-fsb-afu.apm Locally Modified           34 
 hasim-fpgaenv-software-no-gui.apm Locally Modified           34 
 hasim-fpgaenv-hybrid-sim.apm Locally Modified           34 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified           34 
 hasim-fpgaenv-null.apm    Locally Modified           34 
 hasim-fpgaenv-software.apm Locally Modified           34 
 hasim-fpgaenv-xup.apm     Locally Modified           34 
 hasim-fpgaenv-fsb-dme.apm Locally Modified           34 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/sim
 sim-channelio.bsv         Locally Modified           34 
 physical-channel.cpp      Locally Added               0 
 sim-channelio.cpp         Locally Modified           34 
 umf.cpp                   Locally Modified           34 
 physical-channel.h        Locally Added               0 
 sim-channelio.h           Locally Modified           34 
 umf.h                     Locally Modified           34 
 sim-channelio.awb         Locally Modified           34 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr
 software-server.cpp       Locally Removed            34 
 basic/                    Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr.bsh             Locally Added               0 
 basic-rrr-server.bsv      Locally Added               0 
 basic-rrr-client.cpp      Locally Added               0 
 basic-rrr-client.h        Locally Added               0 
 basic-rrr-server.cpp      Locally Added               0 
 basic-rrr-client.bsv      Locally Added               0 
 basic-rrr.awb             Locally Added               0 
 basic-rrr-server.h        Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr
 software-server.h         Locally Removed            34 
 null-rrr.awb              Locally Removed            34 
 HardwareClient.bsv        Locally Removed            34 
 rrr_common.bsh            Locally Removed            34 
 NullRRR.bsv               Locally Removed            34 
 null/                     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/null
 null-rrr.awb              Locally Added               0 
 null-rrr.bsv              Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr
 rrr.awb                   Locally Removed            34 
 HardwareServer.bsv        Locally Removed            34 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 HybridFP.bsv              Locally Modified           34 
 hybrid-fp-sw.h            Locally Modified           34 
 hybrid-fp-sw.cpp          Locally Modified           34 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-memory-sw.cpp      Locally Modified           34 
 hybrid-memory-sw.h        Locally Modified           34 
 vmh-utils.h               Locally Modified           34 

- additional support for software-client/hardware server. Not yet functional.
  All models behave as before.
- minor re-organization of RRR directory structure
- removed references to TOPWIRES_LEDS and TOPWIRES_SWITCHES from HybridFP.bsv.

----------
aparasha    Date: Tue Dec 18 09:22:14 EST 2007  CSN: CSN-platforms-36
                  Tue Dec 18 14:22:14 UTC 2007


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/sim
 sim-channelio.bsv         Locally Modified           35 
 umf.bsh                   Locally Modified           35 
 umf.cpp                   Locally Modified           35 
 sim-channelio.awb         Locally Modified           35 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-server.bsv      Locally Modified           35 
 basic-rrr-client.bsv      Locally Modified           35 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-memory-sw.cpp      Locally Modified           35 
 HybridMemory.bsv          Locally Modified           35 
 hybrid-memory-fpga-service-stub.bsh Locally Modified           35 

- modified hardware-side UMF structure to store size of message
  in number of chunks instead of number of bytes. This avoids
  having to re-compute number of chunks at multiple levels in
  the hierarchy. Exact number of bytes only matters at the stub
  level, which are already aware of these sizes (since they are
  auto-generated from RRR files).

- fixed some bugs in hardware RRR server.

----------
aparasha    Date: Sun Dec 23 12:14:55 EST 2007  CSN: CSN-platforms-37
                  Sun Dec 23 17:14:55 UTC 2007


Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-server.bsv      Locally Modified           36 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 HybridMemory.bsv          Locally Modified           36 
 hybrid-memory-services.bsh Locally Added               0 
 hybrid-memory-fpga-service-stub.bsh Locally Removed            36 
 hybrid-memory-services.rrr Locally Modified           35 
 hybrid-memory.awb         Locally Modified           35 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 hybrid-fp-services.rrr    Locally Modified           35 

- slight re-distribution of logic between demarshaller module and
  hardware service stub
- updated .rrr file format
- replaced hybrid memory service stub with one autogenerated by
  the updated stubgen. This file is currently placed manually in
  the build tree only because the build process has not yet been
  updated to invoke stubgen to create the stub.

----------
aparasha    Date: Sat Dec 29 19:55:15 EST 2007  CSN: CSN-platforms-38
                  Sun Dec 30 00:55:15 UTC 2007


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 hybrid-fp-services.rrr    Locally Modified           37 
 hybrid-fp-sw.cpp          Locally Modified           36 
 HybridFP.bsv              Locally Modified           36 
 hybrid-fp-sw.h            Locally Modified           36 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-memory-services.bsh Locally Removed            37 
 hybrid-memory.awb         Locally Modified           37 

- removed explicit hardware service stub from hybrid memory. Hardware
  service stubs are now generated automatically during configure.
- updated hybrid front panel to use new software client/hardware server
  path to send switch/button updates to hardware.

----------
aparasha    Date: Wed Jan  9 17:54:45 EST 2008  CSN: CSN-platforms-39
                  Wed Jan  9 22:54:45 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr.bsh             Locally Modified           38 
 basic-rrr-client.cpp      Locally Modified           38 
 basic-rrr-client.h        Locally Modified           38 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 hybrid-fp-sw.cpp          Locally Modified           38 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-memory-sw.cpp      Locally Modified           38 

minor updates required due to the modifications to
software main().

----------
aparasha    Date: Thu Jan 10 13:26:50 EST 2008  CSN: CSN-platforms-40
                  Thu Jan 10 18:26:50 UTC 2008


Directory modules/bluespec/common/fpgaenv/hardware-platform
 pcie/                     Locally Removed            38 

Directory modules/bluespec/common/fpgaenv/hardware-platform/pcie
 PCIe.bsv                  Locally Removed            38 
 pcie_hardware_platform.awb Locally Removed            38 

Directory modules/bluespec/common/fpgaenv
 hardware-platform/        Locally Removed            38 

- removed the obsolete hardware-platform/ directory.

----------
aparasha    Date: Thu Jan 10 15:03:13 EST 2008  CSN: CSN-platforms-41
                  Thu Jan 10 20:03:13 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/sim
 physical-channel.cpp      Locally Modified           39 
 umf.cpp                   Locally Modified           39 
 sim-channelio.h           Locally Modified           39 
 umf.h                     Locally Modified           39 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-server.cpp      Locally Modified           39 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 hybrid-fp-sw.cpp          Locally Modified           39 

- slightly enhanced marshalling/demarshalling capabilities
  built into the software UMF class
- cleaned up some code in rrr-server and devices as a result
  of above enhancements

----------
aparasha    Date: Thu Jan 10 19:02:25 EST 2008  CSN: CSN-platforms-42
                  Fri Jan 11 00:02:25 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/sim
 umf.cpp                   Locally Modified           41 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-server.bsv      Locally Modified           41 

- bugfixes to hardware server request demarshaller

----------
aparasha    Date: Thu Jan 10 21:41:29 EST 2008  CSN: CSN-platforms-43
                  Fri Jan 11 02:41:29 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/sim
 sim-channelio.cpp         Locally Modified           41 
 physical-channel.h        Locally Modified           41 
 sim-channelio.h           Locally Modified           41 
 physical-channel.cpp      Locally Modified           41 

- fixed unclean exit bug

----------
aparasha    Date: Sat Jan 12 13:08:18 EST 2008  CSN: CSN-platforms-44
                  Sat Jan 12 18:08:18 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/pci-express
 pcie-channelio.cpp        Locally Added               0 
 physical-channel/         Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/pci-express/physical-channel
 physical-channel.cpp      Locally Added               0 
 physical-channel.h        Locally Added               0 
 physical-channel.awb      Locally Added               0 
 physical-channel.bsv      Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/pci-express
 pcie-channelio.h          Locally Added               0 
 pcie-channelio.awb        Locally Added               0 
 umf/                      Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/pci-express/umf
 basic-umf.bsh             Locally Added               0 
 basic-umf.cpp             Locally Added               0 
 basic-umf.h               Locally Added               0 
 basic-umf.awb             Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/pci-express
 pcie-channelio.bsv        Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio
 pci-express/              Locally Added               0 

- added a new PCI-express channelio module. This will later be unified
  with the existing sim (and probably unix) channelio modules to form
  a generic channelio module, requiring a platform-specific "physical
  channel" submodule, and a generic "umf" submodule.

- added a PCI-express CSR-based physical channel module which creates
  a FIFO interface on top of the CSR interface provided by the pci-e
  physical platform.
  - The available CSRs are split into two segments, one for each
    direction.
  - Four CSRs are dedicated for use as head and tail pointers.
  - Since the CSR interface provides only one read and one write port,
    these ports are arbitrated between data and pointer requests.
  - Pointer update requests are sent out intermittently. Correctness
    is guaranteed, but efficiency could be improved.
  BSV code for the physical channel is being uploaded with this commit,
  but remains untested. C code is not yet ready.

----------
mcadler     Date: Wed Jan 30 18:02:58 EST 2008  CSN: CSN-platforms-45
                  Wed Jan 30 23:02:58 UTC 2008


Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup
 xup-physical-platform.awb Locally Modified           44 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.awb   Locally Modified           44 

Directory drivers/linux
 hasim/                    Locally Added               0 

Directory drivers/linux/hasim
 hasim-fpga-ctrl.c         Locally Added               0 
 kernel/                   Locally Added               0 

Directory drivers/linux/hasim/kernel
 pchnl_if.h                Locally Added               0 
 pchnl_main.c              Locally Added               0 
 Makefile                  Locally Added               0 
 README                    Locally Added               0 
 pchnl_main.h              Locally Added               0 

Directory drivers/linux/hasim
 README.dev                Locally Added               0 
 Makefile                  Locally Added               0 

Directory drivers/linux/Xilinx_Platform_Cable/windriver/linux_drivers/windriver64/windrvr
 wdreg                     Locally Modified           44 

First version of PCIe driver and control program.  Both are installed
on any machine with a PCIe FPGA in /usr/hasim.  The new program
/usr/hasim/bin/hasim-fpga-ctrl controls the state of the PCIe bus
and programming cables, making user-mode access available to the
programming cable and FPGA kernel drivers only when everything is
in the right states.

----------
mcadler     Date: Wed Jan 30 20:19:08 EST 2008  CSN: CSN-platforms-46
                  Thu Jan 31 01:19:08 UTC 2008


Directory drivers/linux/hasim
 README                    Locally Added               0 

Add a README file describing the build/installation procedure.

----------
mcadler     Date: Sat Feb  2 11:29:55 EST 2008  CSN: CSN-platforms-47
                  Sat Feb  2 16:29:55 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-server.bsv      Locally Modified           46 

New compiler requires proviso for extend.

----------
mcadler     Date: Mon Feb  4 18:49:40 EST 2008  CSN: CSN-platforms-48
                  Mon Feb  4 23:49:40 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/pci-express/physical-channel
 physical-channel.awb      Locally Modified           47 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/pci-express
 pcie-channelio.awb        Locally Modified           47 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/pci-express/umf
 basic-umf.awb             Locally Modified           47 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/sim
 sim-channelio.awb         Locally Modified           47 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-server.bsv      Locally Modified           47 
 basic-rrr.awb             Locally Modified           47 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 HybridFP.bsv              Locally Modified           47 
 hybrid-fp.awb             Locally Modified           47 
 hybrid-fp-sw.cpp          Locally Modified           47 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-memory.awb         Locally Modified           47 
 hybrid-memory-sw.cpp      Locally Modified           47 
 HybridMemory.bsv          Locally Modified           47 

Changes for build environment update.

----------
aparasha    Date: Thu Feb  7 18:12:58 EST 2008  CSN: CSN-platforms-49
                  Thu Feb  7 23:12:58 UTC 2008


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-fsb-afu.apm Locally Modified           48 
 hasim-fpgaenv-software-no-gui.apm Locally Modified           48 
 hasim-fpgaenv-hybrid-sim.apm Locally Modified           48 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified           48 
 hasim-fpgaenv-null.apm    Locally Modified           48 
 hasim-fpgaenv-software.apm Locally Modified           48 
 hasim-fpgaenv-xup.apm     Locally Modified           48 
 hasim-fpgaenv-fsb-dme.apm Locally Modified           48 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/pci-express
 pcie-channelio.cpp        Locally Modified           48 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/pci-express/physical-channel
 driver-interface.h        Locally Added               0 
 libpchnl.h                Locally Added               0 
 physical-channel.cpp      Locally Modified           48 
 physical-channel.h        Locally Modified           48 
 pchnl_if.h                Locally Added               0 
 physical-channel.awb      Locally Modified           48 
 driver-interface.cpp      Locally Added               0 
 physical-channel.bsv      Locally Modified           48 
 libpchnl.c                Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/pci-express
 pcie-channelio.awb        Locally Modified           48 
 umf/                      Locally Removed            48 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/pci-express/umf
 basic-umf.bsh             Locally Removed            48 
 basic-umf.cpp             Locally Removed            48 
 basic-umf.h               Locally Removed            48 
 basic-umf.awb             Locally Removed            48 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/pci-express
 pcie-channelio.bsv        Locally Modified           48 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/sim
 umf.bsh                   Locally Removed            48 
 umf.cpp                   Locally Removed            48 
 physical-channel.h        Locally Modified           48 
 sim-channelio.h           Locally Modified           48 
 umf.h                     Locally Removed            48 
 sim-channelio.awb         Locally Modified           48 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-server.bsv      Locally Modified           48 
 basic-rrr-client.cpp      Locally Modified           48 
 basic-rrr-client.h        Locally Modified           48 
 basic-rrr-client.bsv      Locally Modified           48 
 basic-rrr-server.h        Locally Modified           48 

Directory modules/bluespec/common/fpgaenv/virtual-platform
 umf/                      Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf
 null/                     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/null
 null-umf.awb              Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf
 simple-32/                Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/simple-32
 simple-32-umf.cpp         Locally Added               0 
 simple-32-umf.h           Locally Added               0 
 simple-32-umf.awb         Locally Added               0 
 simple-32-umf.bsv         Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform
 std-virtual-platform.awb  Locally Modified           48 
 fast-virtual-platform.awb Locally Modified           48 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.bsv   Locally Modified           48 
 htg-v5-pcie-enabled.ucf   Locally Modified           48 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express
 h2f_data_fifo.ngc         Locally Added               0 
 f2h_data_fifo.ngc         Locally Added               0 
 pci_exp_64b_app.vhd       Locally Removed            48 
 BMD.vhd                   Locally Removed            48 
 pcieblkplus.ngc           Locally Modified           48 
 ram.ngc                   Locally Modified           48 
 BMD_EP_MEM_ACCESS.vhd     Locally Removed            48 
 xilinx_pci_exp_ep.vhd     Locally Removed            48 
 channel.vhd               Locally Added               0 
 BMD_64_RX_ENGINE.vhd      Locally Removed            48 
 f2h_data_fifo.vhd         Locally Added               0 
 BMD_64_TX_ENGINE.vhd      Locally Removed            48 
 h2f_data_fifo.vhd         Locally Added               0 
 pcieblkplus.vhd           Locally Modified           48 
 pci-express-vhdl-import.bsv Locally Modified           48 
 CSR_BRAM.ngc              Locally Added               0 
 PCIE_RX_ENGINE.vhd        Locally Added               0 
 ram.vhd                   Locally Modified           48 
 INTR_CONTROLLER.vhd       Locally Added               0 
 PCIE_TX_ENGINE.vhd        Locally Added               0 
 BMD_INTR_CTRL.vhd         Locally Removed            48 
 PCIE_BAR0.vhd             Locally Added               0 
 BMD_EP_MEM.vhd            Locally Removed            48 
 BMD_EP.vhd                Locally Removed            48 
 CSR_BRAM.vhd              Locally Added               0 
 PIO_EP_MEM_ACCESS.vhd     Locally Removed            48 
 CSR_CONTROLLER.vhd        Locally Added               0 
 Channel_top.vhd           Locally Added               0 
 bmd_pak.vhd               Locally Removed            48 
 pci-express-vhdl-import.awb Locally Modified           48 

- updated pci-express physical device with latest
  VHDL modules from CBL
- added BVI interface to new CBL module (includes
  clock synchronizers)
- updated PCIE-CSR Channel's algorithm, fixed several
  bugs
- added a debugging state machine to PCIE-CSR module

----------
aparasha    Date: Fri Feb  8 13:21:06 EST 2008  CSN: CSN-platforms-49
                  Fri Feb  8 18:21:06 UTC 2008


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-fsb-afu.apm Locally Modified           48 
 hasim-fpgaenv-software-no-gui.apm Locally Modified           48 
 hasim-fpgaenv-hybrid-sim.apm Locally Modified           48 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified           48 
 hasim-fpgaenv-null.apm    Locally Modified           48 
 hasim-fpgaenv-software.apm Locally Modified           48 
 hasim-fpgaenv-xup.apm     Locally Modified           48 
 hasim-fpgaenv-fsb-dme.apm Locally Modified           48 

Directory admin
 mytags                    Locally Modified           48 

Directory admin/packages
 platforms                 Locally Modified           48 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/pci-express
 pcie-channelio.cpp        Locally Modified           48 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/pci-express/physical-channel
 driver-interface.h        Locally Added               0 
 libpchnl.h                Locally Added               0 
 physical-channel.cpp      Locally Modified           48 
 physical-channel.h        Locally Modified           48 
 pchnl_if.h                Locally Added               0 
 physical-channel.awb      Locally Modified           48 
 driver-interface.cpp      Locally Added               0 
 physical-channel.bsv      Locally Modified           48 
 libpchnl.c                Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/pci-express
 pcie-channelio.h          Locally Modified           48 
 pcie-channelio.awb        Locally Modified           48 
 umf/                      Locally Removed            48 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/pci-express/umf
 basic-umf.bsh             Locally Removed            48 
 basic-umf.cpp             Locally Removed            48 
 basic-umf.h               Locally Removed            48 
 basic-umf.awb             Locally Removed            48 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/pci-express
 pcie-channelio.bsv        Locally Modified           48 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/sim
 umf.bsh                   Locally Removed            48 
 umf.cpp                   Locally Removed            48 
 physical-channel.h        Locally Modified           48 
 sim-channelio.h           Locally Modified           48 
 umf.h                     Locally Removed            48 
 sim-channelio.awb         Locally Modified           48 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-server.bsv      Locally Modified           48 
 basic-rrr-client.cpp      Locally Modified           48 
 basic-rrr-client.h        Locally Modified           48 
 basic-rrr-server.cpp      Locally Modified           48 
 basic-rrr-client.bsv      Locally Modified           48 
 basic-rrr-server.h        Locally Modified           48 

Directory modules/bluespec/common/fpgaenv/virtual-platform
 umf/                      Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf
 null/                     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/null
 null-umf.awb              Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf
 simple-32/                Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/simple-32
 simple-32-umf.cpp         Locally Added               0 
 simple-32-umf.h           Locally Added               0 
 simple-32-umf.awb         Locally Added               0 
 simple-32-umf.bsv         Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform
 std-virtual-platform.awb  Locally Modified           48 
 fast-virtual-platform.awb Locally Modified           48 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.bsv   Locally Modified           48 
 htg-v5-pcie-enabled.ucf   Locally Modified           48 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express
 h2f_data_fifo.ngc         Locally Added               0 
 f2h_data_fifo.ngc         Locally Added               0 
 pci_exp_64b_app.vhd       Locally Removed            48 
 BMD.vhd                   Locally Removed            48 
 pcieblkplus.ngc           Locally Modified           48 
 ram.ngc                   Locally Modified           48 
 BMD_EP_MEM_ACCESS.vhd     Locally Removed            48 
 xilinx_pci_exp_ep.vhd     Locally Removed            48 
 channel.vhd               Locally Added               0 
 BMD_64_RX_ENGINE.vhd      Locally Removed            48 
 f2h_data_fifo.vhd         Locally Added               0 
 BMD_64_TX_ENGINE.vhd      Locally Removed            48 
 h2f_data_fifo.vhd         Locally Added               0 
 pcieblkplus.vhd           Locally Modified           48 
 pci-express-vhdl-import.bsv Locally Modified           48 
 CSR_BRAM.ngc              Locally Added               0 
 PCIE_RX_ENGINE.vhd        Locally Added               0 
 ram.vhd                   Locally Modified           48 
 INTR_CONTROLLER.vhd       Locally Added               0 
 PCIE_TX_ENGINE.vhd        Locally Added               0 
 BMD_INTR_CTRL.vhd         Locally Removed            48 
 PCIE_BAR0.vhd             Locally Added               0 
 BMD_EP_MEM.vhd            Locally Removed            48 
 BMD_EP.vhd                Locally Removed            48 
 CSR_BRAM.vhd              Locally Added               0 
 PIO_EP_MEM_ACCESS.vhd     Locally Removed            48 
 CSR_CONTROLLER.vhd        Locally Added               0 
 Channel_top.vhd           Locally Added               0 
 bmd_pak.vhd               Locally Removed            48 
 pci-express-vhdl-import.awb Locally Modified           48 

Directory .
 changes                   Locally Modified           48 

- added a debugging state machine into the CSR-based physical
  channel module
- updated support for PCI-Express CSR-based physical channel
- updated HTG PCI-Express Driver with latest LX50T-targeted
  code from CBL
- split UMF away from physical channel into a separate module
- multiple misc. bugfixes, updates, additions.

----------
mcadler     Date: Fri Feb  8 15:30:38 EST 2008  CSN: CSN-platforms-50
                  Fri Feb  8 20:30:38 UTC 2008


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified           49 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/sim
 physical-channel.cpp      Locally Modified           49 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-disabled
 htg-v5-pcie-disabled.ucf  Locally Modified           49 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.awb   Locally Modified           49 
 htg-v5-pcie-enabled.ucf   Locally Modified           49 

-Switch to LX110T
-More error state when failing to start up

----------
aparasha    Date: Fri Feb  8 16:48:26 EST 2008  CSN: CSN-platforms-51
                  Fri Feb  8 21:48:26 UTC 2008


Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.ucf   Locally Modified           50 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express
 h2f_data_fifo.ngc         Locally Modified           50 
 f2h_data_fifo.ngc         Locally Modified           50 
 pcieblkplus.ngc           Locally Modified           50 
 ram.ngc                   Locally Modified           50 
 f2h_data_fifo.vhd         Locally Modified           50 
 h2f_data_fifo.vhd         Locally Modified           50 
 pcieblkplus.vhd           Locally Modified           50 
 CSR_BRAM.ngc              Locally Modified           50 
 ram.vhd                   Locally Modified           50 
 CSR_BRAM.vhd              Locally Modified           50 

Completed update of PCIe physical platform to 110T specs.

----------
aparasha    Date: Mon Feb 11 21:45:23 EST 2008  CSN: CSN-platforms-53
                  Tue Feb 12 02:45:23 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/pci-express/physical-channel
 physical-channel.cpp      Locally Modified           50 
 driver-interface.cpp      Locally Modified           50 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr.bsh             Locally Modified           50 
 basic-rrr-client.cpp      Locally Modified           50 
 basic-rrr-server.cpp      Locally Modified           50 
 basic-rrr-client.bsv      Locally Modified           50 
 basic-rrr-server.h        Locally Modified           50 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 HybridFP.bsv              Locally Modified           50 
 hybrid-fp-sw.h            Locally Modified           50 
 hybrid-fp-sw.cpp          Locally Modified           50 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 std-virtual-devices.awb   Locally Modified           50 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-memory-sw.cpp      Locally Modified           50 
 HybridMemory.bsv          Locally Modified           50 
 hybrid-memory-sw.h        Locally Modified           50 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 streams/                  Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/streams
 streams-common.bsh        Locally Added               0 
 asserts.dic               Locally Added               0 
 hybrid-streams-services.rrr Locally Added               0 
 hybrid-streams.h          Locally Added               0 
 bak.bsv                   Locally Added               0 
 hybrid-streams.bsv        Locally Added               0 
 mem-test.dic              Locally Added               0 
 simulation-streams.bsv    Locally Added               0 
 stats.dic                 Locally Added               0 
 events.dic                Locally Added               0 
 hybrid-streams.awb        Locally Added               0 
 messages.dic              Locally Added               0 
 simulation-streams.awb    Locally Added               0 
 streams.dic               Locally Added               0 
 hybrid-streams.cpp        Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/simple-32
 simple-32-umf.cpp         Locally Modified           50 
 simple-32-umf.h           Locally Modified           50 

Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-fsb-afu.apm Locally Modified           50 
 hasim-fpgaenv-software-no-gui.apm Locally Modified           50 
 hasim-fpgaenv-hybrid-sim.apm Locally Modified           50 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified           50 
 hasim-fpgaenv-null.apm    Locally Modified           50 
 hasim-fpgaenv-software.apm Locally Modified           50 
 hasim-fpgaenv-xup.apm     Locally Modified           50 
 hasim-fpgaenv-fsb-dme.apm Locally Modified           50 

- added streams as a virtual device
- reworked streams to now use dictionaries
- misc. minor bugfixes and enhancements to channelio and RRR
- modified fpgaenv/ submodels to include streams
- modified hybrid HTG submodel to use hybrid memory

----------
aparasha    Date: Thu Feb 21 14:29:43 EST 2008  CSN: CSN-platforms-54
                  Thu Feb 21 19:29:43 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/streams
 streams-common.bsh        Locally Modified           53 
 asserts.dic               Locally Removed            53 
 hybrid-streams.h          Locally Modified           53 
 hybrid-streams.bsv        Locally Modified           53 
 bak.bsv                   Locally Removed            53 
 simulation-streams.bsv    Locally Modified           53 
 mem-test.dic              Locally Removed            53 
 stats.dic                 Locally Removed            53 
 events.dic                Locally Removed            53 
 messages.dic              Locally Removed            53 
 hybrid-streams.awb        Locally Modified           53 
 streamid.dic              Locally Added               0 
 simulation-streams.awb    Locally Modified           53 
 streams.dic               Locally Modified           53 
 hybrid-streams.cpp        Locally Modified           53 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express
 ram.ngc                   Locally Modified           52 
 ram.vhd                   Locally Modified           52 
 CSR_CONTROLLER.vhd        Locally Modified           52 
 Channel_top.vhd           Locally Modified           52 

- re-worked streams. The module no longer explicitly identifies
  and handles different streamIDs. Individual modules using streams
  now need to register themselves with streams if they want anything
  but the default behavior (which is to print the stream to stdout).

- removed dictionaries from streams, and moved them to distributed
  modules.

- added skeleton dictionaries to streams, each with a single "NULL"
  entry. These are required for models that do not have even a single
  module adding to the streams dictionary.

- updated PCI-express physical device VHDL code to version 02-21-2008
  sent from CBL.

----------
aparasha    Date: Tue Feb 26 18:06:12 EST 2008  CSN: CSN-platforms-55
                  Tue Feb 26 23:06:12 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/htg_v5_pcie
 HTGv5PCIeFP.bsv           Locally Modified           53 

Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-htg-hwonly.apm    Locally Added               0 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified           53 

- added new fpgaenv submodel for hardware-only HTG platform. The
  APM filename, name and description have been given based on a
  new naming convention that all other fpgaenv submodels will be
  moved to eventually.

- modified name and description for hybrid HTG fpgaenv to make them
  comply with the new naming convention, but did not change the
  submodel APM filename.

- removed temporary debugging code from HTG Front Panel.

----------
mcadler     Date: Thu Feb 28 11:45:54 EST 2008  CSN: CSN-platforms-56
                  Thu Feb 28 16:45:54 UTC 2008


Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-disabled
 htg-v5-pcie-disabled.ucf  Locally Modified           55 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.awb   Locally Modified           55 
 htg-v5-pcie-enabled.ucf   Locally Modified           55 

- Change HTG part name for proper speed bin (we were configured for a
  higher bin than our part -- could cause random failures)
- Fix CLK specification in UCF file.

----------
mcadler     Date: Wed Mar  5 11:32:40 EST 2008  CSN: CSN-platforms-57
                  Wed Mar  5 16:32:40 UTC 2008


Directory drivers/linux/hasim
 hasim-fpga-ctrl.c         Locally Modified           56 

Change commands for FPGA access.  Commands are now:

  --reserve   Reserve the FPGA.
  --program   Enable programming mode.  Removes the PCIe driver, disables
              the PCIe bus and enable's user write access to the programming
              cable, if necesary.
  --activate  Activate the PCIe bus, load the driver and disable write access
              to the programming cable.
  --drop-reservation

  --force may be specified to override another user's reservation.

It is safe to switch between the "program" and "activate" states without
dropping a reservation.

Note that the program uses getopt_long() to parse arguments.  That function
accepts the shortest unique string to specify an argument, so you can currently
use "hasim-fpga-ctrl --p" and "hasim-fpga-ctrl --a".

----------
pellauer    Date: Wed Mar  5 12:38:37 EST 2008  CSN: CSN-platforms-58
                  Wed Mar  5 17:38:37 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/streams
 simulation-streams.bsv    Locally Modified           57 


Bluesim-only streams is now fleshed out and works properly with dictionaries.

TBD: unify the string formatting between Verilog/C (%u, etc).


----------
aparasha    Date: Wed Mar  5 15:36:49 EST 2008  CSN: CSN-platforms-59
                  Wed Mar  5 20:36:49 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/pci-express/physical-channel
 driver-interface.cpp      Locally Modified           58 
 physical-channel.bsv      Locally Modified           58 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express
 pci-express-vhdl-import.bsv Locally Modified           58 
 CSR_CONTROLLER.vhd        Locally Modified           58 

- added a temporary latch to the VHDL CSR controller to make it's interface
  with Bluespec behave like it expects it to.
- added some debugging code to the PCIe VHDL import module (most of this will gradually
  be removed).
- removed all polling delays from the software physical channel layer.

----------
mcadler     Date: Tue Mar 11 16:24:37 EDT 2008  CSN: CSN-platforms-60
                  Tue Mar 11 20:24:37 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/pci-express/physical-channel
 driver-interface.cpp      Locally Modified           59 
 libpchnl.c                Locally Modified           59 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/streams
 streams-common.bsh        Locally Modified           59 
 hybrid-streams.h          Locally Modified           59 
 simulation-streams.bsv    Locally Modified           59 
 hybrid-streams.cpp        Locally Modified           59 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.ucf   Locally Modified           59 

Directory drivers/linux/hasim
 hasim-fpga-ctrl.c         Locally Modified           59 

- Syntax changes for new dictionary structure.
- HTG board has a 50MHz crystal, not 100MHz.
- Clean up error printing when FPGA PCIe driver doesn't load correctly.

----------
aparasha    Date: Fri Mar 14 11:20:26 EDT 2008  CSN: CSN-platforms-61
                  Fri Mar 14 15:20:26 UTC 2008


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-hybrid-sim.apm Locally Modified           60 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified           60 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio
 basic/                    Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/basic
 basic-channelio.cpp       Locally Added               0 
 basic-channelio.h         Locally Added               0 
 basic-channelio.awb       Locally Added               0 
 basic-channelio.bsv       Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio
 pci-express/              Locally Removed            60 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/pci-express
 pcie-channelio.cpp        Locally Removed            60 
 physical-channel/         Locally Removed            60 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/pci-express/physical-channel
 driver-interface.h        Locally Removed            60 
 libpchnl.h                Locally Removed            60 
 physical-channel.cpp      Locally Removed            60 
 pchnl_if.h                Locally Removed            60 
 physical-channel.h        Locally Removed            60 
 driver-interface.cpp      Locally Removed            60 
 physical-channel.awb      Locally Removed            60 
 physical-channel.bsv      Locally Removed            60 
 libpchnl.c                Locally Removed            60 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/pci-express
 pcie-channelio.h          Locally Removed            60 
 pcie-channelio.awb        Locally Removed            60 
 pcie-channelio.bsv        Locally Removed            60 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio
 physical-channel/         Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel
 pci-express/              Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pci-express
 driver-interface.h        Locally Added               0 
 libpchnl.h                Locally Added               0 
 pcie-physical-channel.cpp Locally Added               0 
 pcie-physical-channel.h   Locally Added               0 
 pchnl_if.h                Locally Added               0 
 pcie-physical-channel.awb Locally Added               0 
 pcie-physical-channel.bsv Locally Added               0 
 driver-interface.cpp      Locally Added               0 
 libpchnl.c                Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel
 sim/                      Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/sim
 sim-physical-channel.awb  Locally Added               0 
 sim-physical-channel.bsv  Locally Added               0 
 sim-physical-channel-bdpi.c Locally Added               0 
 sim-physical-channel.cpp  Locally Added               0 
 sim-physical-channel-bdpi.h Locally Added               0 
 sim-physical-channel.h    Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio
 sim/                      Locally Removed            60 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/sim
 sim-channelio.bsv         Locally Removed            60 
 physical-channel.cpp      Locally Removed            60 
 sim-channelio-bdpi.c      Locally Removed            60 
 sim-channelio.cpp         Locally Removed            60 
 physical-channel.h        Locally Removed            60 
 sim-channelio-bdpi.h      Locally Removed            60 
 sim-channelio.h           Locally Removed            60 
 sim-channelio.awb         Locally Removed            60 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-server.cpp      Locally Modified           60 

Reorganized ChannelIO and Physical Channels.

- ChannelIO is now platform independent, and only performs
  Virtual Channel Multiplexing.

- There are two valid implementations of ChannelIO, 'basic'
  and 'null'. Both are platform-independent.

- The module called 'Channel I/O to a UNIX process' of type
  channelio is an anomaly and will be re-located soon. It
  has nothing to do with Channel I/O and is in fact simply
  a Front Panel Physical Device for Pure Simulation.

- There are two platform-dependent PhysicalChannel modules,
  one for PCI-Express and the other for Hybrid Simulation,
  each of which knows how to provide the exact same interface
  to the ChannelIO Multiplexer above by talking to the
  available physical devices on their respective Physical
  Platforms.

----------
mcadler     Date: Fri Mar 14 15:38:49 EDT 2008  CSN: CSN-platforms-62
                  Fri Mar 14 19:38:49 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/streams
 simulation-streams.bsv    Locally Modified           61 

Directory drivers/linux/hasim
 hasim-fpga-ctrl.c         Locally Modified           61 

- Temporary fix for models using only the NULL streamID.
- Fix typo in hasim-fpga-ctrl

----------
aparasha    Date: Mon Mar 17 10:23:34 EDT 2008  CSN: CSN-platforms-63
                  Mon Mar 17 14:23:34 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/basic
 basic-channelio.cpp       Locally Modified           61 
 basic-channelio.h         Locally Modified           61 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pci-express
 driver-interface.h        Locally Removed            61 
 libpchnl.h                Locally Removed            61 
 pcie-physical-channel.cpp Locally Modified           61 
 pcie-physical-channel.h   Locally Modified           61 
 pchnl_if.h                Locally Removed            61 
 pcie-physical-channel.awb Locally Modified           61 
 driver-interface.cpp      Locally Removed            61 
 libpchnl.c                Locally Removed            61 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/sim
 sim-physical-channel.awb  Locally Modified           61 
 sim-physical-channel.bsv  Locally Modified           61 
 sim-physical-channel-bdpi.c Locally Removed            61 
 sim-physical-channel.cpp  Locally Modified           61 
 sim-physical-channel-bdpi.h Locally Removed            61 
 sim-physical-channel.h    Locally Modified           61 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-client.cpp      Locally Modified           61 
 basic-rrr-server.cpp      Locally Modified           61 

Directory modules/bluespec/common/fpgaenv/virtual-platform/low-level-platform-interface
 llpi.cpp                  Locally Added               0 
 hwonly-llpi.awb           Locally Added               0 
 llpi.h                    Locally Added               0 
 hybrid-llpi.awb           Locally Added               0 
 LowLevelPlatformInterface.bsv Locally Removed            61 
 llpi.bsv                  Locally Added               0 
 low-level-platform-interface.awb Locally Removed            61 

Directory modules/bluespec/common/fpgaenv/physical-platform
 simulation/               Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/simulation
 sim-physical-platform.cpp Locally Added               0 
 sim-physical-platform.h   Locally Added               0 
 sim-physical-platform.awb Locally Added               0 
 sim-physical-platform.bsv Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.cpp   Locally Added               0 
 htg-v5-pcie-enabled.h     Locally Added               0 
 htg-v5-pcie-enabled.awb   Locally Modified           61 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express
 pci-express-device-import.awb Locally Added               0 
 pci-express-c-import.h    Locally Added               0 
 libpchnl.h                Locally Added               0 
 pci-express-c-import.cpp  Locally Added               0 
 libpchnl.c                Locally Added               0 
 pci-express-vhdl-import.awb Locally Removed            61 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 unix-pipe/                Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device.h        Locally Added               0 
 unix-pipe-device.awb      Locally Added               0 
 unix-pipe-device.bsv      Locally Added               0 
 unix-pipe-device-bdpi.c   Locally Added               0 
 unix-pipe-device.cpp      Locally Added               0 
 unix-pipe-device-bdpi.h   Locally Added               0 

Directory drivers/linux/hasim/kernel
 pchnl_if.awb              Locally Added               0 
 README                    Locally Modified           61 

Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-software-no-gui.apm Locally Modified           61 
 hasim-fpgaenv-hybrid-sim.apm Locally Modified           61 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified           61 
 hasim-fpgaenv-software.apm Locally Modified           61 

Significant Reorganization of Host Software Stack to make its
hierarchy similar to FPGA-side stack.

Summary of Changes
------------------

Software stack now instantiates and uses physical platforms
similar to the way Bluespec does. However, unlike Bluespec,
it does not have to go through an additional layer of "drivers"
sitting on top of devices.

All devices in the physical platform are collected together
into a PHYSICAL_DEVICES class, with accessors available for
each device, e.g., physicalDevices->GetPCIExpressDevice().

PCI-Express Physical Platform
-----------------------------

- Removed duplicate copy of kernel header "pchnl_if.h" from
  Physical Channel. Added an AWB file at the driver's location
  (platforms/drivers/...) which can be used to tap into the
  header.

- Removed "libpchnl.*" code from PCIe Physical Channel as well
  as the "driver_interface.*" wrappers into the PCIe Physical
  Device under Physical Platform. These are now part of the
  software side of the PCI-Express Physical Device. All VHDL
  and user-level C code provided by CBL is now imported in this
  module. The VHDL is wrapped in Bluespec and seen as an
  FPGA-side Device, and the C is wrapped in C++ and seen as a
  software-side Device.

- Added C++ files to htg_v5_pcie physical platform module.
  This code wraps together all physical devices available to
  the software side (currently, PCIe is the only device).

Simulation Physical Platform
----------------------------

- Added a Simulation Physical Platform. This should probably
  be renamed to "Hybrid-Simulation Physical Platform", since it
  is not clear (to me) yet whether this platform can be shared
  between Pure Simulation and Hybrid Simulation models.
  Currently, only Hybrid Simulation models use it.

- Added a UNIX Pipe Physical Device. Moved all C++ and BSV code
  that dealt with the lowest levels of interfacing with a UNIX
  pipe from the Simulation Physical Channel module to this
  device module. This includes all BDPI code. Barring some
  anomalous modules used for Pure Simulation (which will be
  fixed soon), Virtual Platforms is now free of any BDPI code.

- Simulation Physical Platform instantiates the UNIX Pipe
  Physical Device and makes it available to the upper layers
  as part of the PHYSICAL_DEVICES colelction.

Other
-----

- Added a Hybrid LLPI module that also adds a software version
  of the LLPI. Software LLPI now instantiates Physical Platform,
  ChannelIO and RRR modules (similar to BSV LLPI).

- Updated fpgaenv submodules to reflect the new organization.

----------
aparasha    Date: Mon Mar 17 11:49:47 EDT 2008  CSN: CSN-platforms-64
                  Mon Mar 17 15:49:47 UTC 2008


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express
 libpchnl.h                Locally Modified           63 
 libpchnl.c                Locally Modified           63 

Directory drivers/linux/hasim/kernel
 pchnl_if.h                Locally Modified           62 
 pchnl_main.c              Locally Modified           62 
 pchnl_main.h              Locally Modified           62 

- updated software PCIe kernel driver with latest code from CBL
  featuring support for memory-mapped IO and an updated
  interrupt interface.

- updated libpchnl code in PCIe physical device with latest
  snapshot from CBL.

----------
mcadler     Date: Mon Mar 17 13:28:49 EDT 2008  CSN: CSN-platforms-65
                  Mon Mar 17 17:28:49 UTC 2008


Directory drivers/linux/hasim/kernel
 pchnl_main.c              Locally Modified           64 

Fix a typo.

----------
aparasha    Date: Wed Mar 19 13:43:58 EDT 2008  CSN: CSN-platforms-66
                  Wed Mar 19 17:43:58 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr.bsh             Locally Removed            65 
 basic-rrr-server.bsv      Locally Modified           65 
 basic-rrr-common.bsh      Locally Added               0 
 basic-rrr-client.bsv      Locally Modified           65 
 basic-rrr.awb             Locally Modified           65 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pci-express
 pcie-physical-channel.cpp Locally Modified           63 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express
 pci-express-device-mmap.awb Locally Added               0 
 pci-express-c-import-mmap.cpp Locally Added               0 
 pci-express-c-import-mmap.h Locally Added               0 
 pci-express-c-import.cpp  Locally Removed            63 
 pci-express-device-ioctl.awb Locally Added               0 
 pci-express-device-import.awb Locally Removed            65 
 pci-express-c-import.h    Locally Removed            63 
 pci-express-c-import-ioctl.cpp Locally Added               0 
 pci-express-c-import-ioctl.h Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-disabled
 htg-v5-pcie-disabled.awb  Locally Modified           63 

Directory drivers/linux/hasim/kernel
 pchnl_if.awb              Locally Modified           65 

Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-htg-hwonly.apm    Locally Modified           63 
 hasim-fpgaenv-fsb-afu.apm Locally Modified           63 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified           63 
 hasim-fpgaenv-null.apm    Locally Modified           63 
 hasim-fpgaenv-xup.apm     Locally Modified           63 
 hasim-fpgaenv-fsb-dme.apm Locally Modified           63 

- added support for Memory-Mapped CSR I/O on the host side (doesn't
  work yet). Ioctl-based or Memory-Mapped IO can be selected by
  choosing the approproiate PCIe device.

- fixed some fpgaenv submodels that were broken by the last checkin.

- renamed a file in RRR.

----------
mcadler     Date: Thu Mar 20 07:46:31 EDT 2008  CSN: CSN-platforms-67
                  Thu Mar 20 11:46:31 UTC 2008


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express
 libpchnl.c                Locally Modified           66 

Fix double free on error opening driver, again.

----------
jsemer      Date: Thu Mar 20 16:48:59 EDT 2008  CSN: CSN-platforms-68
                  Thu Mar 20 20:48:59 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/streams
 hybrid-streams.bsv        Locally Modified           67 

Removed gratuitous reference to soft connections in the platform.

Joel

----------
aparasha    Date: Thu Mar 20 17:41:58 EDT 2008  CSN: CSN-platforms-69
                  Thu Mar 20 21:41:58 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-server.bsv      Locally Modified           68 
 basic-rrr-common.bsh      Locally Modified           68 
 basic-rrr.awb             Locally Modified           68 
 demarshaller.bsv          Locally Added               0 

- split demarshaller code away from rrr-server into separate file

----------
aparasha    Date: Fri Mar 21 10:59:29 EDT 2008  CSN: CSN-platforms-70
                  Fri Mar 21 14:59:29 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/low-level-platform-interface
 llpi.h                    Locally Modified           68 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.h     Locally Modified           68 

- fixed two minor syntactic bugs in llpi.h and htg-v5-pcie-enabled.h

----------
jsemer      Date: Fri Mar 21 16:27:37 EDT 2008  CSN: CSN-platforms-71
                  Fri Mar 21 20:27:37 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/streams
 streams-common.bsh        Locally Modified           70 
 hybrid-streams.bsv        Locally Modified           70 

Removed unneeded references to hasim-common in streams module.

----------
aparasha    Date: Fri Mar 21 16:57:02 EDT 2008  CSN: CSN-platforms-72
                  Fri Mar 21 20:57:02 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel
 pci-express/              Locally Removed            69 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pci-express
 pcie-physical-channel.cpp Locally Removed            69 
 pcie-physical-channel.h   Locally Removed            69 
 pcie-physical-channel.awb Locally Removed            69 
 pcie-physical-channel.bsv Locally Removed            69 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel
 pcie-debugger/            Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-debugger
 pcie-debugger.cpp         Locally Added               0 
 pcie-debugger.h           Locally Added               0 
 pcie-debugger.awb         Locally Added               0 
 pcie-debugger.bsv         Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel
 pcie-csr/                 Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-csr
 pcie-physical-channel.cpp Locally Added               0 
 pcie-physical-channel.h   Locally Added               0 
 pcie-physical-channel.awb Locally Added               0 
 pcie-physical-channel.bsv Locally Added               0 

Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified           69 

- added separate physical channel module for debugging PCIe I/O (the original
  physical channel code still has some of this functionality, this will be
  removed soon).

- renamed some directories in physical channel

- updated htg fpgaenv to reflect the directory name change

----------
aparasha    Date: Fri Mar 21 18:01:38 EDT 2008  CSN: CSN-platforms-73
                  Fri Mar 21 22:01:38 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-csr
 pcie-physical-channel.bsv Locally Modified           72 

removed unnecessary reference to hasim_common.

----------
jsemer      Date: Fri Mar 21 20:50:49 EDT 2008  CSN: CSN-platforms-74
                  Sat Mar 22 00:50:49 UTC 2008


Directory modules/bluespec/common/fpgaenv/physical-platform/simulation
 sim-physical-platform.h   Locally Modified           73 

Eliminated extra qualification on constructor/destructor that gcc 4.1
was unhappy with.

----------
mcadler     Date: Tue Mar 25 16:33:12 EDT 2008  CSN: CSN-platforms-75
                  Tue Mar 25 20:33:12 UTC 2008


Directory drivers/linux/hasim/kernel
 pchnl_main.c              Locally Modified           74 

Shift for page offset was in wrong direction for Linux kernels <= 2.6.9

----------
aparasha    Date: Tue Mar 25 18:21:28 EDT 2008  CSN: CSN-platforms-76
                  Tue Mar 25 22:21:28 UTC 2008


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified           75 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-csr
 pcie-physical-channel.cpp Locally Modified           75 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-server.cpp      Locally Modified           75 

- changed HTG fpgaenv submodel to mmap-based PCI-express device

- fixed a MAJOR bug in RRR server software code. It was not setting the
  methodID properly for call returns.

----------
pellauer    Date: Wed Mar 26 18:03:42 EDT 2008  CSN: CSN-platforms-77
                  Wed Mar 26 22:03:42 UTC 2008


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-htg-hwonly.apm    Locally Modified           76 
 hasim-fpgaenv-fsb-afu.apm Locally Modified           76 
 hasim-fpgaenv-software-no-gui.apm Locally Modified           76 
 hasim-fpgaenv-hybrid-sim.apm Locally Modified           76 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified           76 
 hasim-fpgaenv-null.apm    Locally Modified           76 
 hasim-fpgaenv-software.apm Locally Modified           76 
 hasim-fpgaenv-xup.apm     Locally Modified           76 
 hasim-fpgaenv-fsb-dme.apm Locally Modified           76 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-memory.awb         Locally Removed            76 
 HybridMemory.bsv          Locally Removed            76 
 memory_virtual_device_datatypes.bsv Locally Added               0 
 memory_virtual_device_hybrid.awb Locally Added               0 
 memory_virtual_device_hybrid.bsv Locally Added               0 
 hybrid-memory-services.rrr Locally Modified           76 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/simulation
 simulation-memory.awb     Locally Removed            76 
 BRAMMemory.bsv            Locally Removed            76 
 virtual_device_memory_datatypes.bsv Locally Added               0 
 virtual_device_memory_simulation.awb Locally Added               0 
 virtual_device_memory_simulation.bsv Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/null
 memory_virtual_device_null.awb Locally Added               0 
 memory_virtual_device_null.bsv Locally Added               0 
 memory_virtual_device_datatypes.bsv Locally Added               0 
 null-memory.awb           Locally Removed            76 
 NullMemory.bsv            Locally Removed            76 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory
 template/                 Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/template
 memory_virtual_device_template.awb Locally Added               0 
 memory_virtual_device_template.bsv Locally Added               0 
 memory_virtual_device_datatypes.bsv Locally Added               0 


Updated all versions of the memory virtual device to the latest coding
conventions.

Added a code template for the memory virtual device which details the
requirements and interface.

Updated all models to use the new memory virtual device correctly.

Michael P.

----------
aparasha    Date: Thu Mar 27 17:04:43 EDT 2008  CSN: CSN-platforms-78
                  Thu Mar 27 21:04:43 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 demarshaller.bsv          Locally Modified           77 

Updated demarshaller to support arbitrary output bitwidths (including
zero).

----------
aparasha    Date: Thu Mar 27 18:48:18 EDT 2008  CSN: CSN-platforms-79
                  Thu Mar 27 22:48:18 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-server.bsv      Locally Modified           77 

Directory modules/bluespec/common/fpgaenv/virtual-platform/low-level-platform-interface
 llpi.bsv                  Locally Modified           77 

Hardware RRR Server update
--------------------------
- updated interface to export a vector of request and response ports
  (one pair per service) instead of the old single request/response
  methods with the serviceID as parameter. The ports are connected
  to per-service queues internal to the server.

- added support for response path. Arbitration between multiple
  incoming responses on the response ports is done explicitly via
  a simple priority tree. Highest priority is currently given to the
  service with the lowest ID, although this can easily be changed
  later.

- updated interface name to conform to coding conventions.

- updated LLPI to match new server interface name.

----------
jsemer      Date: Fri Mar 28 11:55:05 EDT 2008  CSN: CSN-platforms-80
                  Fri Mar 28 15:55:05 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 HybridFP.bsv              Locally Modified           79 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/console
 NullFP.bsv                Locally Modified           79 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/graphical
 GraphicalFP.bsv           Locally Modified           79 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/xup
 XUPFP.bsv                 Locally Modified           79 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/htg_v5_pcie
 HTGv5PCIeFP.bsv           Locally Modified           79 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/streams
 hybrid-streams.bsv        Locally Modified           79 
 simulation-streams.bsv    Locally Modified           79 

Updated the various implementations of the front panel
and streams virtual devices to use individual arguments
for the remote methods rather than passing a struct as
the only argument.

Eliminated some hasim references in the simulation-streams
implementation.

----------
pellauer    Date: Fri Mar 28 13:26:34 EDT 2008  CSN: CSN-platforms-81
                  Fri Mar 28 17:26:34 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/null
 null-rrr.bsv              Locally Modified           80 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/null
 null-umf.awb              Locally Modified           80 
 null-umf.bsv              Locally Added               0 


Added an update to Null RRR/UMF to make them work in the Hardware-Only FPGA environment.

Michael P.

----------
joel        Date: Fri Mar 28 18:17:50 EDT 2008  CSN: CSN-platforms-82
                  Fri Mar 28 22:17:50 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/streams
 simulation-streams.bsv    Locally Modified           81 

Simulation streams now default to print to STDOUT like the hybrid streams.
But because we aren't yet checking the format string for the number of arguments 
that need to be printed, junk numbers get printed for the excess arguments.

----------
pellauer    Date: Mon Mar 31 11:14:38 EDT 2008  CSN: CSN-platforms-83
                  Mon Mar 31 15:14:38 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/streams
 simulation-streams.bsv    Locally Modified           82 


Fixed some typos in simulation-streams.

Michael P.


----------
aparasha    Date: Mon Mar 31 18:52:45 EDT 2008  CSN: CSN-platforms-84
                  Mon Mar 31 22:52:45 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-server.bsv      Locally Modified           83 
 marshaller.bsv            Locally Added               0 
 basic-rrr.awb             Locally Modified           83 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/null
 null-rrr.bsv              Locally Modified           83 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 HybridFP.bsv              Locally Modified           83 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 memory_virtual_device_hybrid.bsv Locally Modified           83 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/simple-32
 simple-32-umf.cpp         Locally Modified           83 
 simple-32-umf.h           Locally Modified           83 

- completed RRR Response path for software client/hardware server
- fixed a bug in UMF

----------
aparasha    Date: Tue Apr  1 14:51:01 EDT 2008  CSN: CSN-platforms-85
                  Tue Apr  1 18:51:01 UTC 2008


Directory modules/bluespec/common/fpgaenv/physical-platform/simulation
 sim-physical-platform.cpp Locally Modified           84 
 sim-physical-platform.h   Locally Modified           84 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.cpp   Locally Modified           84 
 htg-v5-pcie-enabled.h     Locally Modified           84 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express
 pci-express-c-import-ioctl.cpp Locally Modified           84 

- Added missing Uninit() methods to software sim-physical-platform and
  htg-v5-pcie physical platform. This completes the Uninit() chain all
  the way from the top level (main) of the instantiation hierarchy down
  to the leaf-nodes (physical devices), thereby ensuring a clean exit
  whenever any module in the hierarchy calls CallbackExit().

  This fixes the zombie Bluesim process bug.

- Removed unnecessary cout status messages in pcie device C code.

----------
mcadler     Date: Wed Apr  2 09:23:25 EDT 2008  CSN: CSN-platforms-86
                  Wed Apr  2 13:23:25 UTC 2008


Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.cpp   Locally Modified           85 

Didn't compile because PCIE_DEVICE_CLASS constructor doesn't take arguments.
Since no arguments are needed, it shouldn't have to be mentioned in the
initialization list.  Not tested beyond noting that it now compiles.

----------
aparasha    Date: Wed Apr  2 12:05:02 EDT 2008  CSN: CSN-platforms-87
                  Wed Apr  2 16:05:02 UTC 2008


Directory modules/bluespec/common/fpgaenv/physical-platform/simulation
 sim-physical-platform.cpp Locally Modified           85 
 sim-physical-platform.h   Locally Modified           85 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.cpp   Locally Modified           86 
 htg-v5-pcie-enabled.h     Locally Modified           86 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express
 pci-express-c-import-mmap.cpp Locally Modified           84 
 pci-express-c-import-mmap.h Locally Modified           84 
 pci-express-c-import-ioctl.cpp Locally Modified           85 
 pci-express-c-import-ioctl.h Locally Modified           84 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device.h        Locally Modified           84 
 unix-pipe-device.cpp      Locally Modified           84 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/basic
 basic-channelio.cpp       Locally Modified           84 
 basic-channelio.h         Locally Modified           84 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-debugger
 pcie-debugger.cpp         Locally Modified           84 
 pcie-debugger.h           Locally Modified           84 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-csr
 pcie-physical-channel.cpp Locally Modified           84 
 pcie-physical-channel.h   Locally Modified           84 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-server.cpp      Locally Modified           84 
 basic-rrr-server.h        Locally Modified           84 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 hybrid-fp-sw.h            Locally Modified           84 
 hybrid-fp-sw.cpp          Locally Modified           84 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-memory-sw.cpp      Locally Modified           84 
 hybrid-memory-sw.h        Locally Modified           84 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/streams
 hybrid-streams.h          Locally Modified           84 
 hybrid-streams.cpp        Locally Modified           84 

Directory modules/bluespec/common/fpgaenv/virtual-platform/low-level-platform-interface
 llpi.cpp                  Locally Modified           84 
 llpi.h                    Locally Modified           84 

- removed explicit Uninit() methods from all C++ classes, except in
  cases where the module must perform some specific cleanup tasks
  before propagating the signal to its children.

- updated PCIe device class to derive from HASIM_MODULE_CLASS;
  restored original instantiation code in HTGv5 platform class.

----------
mcadler     Date: Wed Apr  2 13:57:57 EDT 2008  CSN: CSN-platforms-88
                  Wed Apr  2 17:57:57 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 hybrid-fp-sw.cpp          Locally Modified           87 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-memory-sw.cpp      Locally Modified           87 
 vmh-utils.cpp             Locally Modified           87 
 vmh-utils.h               Locally Modified           87 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device.cpp      Locally Modified           87 

Change the way command line arguments are passed around.

----------
pellauer    Date: Fri Apr  4 16:09:09 EDT 2008  CSN: CSN-platforms-89
                  Fri Apr  4 20:09:09 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/streams
 streams-common.bsh        Locally Modified           88 
 hybrid-streams.bsv        Locally Modified           88 
 simulation-streams.bsv    Locally Modified           88 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device.cpp      Locally Modified           88 


* Events are no longer handled by streams.
* Fixed a missing include in unix-pipe-device.

Michael P.

----------
pellauer    Date: Fri Apr  4 16:09:57 EDT 2008  CSN: CSN-platforms-90
                  Fri Apr  4 20:09:57 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 vmh-utils.cpp             Locally Modified           89 


* Changed strtol() to strtoul() to work on 32-bit platforms.

Michael P.

----------
mcadler     Date: Sun Apr  6 09:39:14 EDT 2008  CSN: CSN-platforms-91
                  Sun Apr  6 13:39:14 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/streams
 simulation-streams.bsv    Locally Modified           90 

Fix parameter mismatch between declarations and remove reference to msg
in default clause for printing messages, since it no longer has meaning.

----------
pellauer    Date: Wed Apr  9 15:28:52 EDT 2008  CSN: CSN-platforms-92
                  Wed Apr  9 19:28:52 UTC 2008


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-htg-hwonly.apm    Locally Modified           91 
 hasim-fpgaenv-fsb-afu.apm Locally Removed            91 
 hasim-fpgaenv-software-no-gui.apm Locally Removed            91 
 hasim-fpgaenv-hybrid-sim.apm Locally Modified           91 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified           91 
 hasim-fpgaenv-null.apm    Locally Modified           91 
 hasim-fpgaenv-software.apm Locally Removed            91 
 hasim-fpgaenv-xup.apm     Locally Modified           91 
 hasim-fpgaenv-fsb-dme.apm Locally Removed            91 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/basic
 basic-channelio.cpp       Locally Modified           91 
 basic-channelio.h         Locally Modified           91 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/sim
 sim-physical-channel.cpp  Locally Modified           91 
 sim-physical-channel.h    Locally Modified           91 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-client.cpp      Locally Modified           91 
 basic-rrr-client.h        Locally Modified           91 
 basic-rrr-server.cpp      Locally Modified           91 
 basic-rrr-server.h        Locally Modified           91 

Directory modules/bluespec/common/fpgaenv/virtual-platform/low-level-platform-interface
 llpi.cpp                  Locally Modified           91 
 llpi.h                    Locally Modified           91 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 hybrid-fp-sw.h            Locally Modified           91 
 hybrid-fp-sw.cpp          Locally Modified           91 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-memory-sw.cpp      Locally Modified           91 
 hybrid-memory-sw.h        Locally Modified           91 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/streams
 hybrid-streams.h          Locally Modified           91 
 simulation-streams.bsv    Locally Modified           91 
 hybrid-streams.cpp        Locally Modified           91 

Directory modules/bluespec/common/fpgaenv/physical-platform/simulation
 sim-physical-platform.cpp Locally Modified           91 
 sim-physical-platform.h   Locally Modified           91 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device.h        Locally Modified           91 
 unix-pipe-device.cpp      Locally Modified           91 


* Made the FPGA environments consistent with the new controller/model organization.
* Changed "HASIM_MODULE" to "PLATFORMS_MODULE"

TODO: The "PLATFORMS_MODULE" file should really be a library, but
hasim-configure doesn't support them yet.

----------
pellauer    Date: Wed Apr  9 16:54:05 EDT 2008  CSN: CSN-platforms-93
                  Wed Apr  9 20:54:05 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/low-level-platform-interface
 platforms-module.h        Locally Added               0 
 hybrid-llpi.awb           Locally Modified           92 
 platforms-module.cpp      Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 hybrid-fp-sw.cpp          Locally Modified           92 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-memory-sw.cpp      Locally Modified           92 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device.cpp      Locally Modified           92 


* Updated global args. 

* Moved platform-modules to low-level-platform interface until it can become a
library.

Michael P.



----------
pellauer    Date: Mon Apr 14 15:02:20 EDT 2008  CSN: CSN-platforms-94
                  Mon Apr 14 19:02:20 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-common.bsh      Locally Modified           93 


Added UINT64 to rrr-common.


----------
mcadler     Date: Mon Apr 14 21:10:03 EDT 2008  CSN: CSN-platforms-95
                  Tue Apr 15 01:10:03 UTC 2008


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-hybrid-m5-alpha-sim.apm Locally Added               0 

Directory admin/packages
 platforms                 Locally Modified           94 

Directory modules/bluespec/common/fpgaenv/virtual-platform
 m5-virtual-platform.awb   Locally Added               0 
 std-virtual-platform.h    Locally Added               0 
 std-virtual-platform.awb  Locally Modified           94 
 fast-virtual-platform.awb Locally Modified           94 
 m5-virtual-platform.h     Locally Added               0 

- Define a virtual platform that includes m5.
- All virtual platforms now have a VIRTUAL_PLATFORM class with a constructor
  that takes a subset of the command line parameters.  m5 needs this.
  The std-virtual-platform.h class does nothing.

----------
mcadler     Date: Wed Apr 16 15:18:10 EDT 2008  CSN: CSN-platforms-96
                  Wed Apr 16 19:18:10 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-memory-sw.cpp      Locally Modified           95 

No more --benchmark.  Get the vmh file from the --funcp parameter.

----------
aparasha    Date: Thu Apr 17 00:27:33 EDT 2008  CSN: CSN-platforms-97
                  Thu Apr 17 04:27:33 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-server.bsv      Locally Modified           96 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 HybridFP.bsv              Locally Modified           96 
 hybrid-fp-services.rrr    Locally Modified           96 
 hybrid-fp-sw.cpp          Locally Modified           96 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-memory-sw.cpp      Locally Modified           96 
 memory_virtual_device_hybrid.bsv Locally Modified           96 
 hybrid-memory-services.rrr Locally Modified           96 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/streams
 hybrid-streams.bsv        Locally Modified           96 
 hybrid-streams.cpp        Locally Modified           96 

- updated source files to include renamed stub files
  (see hasim commit).
- updated .rrr spec files to conform to updated syntax.

----------
aparasha    Date: Thu Apr 17 15:32:14 EDT 2008  CSN: CSN-platforms-98
                  Thu Apr 17 19:32:14 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-server.cpp      Locally Modified           96 
 basic-rrr-client.bsv      Locally Modified           96 
 basic-rrr.awb             Locally Modified           96 
 basic-rrr-server.h        Locally Modified           96 
 basic-rrr-server.bsv      Locally Modified           97 
 old-rrr-client.bsv        Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 HybridFP.bsv              Locally Modified           97 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 memory_virtual_device_hybrid.bsv Locally Modified           97 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/streams
 hybrid-streams.bsv        Locally Modified           97 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/basic
 basic-channelio.h         Locally Modified           96 
 basic-channelio.awb       Locally Modified           96 
 basic-channelio.bsv       Locally Modified           96 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/unix
 UNIXChannelIO.bsv         Locally Modified           96 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/null
 NullChannelIO.bsv         Locally Modified           96 

Directory modules/bluespec/common/fpgaenv/virtual-platform/low-level-platform-interface
 llpi.bsv                  Locally Modified           96 

- added new fully pipelined hardware-side RRR client that the auto-
  generated stubs can connect to (see hasim commit).

- deprecated old blocking RRR client. This client is still instantiated
  by LLPI and used by all existing modules that were already using it,
  but the interface and instance names have been changed to make it
  obvious that this code is deprecated (mkOldRRRClient, oldrrrClient, etc.)
 
- added a third virtual channel to ChannelIO that the deprecated RRR
  Client hooks up to. The new RRR client uses the original hw->sw
  virtual channel. In this way, both clients can coexist while the
  modules that were using the old client can be gradually ported to
  the new client.

- added support for handling requests from both hardware clients (old
  and new) to software RRR server. The software side taps in to both
  virtual channels, and knows how to handle each case. Existing
  software-server modules continue to function correctly unchanged.

- changed the interface name ChannelIO to CHANNEL_IO in accordance with
  coding conventions.

----------
aparasha    Date: Thu Apr 17 22:16:38 EDT 2008  CSN: CSN-platforms-99
                  Fri Apr 18 02:16:38 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/basic
 basic-channelio.cpp       Locally Modified           97 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-server.cpp      Locally Modified           98 
 basic-rrr-client.bsv      Locally Modified           98 
 basic-rrr-server.h        Locally Modified           98 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 hybrid-fp.cpp             Locally Added               0 
 hybrid-fp.rrr             Locally Added               0 
 hybrid-fp-services.rrr    Locally Removed            97 
 hybrid-fp.h               Locally Added               0 
 hybrid-fp.awb             Locally Modified           97 
 hybrid-fp-sw.cpp          Locally Removed            97 
 hybrid-fp.bsv             Locally Added               0 
 HybridFP.bsv              Locally Removed            98 
 hybrid-fp-sw.h            Locally Removed            97 

- fixed some bugs with new hardware client/software server path.
- updated hybrid front panel to use new RRR client.
- changed some front panel filenames to conform to conventions.

----------
mcadler     Date: Fri Apr 18 08:31:02 EDT 2008  CSN: CSN-platforms-100
                  Fri Apr 18 12:31:02 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform
 m5-virtual-platform.h     Locally Modified           99 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device-bdpi.c   Locally Modified           99 

- Detect EOF on BDPI pipe and exit.  Used to go into an infinite loop.
- Moved Python cleanup out of m5_main().

----------
mcadler     Date: Fri Apr 18 10:00:12 EDT 2008  CSN: CSN-platforms-101
                  Fri Apr 18 14:00:12 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/simple-32
 simple-32-umf.h           Locally Modified          100 

Use asim/syntax.h instead of private types.

----------
mcadler     Date: Mon Apr 21 15:54:14 EDT 2008  CSN: CSN-platforms-102
                  Mon Apr 21 19:54:14 UTC 2008


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-htg-hwonly.apm    Locally Modified          101 
 hasim-fpgaenv-hybrid-sim.apm Locally Modified          101 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          101 
 hasim-fpgaenv-hybrid-m5-alpha-sim.apm Locally Removed           101 
 hasim-fpgaenv-null.apm    Locally Modified          101 
 hasim-fpgaenv-xup.apm     Locally Modified          101 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-client.cpp      Locally Modified          101 
 basic-rrr-server.cpp      Locally Modified          101 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 hybrid-fp.cpp             Locally Modified          101 
 hybrid-fp.h               Locally Modified          101 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 std-virtual-devices.awb   Locally Modified          101 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 memory_virtual_device_hybrid.awb Locally Modified          101 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/simulation
 virtual_device_memory_simulation.awb Locally Modified          101 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/null
 memory_virtual_device_null.awb Locally Modified          101 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/template
 memory_virtual_device_template.awb Locally Modified          101 

The memory that used to be defined under fpgaenv is now called scratchpad
memory.  All models currently specify NULL scratchpad memory.  What used to
be the VMH memory initializer is now in the hasim repository and is used
by the functional partition.

----------
mcadler     Date: Tue Apr 22 16:08:57 EDT 2008  CSN: CSN-platforms-103
                  Tue Apr 22 20:08:57 UTC 2008


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device-bdpi.c   Locally Modified          102 
 unix-pipe-device.cpp      Locally Modified          102 

Stop killing the Bluesim process on exit!  The kill() was causing lost data
on unbuffered debugging log streams.  Now that the Bluesim side pipe code
exits correctly on EOF we can terminate the pair from the sw side just by
closing the pipe.

----------
aparasha    Date: Tue Apr 22 17:38:26 EDT 2008  CSN: CSN-platforms-104
                  Tue Apr 22 21:38:26 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 marshaller.bsv            Locally Modified          103 

added the ability to marshal words of size smaller than the maximum
size that the marshaller can take.

----------
aparasha    Date: Thu Apr 24 13:07:49 EDT 2008  CSN: CSN-platforms-105
                  Thu Apr 24 17:07:49 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/simple-32
 simple-32-umf.cpp         Locally Modified          104 
 simple-32-umf.h           Locally Modified          104 

added append and extract methods for variable-sized UINTs.

----------
mcadler     Date: Thu Apr 24 21:12:29 EDT 2008  CSN: CSN-platforms-106
                  Fri Apr 25 01:12:29 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform
 m5-virtual-platform.awb   Locally Removed           105 
 std-virtual-platform.h    Locally Modified          105 
 m5-virtual-platform.h     Locally Removed           105 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device-bdpi.c   Locally Modified          105 
 unix-pipe-device.cpp      Locally Modified          105 

- m5 is no longer a virtual platform.  It is part of the hybrid functional model.
- Standard virtual platform shouldn't get functional argument vector
- Don't abort for EINTR on pipes

----------
mcadler     Date: Sun Apr 27 15:19:51 EDT 2008  CSN: CSN-platforms-107
                  Sun Apr 27 19:19:51 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-csr
 pcie-physical-channel.cpp Locally Modified          106 
 pcie-physical-channel.h   Locally Modified          106 

Directory modules/bluespec/common/fpgaenv/virtual-platform/low-level-platform-interface
 llpi.h                    Locally Modified          106 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.cpp   Locally Modified          106 
 htg-v5-pcie-enabled.h     Locally Modified          106 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express
 pci-express-c-import-mmap.cpp Locally Modified          106 
 pci-express-c-import-mmap.h Locally Modified          106 

Update HTG / PCIe modules so they compile.

----------
vmurali     Date: Mon Apr 28 18:15:24 EDT 2008  CSN: CSN-platforms-108
                  Mon Apr 28 22:15:24 UTC 2008


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-hybrid-sim.apm Locally Modified          107 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 demarshaller.bsv          Locally Modified          107 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device.cpp      Locally Modified          107 


- Fixed bug in demarshaller (off by 1 error)
- Passing flag to bluesimargs


----------
mcadler     Date: Wed Apr 30 00:26:00 EDT 2008  CSN: CSN-platforms-109
                  Wed Apr 30 04:26:00 UTC 2008


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device.cpp      Locally Modified          108 

Use new bluesim argument vector.

----------
mcadler     Date: Wed Apr 30 08:35:33 EDT 2008  CSN: CSN-platforms-110
                  Wed Apr 30 12:35:33 UTC 2008


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-hybrid-sim.apm Locally Modified          109 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          109 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/null
 memory_virtual_device_null.awb Locally Modified          109 
 memory_virtual_device_null.bsv Locally Modified          109 
 memory_virtual_device_datatypes.bsv Locally Modified          109 

Change the names of types in scratchpad memory so they don't conflict with
functional partition memory.  It is no longer necessary to change the
sizes of the null scratchpad memory to conform to the functional memory
service sizes.

----------
mcadler     Date: Fri May  2 16:57:44 EDT 2008  CSN: CSN-platforms-111
                  Fri May  2 20:57:44 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-common.bsh      Locally Modified          110 

Add a few Bluespec types for passing 72, 96 and 128 bit objects through RRR.
These can go away when we solve type specification for RRR.  Types are:
UMF_UINT72, UMF_UINT96 and UMF_UNIT128.

----------
jsemer      Date: Mon May  5 11:55:00 EDT 2008  CSN: CSN-platforms-112
                  Mon May  5 15:55:00 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/null
 null-rrr.bsv              Locally Modified          111 

Updated null RRR modules to conform to latest version of the RRR
interface.

----------
mcadler     Date: Fri May  9 09:37:24 EDT 2008  CSN: CSN-platforms-113
                  Fri May  9 13:37:24 UTC 2008


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device.cpp      Locally Modified          112 

Look for Bluesim and then Verilog simulation.

----------
jsemer      Date: Fri May  9 15:28:47 EDT 2008  CSN: CSN-platforms-114
                  Fri May  9 19:28:47 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 hybrid-fp.cpp             Locally Modified          113 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/streams
 streams.dic               Locally Modified          113 
 hybrid-streams.cpp        Locally Modified          113 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device.cpp      Locally Modified          113 

Use commands_switches.h rather than main.h to get command switch info.

Added a special message to the streams service STREAMS_MESSAGE_EXIT, which
takes an exit status as an argument and terminates the run when called.

----------
jsemer      Date: Fri May  9 20:57:37 EDT 2008  CSN: CSN-platforms-115
                  Sat May 10 00:57:37 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 hybrid-fp.cpp             Locally Modified          114 
 hybrid-fp.h               Locally Modified          114 

If --showfp is not set, then print LED changes to STDOUT.

----------
mcadler     Date: Tue May 13 08:32:07 EDT 2008  CSN: CSN-platforms-116
                  Tue May 13 12:32:07 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 hybrid-fp.cpp             Locally Modified          115 

Add option to turn off LED messages to stdout

----------
aparasha    Date: Wed May 14 17:47:52 EDT 2008  CSN: CSN-platforms-117
                  Wed May 14 21:47:52 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-common.bsh      Locally Modified          116 

added UINT8 type.

----------
mcadler     Date: Tue May 27 16:51:27 EDT 2008  CSN: CSN-platforms-118
                  Tue May 27 20:51:27 UTC 2008


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device.cpp      Locally Modified          117 

Directory drivers/linux/hasim
 hasim-fpga-ctrl.c         Locally Modified          117 
 Makefile                  Locally Modified          117 
 README                    Locally Modified          117 

Directory drivers/linux/Xilinx_Platform_Cable/windriver/linux_drivers/pcusb
 xusb_xup.hex              Locally Modified          117 
 xusb_xlp.hex              Locally Modified          117 
 xusb_emb.hex              Locally Modified          117 
 xusbdfwu.hex              Locally Modified          117 
 xusb_xpr.hex              Locally Modified          117 

- Wait for Bluesim license
- Update Xilinx platform cable firmware

----------
mcadler     Date: Wed May 28 11:54:22 EDT 2008  CSN: CSN-platforms-119
                  Wed May 28 15:54:22 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/streams
 hybrid-streams.cpp        Locally Modified          118 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device-bdpi.c   Locally Modified          118 

Make argument to exit() correspond to exit status of simulated program.

----------
mcadler     Date: Fri May 30 15:56:33 EDT 2008  CSN: CSN-platforms-120
                  Fri May 30 19:56:33 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-server.h        Locally Modified          119 

Provide a default (null) implementation of Poll().

----------
aparasha    Date: Tue Jun  3 18:25:16 EDT 2008  CSN: CSN-platforms-121
                  Tue Jun  3 22:25:16 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-csr
 pcie-physical-channel.cpp Locally Modified          120 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/sim
 sim-physical-channel.cpp  Locally Modified          120 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 marshaller.bsv            Locally Modified          120 
 demarshaller.bsv          Locally Modified          120 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/simple-32
 simple-32-umf.cpp         Locally Modified          120 
 simple-32-umf.h           Locally Modified          120 

- Fixed a bug in the demarshaller that was causing it to behave
  incorrectly when a method's total input size was less than the
  demarshaller's maximum width. Part of the fix involved changing
  the demarshaller's sequencing algorithm - it now accepts chunks
  starting from the most significant and ending with the least
  significant.

- Modified physical channel(s) to send chunks in reverse (MS -> LS)
  order as expected by the new demarshaller.

- Added methods to software UMF to enable reading its contents in
  reverse order at chunk granularities.

Models now work with the Null cache. This should fix all regressions.

----------
aparasha    Date: Fri Jun  6 01:29:52 EDT 2008  CSN: CSN-platforms-122
                  Fri Jun  6 05:29:52 UTC 2008


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-hybrid-sim.apm Locally Modified          121 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          121 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-csr
 pcie-physical-channel.cpp Locally Modified          121 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/sim
 sim-physical-channel.cpp  Locally Modified          121 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-server.cpp      Locally Modified          121 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 hybrid-fp.cpp             Locally Modified          121 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf
 little-32/                Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/little-32
 umf-little-32.cpp         Locally Added               0 
 umf-allocator.cpp         Locally Added               0 
 umf-little-32.h           Locally Added               0 
 umf-allocator.h           Locally Added               0 
 umf-little-32.awb         Locally Added               0 
 umf-little-32.bsv         Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf
 simple-32/                Locally Removed           121 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/simple-32
 simple-32-umf.cpp         Locally Removed           121 
 simple-32-umf.h           Locally Removed           121 
 simple-32-umf.awb         Locally Removed           121 
 simple-32-umf.bsv         Locally Removed           121 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express
 pci-express-c-import-ioctl.cpp Locally Modified          121 
 pci-express-vhdl-import.bsv Locally Modified          121 
 pci-express-c-import-mmap.cpp Locally Modified          121 

- Renamed "Simple 32" UMF to "Little-endian 32-bit" UMF and simplified the code. There's
  a further trivial optimization which I will add soon.

- Changed UMF allocation/deallocation system. UMF internally maintains an allocator and
  a pool of resources. Instead of using new and delete to allocate UMF messages, users
  should call the static method UMF_MESSAGE_CLASS::New() to allocate a new message, and
  call the instanced method message->Delete() to release it back into the pool. For now,
  the agreement that the sender allocates the message and the receiver de-allocates it
  remains.

- Moved the endian-swap from the software side of the PCIe driver to the hardware side.

----------
aparasha    Date: Fri Jun  6 16:16:05 EDT 2008  CSN: CSN-platforms-123
                  Fri Jun  6 20:16:05 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-csr
 pcie-physical-channel.cpp Locally Modified          122 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/little-32
 umf-little-32.cpp         Locally Modified          122 
 umf-little-32.h           Locally Modified          122 

Minor performance optimizations.

----------
mcadler     Date: Fri Jun 13 13:20:02 EDT 2008  CSN: CSN-platforms-124
                  Fri Jun 13 17:20:02 UTC 2008


Directory drivers/linux/hasim
 hasim-fpga-ctrl.c         Locally Modified          123 
 Makefile                  Locally Modified          123 
 init-hasim-fpga           Locally Added               0 

- Add options to hasim-fpga-ctrl to manage the signature of bitfiles loaded
  on FPGAs.
- Transition from reserve to active without programming is now quick if
  the PCIe bus was already enabled and the driver loaded.
- Reset the FPGA image signature on reboot in case the machine was power
  cycled.
- Retry when turning on a bus fails.

----------
aparasha    Date: Thu Jun 19 12:51:39 EDT 2008  CSN: CSN-platforms-125
                  Thu Jun 19 16:51:39 UTC 2008


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          124 

Directory modules/bluespec/common/fpgaenv/fpga-components/software
 BRAM1.bsv                 Locally Modified          124 
 BRAM3.bsv                 Locally Modified          124 

Directory modules/bluespec/common/fpgaenv/fpga-components/hardware
 BRAM1.bsv                 Locally Modified          124 
 BRAM3.bsv                 Locally Modified          124 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-debugger
 pcie-debugger.cpp         Locally Modified          124 
 pcie-debugger.h           Locally Modified          124 
 pcie-debugger.bsv         Locally Modified          124 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-csr
 pcie-physical-channel.bsv Locally Modified          124 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/little-32
 umf-allocator.cpp         Locally Modified          124 

Directory modules/bluespec/common/fpgaenv/physical-platform/simulation
 sim-physical-platform.bsv Locally Modified          124 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup
 xup-physical-platform.bsv Locally Modified          124 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-disabled
 htg-v5-pcie-disabled.bsv  Locally Modified          124 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.bsv   Locally Modified          124 

Directory modules/bluespec/common/fpgaenv/physical-platform/null
 null-physical-platfrom.bsv Locally Modified          124 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express
 libpchnl.h                Locally Modified          124 
 h2f_data_fifo.ngc         Locally Modified          124 
 pcieblkplus.ngc           Locally Modified          124 
 DMA_CONTROLLER.vhd        Locally Added               0 
 ram.ngc                   Locally Removed           124 
 channel.vhd               Locally Modified          124 
 pci-express-device.bsv    Locally Added               0 
 h2f_data_fifo.vhd         Locally Removed           124 
 f2h_data_fifo.vhd         Locally Removed           124 
 RST_CONTROLLER.vhd        Locally Added               0 
 pcieblkplus.vhd           Locally Removed           124 
 CSR_BRAM.ngc              Locally Modified          124 
 PCIE_RX_ENGINE.vhd        Locally Modified          124 
 pci-express-vhdl-import.bsv Locally Modified          124 
 INTR_CONTROLLER.vhd       Locally Modified          124 
 pci-express-device-mmap.awb Locally Modified          124 
 ram.vhd                   Locally Removed           124 
 PCIE_TX_ENGINE.vhd        Locally Modified          124 
 pci-express-c-import-mmap.cpp Locally Modified          124 
 PCIE_BAR0.vhd             Locally Modified          124 
 CSR_BRAM.vhd              Locally Removed           124 
 pci-express-c-import-mmap.h Locally Modified          124 
 Channel_top.vhd           Locally Modified          124 
 CSR_CONTROLLER.vhd        Locally Modified          124 
 libpchnl.c                Locally Modified          124 

Directory drivers/linux/hasim/kernel
 pchnl_if.h                Locally Modified          124 
 pchnl_main.c              Locally Modified          124 
 pchnl_main.h              Locally Modified          124 

- added PCIe soft reset controller and DMA controller
- added support for soft reset to Bluespec PCIe device
- added support for propagating reset signal via physical platform and LLPI
- updated other controllers with latest code from CBL
- added initialization code to BRAMs.
- updated PCIe debugger (it was broken).

----------
mvijayar    Date: Fri Jun 20 20:19:41 EDT 2008  CSN: CSN-platforms-126
                  Sat Jun 21 00:19:41 UTC 2008


Directory modules/bluespec/common/fpgaenv/fpga-components/software
 FpgaMemory.bsv            Locally Added               0 
 software-fpga-components.awb Locally Modified          125 
 FpgaMemoryHasim.bsv       Locally Added               0 
 BRAM_Bluesim.bsv          Locally Removed           125 
 BRAM1.bsv                 Locally Removed           125 
 BRAM2.bsv                 Locally Removed           125 
 BRAM3.bsv                 Locally Removed           125 

Directory modules/bluespec/common/fpgaenv/fpga-components/hardware
 FpgaMemory.bsv            Locally Added               0 
 BRAM_Verilog.bsv          Locally Removed           125 
 FpgaMemoryHasim.bsv       Locally Added               0 
 hardware-fpga-components.awb Locally Modified          125 
 BRAM_base.bsv             Locally Removed           125 
 BRAM.v                    Locally Removed           125 
 Bram.v                    Locally Added               0 
 BRAM1.bsv                 Locally Removed           125 
 BRAM2.bsv                 Locally Removed           125 
 BRAM3.bsv                 Locally Removed           125 

Added multi read port (initialized or not initialized ) brams


----------
mcadler     Date: Mon Jun 23 00:03:21 EDT 2008  CSN: CSN-platforms-127
                  Mon Jun 23 04:03:21 UTC 2008


Directory modules/bluespec/common/fpgaenv/physical-platform/simulation
 sim-physical-platform.bsv Locally Modified          126 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device.h        Locally Modified          126 
 unix-pipe-device.awb      Locally Modified          126 
 unix-pipe-device.bsv      Locally Modified          126 
 unix-pipe-device-bdpi.c   Locally Modified          126 
 unix-pipe-device.cpp      Locally Modified          126 

When HASIM_NAMED_PIPES environment variable exists the connection for
a hybrid model between software and a simulator (not hardware) goes through
named pipes.  The software does not invoke the simulator.  When the
software-side closes the pipe the communication layer on the HW side
triggers a reset and waits for a new connection.

----------
vmurali     Date: Mon Jun 23 09:17:46 EDT 2008  CSN: CSN-platforms-128
                  Mon Jun 23 13:17:46 UTC 2008


Directory modules/bluespec/common/fpgaenv/fpga-components/hardware
 Bram.v                    Locally Modified          127 


- Bram.v has all the required signals now


----------
mvijayar    Date: Mon Jun 23 16:30:00 EDT 2008  CSN: CSN-platforms-129
                  Mon Jun 23 20:30:00 UTC 2008


Directory modules/bluespec/common/fpgaenv/fpga-components/software
 FpgaMemory.bsv            Locally Modified          128 

Directory modules/bluespec/common/fpgaenv/fpga-components/hardware
 FpgaMemory.bsv            Locally Modified          128 
 Bram.v                    Locally Modified          128 


Used actual Xilinx Bram ports, which is basically 2-ports, each port can either be used as a read or as a write at a time. The interface remains the same. So now, if one instantiates a n-readPort, 1-writePort bram, you use only ceil(n/2) brams. But the downside is, write to the second port will conflict with the read to the second port, so they can not be written on the same rule.

----------
mvijayar    Date: Mon Jun 23 19:52:30 EDT 2008  CSN: CSN-platforms-130
                  Mon Jun 23 23:52:30 UTC 2008


Directory modules/bluespec/common/fpgaenv/fpga-components/software
 FpgaMemory.bsv            Locally Modified          129 

Fixed a bug: initialization rule was using write port 0, which was causing conflicts in several of the rules. I think the remaining warnings are benign


----------
mvijayar    Date: Fri Jun 27 11:04:06 EDT 2008  CSN: CSN-platforms-131
                  Fri Jun 27 15:04:06 UTC 2008


Directory modules/bluespec/common/fpgaenv/fpga-components/software
 FpgaMemory.bsv            Locally Modified          130 

Directory modules/bluespec/common/fpgaenv/fpga-components/hardware
 FpgaMemory.bsv            Locally Modified          130 
 Bram.v                    Locally Modified          130 

Reverting to the older version of Brams. I am working on getting the new version ready by today.

----------
aparasha    Date: Thu Jul  3 11:58:27 EDT 2008  CSN: CSN-platforms-132
                  Thu Jul  3 15:58:27 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/basic
 basic-channelio.cpp       Locally Modified          131 
 basic-channelio.h         Locally Modified          131 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-client.cpp      Locally Modified          131 
 basic-rrr-client.h        Locally Modified          131 

Directory modules/bluespec/common/fpgaenv/virtual-platform/low-level-platform-interface
 llpi.cpp                  Locally Modified          131 
 llpi.h                    Locally Modified          131 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/little-32
 umf-allocator.cpp         Locally Modified          131 
 umf-allocator.h           Locally Modified          131 

Split software stack into two threads (see HAsim commit).

----------
napatil     Date: Fri Jul 18 11:59:29 EDT 2008  CSN: CSN-platforms-133
                  Fri Jul 18 15:59:29 UTC 2008


Directory modules/bluespec/common/fpgaenv/fpga-components/hardware
 FpgaMemory.bsv            Locally Modified          132 
 FAST_BRAM.v               Locally Added               0 
 hardware-fpga-components.awb Locally Modified          132 
 FAST_BRAM.bsv             Locally Added               0 

Add the blockram module developed at UTFAST, and revert to the blockram wrappers developed in CSN-129 with some minor changes.

----------
napatil     Date: Fri Jul 18 17:00:39 EDT 2008  CSN: CSN-platforms-134
                  Fri Jul 18 21:00:39 UTC 2008


Directory modules/bluespec/common/fpgaenv/fpga-components/hardware
 Clock100MHz.v             Locally Added               0 
 Clock100MHz.bsv           Locally Added               0 

Clock multiplier to generate 100MHz clock from a 50MHz clock. Completely
un-tested.


----------

----------
napatil     Date: Mon Jul 28 15:07:38 EDT 2008  CSN: CSN-platforms-135
                  Mon Jul 28 19:07:38 UTC 2008


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-hybrid-sim.apm Locally Modified          134 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          134 

Directory admin
 mytags                    Locally Modified          134 

Directory modules/bluespec/common/fpgaenv/fpga-components
 Clock100MHz.v             Locally Added               - 
 FpgaMemory.bsv            Locally Added               - 
 RegFileCF.bsv             Locally Added               0 
 software-fpga-components.awb Locally Added               - 
 FpgaMemoryHasim.bsv       Locally Added               - 
 FAST_BRAM.v               Locally Added               - 
 hardware-fpga-components.awb Locally Added               - 
 Clock100MHz.bsv           Locally Added               - 
 FAST_BRAM.bsv             Locally Added               - 
 RegFileCF.c               Locally Added               0 
 software/                 Locally Removed           134 

Directory modules/bluespec/common/fpgaenv/fpga-components/software
 FpgaMemory.bsv            Locally Removed           134 
 software-fpga-components.awb Locally Removed           134 
 FpgaMemoryHasim.bsv       Locally Removed           134 

Directory modules/bluespec/common/fpgaenv/fpga-components
 hardware/                 Locally Removed           134 

Directory modules/bluespec/common/fpgaenv/fpga-components/hardware
 FpgaMemory.bsv            Locally Removed           134 
 Clock100MHz.v             Locally Removed           134 
 FpgaMemoryHasim.bsv       Locally Removed           134 
 FAST_BRAM.v               Locally Removed           134 
 hardware-fpga-components.awb Locally Removed           134 
 Clock100MHz.bsv           Locally Removed           134 
 Bram.v                    Locally Removed           134 
 FAST_BRAM.bsv             Locally Removed           134 

Directory .
 changes                   Locally Modified          134 

- move files from fpga-components/{hardware,software} into a single directory fpga-components, so that the awb files can share sources.
- Modifications to the FAST blockram, in an attempt to make software and hardware simulation as close to each other as possible.

----------
napatil     Date: Mon Jul 28 18:05:55 EDT 2008  CSN: CSN-platforms-136
                  Mon Jul 28 22:05:55 UTC 2008


Directory modules/bluespec/common/fpgaenv/fpga-components
 FpgaMemory.bsv            Locally Modified          135 
 software-fpga-components.awb Locally Modified          135 
 hardware-fpga-components.awb Locally Modified          135 
 Bram.v                    Locally Added               0 

DO NOT DELETE THIS LINE! ADD COMMENTS BELOW
reverting to blockram from csn-platforms-131

----------
aparasha    Date: Thu Jul 31 12:46:49 EDT 2008  CSN: CSN-platforms-137
                  Thu Jul 31 16:46:49 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 hybrid-fp.cpp             Locally Modified          136 
 hybrid-fp.rrr             Locally Modified          136 
 hybrid-fp.h               Locally Modified          136 
 hybrid-fp.bsv             Locally Modified          136 

Updated front panel to use client software stubs

----------
aparasha    Date: Fri Aug  1 13:42:05 EDT 2008  CSN: CSN-platforms-138
                  Fri Aug  1 17:42:05 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/little-32
 umf-little-32.cpp         Locally Modified          137 
 umf-little-32.h           Locally Modified          137 

added a software marshaller/demarshaller for UINT8

----------
nikhil      Date: Thu Aug  7 17:30:59 CDT 2008  CSN: CSN-platforms-139
                  Thu Aug  7 22:30:59 UTC 2008


Directory modules/bluespec/common/fpgaenv/fpga-components
 Clock100MHz.v             Locally Removed           138 
 software-fpga-components.awb Locally Modified          138 
 UserClock_50_100.v        Locally Added               0 
 hardware-fpga-components.awb Locally Modified          138 
 UserClock.bsv             Locally Added               0 
 Clock100MHz.bsv           Locally Removed           138 

mkUserClock(outFreq, inFreq) generates a clock with frequency outFreq
from a clock of frequency inFreq. Due to implementation reasons, only
certain combinations of <inFreq, outFreq> are legal:

1. out = in: The trivial case
2. out = in / 2: This instantiates a generic clock-divide-by-two circuit.
3. in = 50MHz, out = 100MHz: This instantiates a DCM on the FPGA.

fpga-components defines %param CRYSTAL_CLOCK_FREQ to be 50MHz.

----------
napatil     Date: Fri Aug  8 00:30:06 EDT 2008  CSN: CSN-platforms-140
                  Fri Aug  8 04:30:06 UTC 2008


Directory modules/bluespec/common/fpgaenv/fpga-components
 UserClock_50_100.v        Locally Modified          139 

Fixed bug in the verilog in UserClock_50_100.v (port declarations were missing), so it should synthesize now.

----------
aparasha    Date: Thu Aug 14 15:49:52 EDT 2008  CSN: CSN-platforms-141
                  Thu Aug 14 19:49:52 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-server.bsv      Locally Modified          140 
 arbiters.bsv              Locally Added               0 
 old-rrr-client.bsv        Locally Removed           140 
 basic-rrr-client.bsv      Locally Modified          140 
 basic-rrr-server.cpp      Locally Modified          140 
 basic-rrr.awb             Locally Modified          140 
 basic-rrr-server.h        Locally Modified          140 

Directory modules/bluespec/common/fpgaenv/virtual-platform/low-level-platform-interface
 llpi.h                    Locally Modified          140 
 llpi.bsv                  Locally Modified          140 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 hybrid-fp.cpp             Locally Modified          140 
 hybrid-fp.h               Locally Modified          140 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/streams
 hybrid-streams-services.rrr Locally Modified          140 
 hybrid-streams.h          Locally Modified          140 
 hybrid-streams.bsv        Locally Modified          140 
 hybrid-streams.cpp        Locally Modified          140 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/little-32
 umf-little-32.cpp         Locally Modified          140 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device-bdpi.c   Locally Modified          140 

- added support for auto-generated software server stubs (see HAsim commit #507).

- removed "old" RRR client from LLPI, and updated all services using this client to use
  new auto-generated infrastructure.

- moved the arbitration logic from basic-rrr-server.bsv and basic-rrr-client.bsv into
  a separate module in arbiters.bsv. Also added a preliminary round-robin priority
  arbiter that shuffles the priority every FPGA cycle. This implementation is somewhat
  naive and will not scale well.

- removed "EOF seen" message from unix-pipe-device-bdpi.c.

----------
aparasha    Date: Fri Aug 15 00:27:32 EDT 2008  CSN: CSN-platforms-142
                  Fri Aug 15 04:27:32 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/basic
 basic-channelio.awb       Locally Modified          141 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-server.cpp      Locally Modified          141 
 basic-rrr-server.h        Locally Modified          141 

removed some unnecessary legacy code.

----------
mpellaue    Date: Mon Aug 18 19:41:08 EDT 2008  CSN: CSN-platforms-143
                  Mon Aug 18 23:41:08 UTC 2008


Directory modules/bluespec/common/fpgaenv/fpga-components
 FpgaMemory.bsv            Locally Modified          142 
 software-fpga-components.awb Locally Modified          142 
 user-clock.bsv            Locally Added               0 
 hardware-fpga-components.awb Locally Modified          142 
 bram.bsv                  Locally Added               0 
 bram-multi-read.bsv       Locally Added               0 


* Updated BRAM interface to match HAsim's coding conventions.
* Replaced Wires with Counters in BRAM.

Michael P.

----------
mcadler     Date: Sun Aug 31 09:19:43 EDT 2008  CSN: CSN-platforms-144
                  Sun Aug 31 13:19:43 UTC 2008


Directory modules/bluespec/common/fpgaenv/fpga-components
 lutram.bsv                Locally Added               0 
 software-fpga-components.awb Locally Modified          143 
 hardware-fpga-components.awb Locally Modified          143 

Add a LUTRAM storage module to replace our use of RegFile to work around bugs
we encountered synthesizing RegFiles on Xilinx Virtex-5 using Xst.  The
interface is identical to RegFile.

What we know about the bug:
  - RegFiles with a 1 bit data type seem to work correctly.  All other data
    sizes are suspect.
  - Attemps to build a small test case that fails have, so far, been unsuccessful.
  - Multiple read ports in RegFile are not the problem.  I tried two experiments,
    both continued to fail:
    - Replace the single register array in RegFile with 5 separate arrays and
      assign one read port to each register.
    - Replace RegFile with a different Bluespec primitive:  DualRam.  DualRam
      has one read and one write port.  Changed all the scheduling hints in
      our code to force at most one read per cycle.  Still fails.

The solution:
  - The bad (just an experiment, not this check-in):
      First replaced all RegFiles with data sizes over one bit with Reg#(Vector#()).
      The resulting code was terrible with extremely long compilation times.
      Every update to the array wound up being a reference to every single element.
      This option does synthesize and run correctly on the FPGA.
  - The good (this check-in):
      Compose storage for data sizes over one bit from a set of RegFiles of
      one bit data.  Thus a 512 entry x 4 bit array becomes four 512 x 1 bit
      arrays.  This works quite well.  The generated code is nearly as good
      as the original and space used on the FPGA is virtually identical to the
      512 x 4 case.  It also works.  NOTE:  When compiling for simulation LUTRAM
      DOES NOT decompose large data into multiple arrays.  This simplifies
      debugging using waveform viewers and makes compilation and simulation
      slightly faster.  The timing should be identical.

----------
aparasha    Date: Mon Sep 22 14:28:47 EDT 2008  CSN: CSN-platforms-145
                  Mon Sep 22 18:28:47 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-memory-sw.cpp      Locally Removed           144 
 hybrid-memory.awb         Locally Added               - 
 hybrid-memory.bsv         Locally Added               - 
 hybrid-memory-sw.h        Locally Removed           144 
 memory_virtual_device_datatypes.bsv Locally Removed           144 
 memory_virtual_device_hybrid.awb Locally Removed           144 
 memory_virtual_device_hybrid.bsv Locally Removed           144 
 hybrid-memory.cpp         Locally Added               - 
 hybrid-memory.rrr         Locally Added               - 
 hybrid-memory-services.rrr Locally Removed           144 
 hybrid-memory-datatypes.bsv Locally Added               - 
 hybrid-memory.h           Locally Added               - 

updated scratchpad memory device to use new RRR infrastructure
(it was still using the antiquated RRR hand-marshalled client)

----------
aparasha    Date: Thu Oct 23 14:55:15 EDT 2008  CSN: CSN-platforms-146
                  Thu Oct 23 18:55:15 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-memory.cpp         Locally Modified          145 

fixed a typo in scratchpad memory

----------
mcadler     Date: Wed Nov  5 11:18:45 EST 2008  CSN: CSN-platforms-147
                  Wed Nov  5 16:18:45 UTC 2008


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-htg-hwonly.apm    Locally Modified          146 
 hasim-fpgaenv-hybrid-sim.apm Locally Modified          146 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          146 
 hasim-fpgaenv-null.apm    Locally Modified          146 
 hasim-fpgaenv-xup.apm     Locally Modified          146 

Directory modules/bluespec/common/fpgaenv/fpga-components
 alu-support.bsv           Locally Added               0 
 software-fpga-components.awb Locally Modified          146 
 hardware-fpga-components.awb Locally Modified          146 

- Add ALU support module to FPGA environment.  Currently it has a Xilinx
  pipelined integer multiplier.
- Enable scratchpad memory
- Clean up some broken links in less-frequently used fpgaenv apm files.

----------
aparasha    Date: Thu Nov  6 13:06:49 EST 2008  CSN: CSN-platforms-148
                  Thu Nov  6 18:06:49 UTC 2008


Directory modules/bluespec/common/fpgaenv/fpga-components
 UserClock_50_100.v        Locally Modified          147 

Directory modules/bluespec/common/fpgaenv/virtual-platform/low-level-platform-interface
 llpi.bsv                  Locally Modified          147 

Directory modules/bluespec/common/fpgaenv/physical-platform/simulation
 sim-physical-platform.bsv Locally Modified          147 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup
 xup-physical-platform.bsv Locally Modified          147 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-disabled
 htg-v5-pcie-disabled.bsv  Locally Modified          147 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.bsv   Locally Modified          147 

Directory modules/bluespec/common/fpgaenv/physical-platform/null
 null-physical-platfrom.bsv Locally Modified          147 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/leds
 general-led-device.bsv    Locally Modified          147 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/switches
 general-switch-device.bsv Locally Modified          147 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/buttons
 general-button-device.bsv Locally Modified          147 

- fixed a bug in the 50-to-100 DCM Verilog module
- added synchronizers to physical devices to make them work properly
  with multiplied clocks

----------
mcadler     Date: Thu Nov  6 16:42:04 EST 2008  CSN: CSN-platforms-149
                  Thu Nov  6 21:42:04 UTC 2008


Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 xilinx.xst                Locally Modified          148 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/leds
 general-led-device.bsv    Locally Modified          148 

- Add register_balancing to Xst.  Gives much better timing results.
- Fix clock synchronization in LEDs to eliminate timing violations.

----------
mcadler     Date: Mon Nov 10 12:34:06 EST 2008  CSN: CSN-platforms-150
                  Mon Nov 10 17:34:06 UTC 2008


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device-bdpi.c   Locally Modified          148 
 unix-pipe-device.cpp      Locally Modified          148 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/basic
 basic-channelio.cpp       Locally Modified          148 
 basic-channelio.h         Locally Modified          148 

- Fix a race in channel I/O:  on a multi-core machine the polling loop was able
  to overwhelm the read and write methods, holding the channel lock permanently.
  Added code to skip polling when a read or write is pending.  This was one of
  the two causes of simulations hanging.
- Add more checks to Unix pipe to confirm that dup2() calls work.

----------
mcadler     Date: Fri Nov 14 00:13:32 EST 2008  CSN: CSN-platforms-151
                  Fri Nov 14 05:13:32 UTC 2008


Directory modules/bluespec/common/fpgaenv/fpga-components
 UserClock_50_100.v        Locally Removed           150 
 UserClock.bsv             Locally Removed           150 
 user-clock-xilinx.v       Locally Added               - 
 user-clock.bsv            Locally Modified          150 
 hardware-fpga-components.awb Locally Modified          150 
 bram.bsv                  Locally Modified          150 
 bram-multi-read.bsv       Locally Modified          150 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 xilinx.xst                Locally Modified          150 

- Add a few useful options to XST script
- Configurable model clock speed as a function of board crystal.  Model
  provides a rational multiplier and divisor that are applied to the base
  clock speed.
- Clock code has a few special cases:
  - 1/1: Just use crystal
  - 1/2: Bluespec provides a 0.5x clock module
  - 2/1: Xilinx has a special-case in-phase clock doubler
- Remove check of "initializing" predicate for BRAM read response.  Predicate
  must be true for read request to fire.

----------
mcadler     Date: Thu Nov 27 00:02:51 EST 2008  CSN: CSN-platforms-152
                  Thu Nov 27 05:02:51 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-csr
 pcie-physical-channel.bsv Locally Modified          151 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.ucf   Locally Modified          151 

- New compiler detected uninitialized variable in PCIe channel
- Verilog names of switches and LEDs changed with latest compiler.  This
  UCF file now works only with Bluespec 2008.11.C and later.

----------
mcadler     Date: Fri Dec  5 07:42:04 EST 2008  CSN: CSN-platforms-153
                  Fri Dec  5 12:42:04 UTC 2008


Directory modules/bluespec/common/fpgaenv/fpga-components
 alu-support.bsv           Locally Modified          152 
 bram.bsv                  Locally Modified          152 

- New Bluespec compiler sees read/write dependence among rules and prevents
  critical rules from firing in parallel in the pipelined multiplier.  Replaced
  with wires and annotated rules to cause errors when the design won't work.

- Make response from BRAM single cycle.  Used to take a second cycle due to
  output FIFO and because the counter we were using didn't support calls to
  up and down in the same cycle.  Replaced counter with parallel version.
  Replaced outgoing FIFO with a BypassFIFO.

----------
mcadler     Date: Mon Dec 22 14:31:59 EST 2008  CSN: CSN-platforms-154
                  Mon Dec 22 19:31:59 UTC 2008


Directory modules/bluespec/common/fpgaenv/fpga-components
 user-clock.bsv            Locally Modified          153 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-server.bsv      Locally Modified          153 
 arbiters.bsv              Locally Modified          153 
 basic-rrr-client.bsv      Locally Modified          153 

- Clock generator always uses mkUserClock_Same for Bluesim builds.  This allows
  us to set clock ratios other than 1:1 as the default, affecting FPGA builds
  and not Bluesim.

- Change the arbiters to return the index of the entry that wins arbitration as
  a Maybe#(UInt) instead of a bit vector with at most one bit set.  Clients of
  arbiters can then use a single rule to handle the winning entry instead of a
  set of statically elaborated rules.  The result should be identical hardware
  while eliminating compiler warning messages about conflicting rules.

----------
mcadler     Date: Wed Dec 24 08:01:46 EST 2008  CSN: CSN-platforms-155
                  Wed Dec 24 13:01:46 UTC 2008


Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-server.bsv      Locally Modified          154 
 arbiters.bsv              Locally Modified          154 
 basic-rrr-client.bsv      Locally Modified          154 

The round robin arbiter had a lot of logic depth that was slow to compile in
Bluespec and generated difficult place & route problems.  After some
experimenting, found an implementation that compiles quickly and, I think,
is equivalent.

This code has a chain through all arbitrated bits.  We'll have to switch to
a tree if the arbitration set grows too large.

----------
mcadler     Date: Tue Dec 30 09:55:32 EST 2008  CSN: CSN-platforms-156
                  Tue Dec 30 14:55:32 UTC 2008


Directory modules/bluespec/common/fpgaenv/fpga-components
 software-fpga-components.awb Locally Modified          155 
 hardware-fpga-components.awb Locally Modified          155 

Directory modules/bluespec/common/fpgaenv
 fpga-environment.awb      Locally Modified          155 

- Move FPGA clock frequency parameters from model top level down to FPGA
  components.  The definition makes more sense here, especially when we support
  multiple kinds of FPGAs.
- Add Xilinx cost table specifier, though it isn't clear that a specific cost
  table is useful as the model changes.  The cost table becomes important as
  a design approaches the capacity of an FPGA.

----------
aparasha    Date: Fri Jan  9 19:01:33 EST 2009  CSN: CSN-platforms-157
                  Sat Jan 10 00:01:33 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-htg-hwonly.apm    Locally Modified          156 
 hasim-fpgaenv-hybrid-sim.apm Locally Modified          156 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          156 
 hasim-fpgaenv-null.apm    Locally Modified          156 
 hasim-fpgaenv-xup.apm     Locally Modified          156 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/basic
 basic-channelio.bsv       Locally Modified          156 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel
 pcie-debugger/            Locally Removed           156 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-debugger
 pcie-debugger.cpp         Locally Removed           156 
 pcie-debugger.h           Locally Removed           156 
 pcie-debugger.awb         Locally Removed           156 
 pcie-debugger.bsv         Locally Removed           156 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-csr
 pcie-physical-channel.cpp Locally Modified          156 
 pcie-physical-channel.h   Locally Modified          156 
 pcie-physical-channel.awb Locally Modified          156 
 pcie-physical-channel.bsv Locally Modified          156 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/sim
 sim-physical-channel.bsv  Locally Modified          156 
 sim-physical-channel.cpp  Locally Modified          156 
 sim-physical-channel.h    Locally Modified          156 

Directory modules/bluespec/common/fpgaenv/virtual-platform/low-level-platform-interface
 llpi.cpp                  Locally Modified          156 
 hwonly-llpi.awb           Locally Modified          156 
 llpi.h                    Locally Modified          156 
 hybrid-llpi.awb           Locally Modified          156 
 llpi.bsv                  Locally Modified          156 

Directory modules/bluespec/common/fpgaenv/physical-platform
 debuggers/                Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/debuggers
 htg-virtex5/              Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/debuggers/htg-virtex5
 htg-debugger.cpp          Locally Added               0 
 htg-debugger.h            Locally Added               0 
 htg-debugger.awb          Locally Added               0 
 htg-debugger.bsv          Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/debuggers
 null/                     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/debuggers/null
 null-debugger.h           Locally Added               0 
 null-debugger.awb         Locally Added               0 
 null-debugger.bsv         Locally Added               0 
 null-debugger.cpp         Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.cpp   Locally Modified          156 
 htg-v5-pcie-enabled.h     Locally Modified          156 
 htg-v5-pcie-enabled.bsv   Locally Modified          156 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express
 pci-express-device.bsv    Locally Modified          156 
 pci-express-vhdl-import.bsv Locally Modified          156 


- implemented a low-level HTG v5 PCIe Platform Debugger.

- implemented a low-level Null Debugger (can also be used with HTG fpgaenv).

- restructured Platforms hierarchy to include platform debugger.
  LLPI now first instantiates the physical platform, then instantiates
  the debugger and passes the physical drivers into the debugger. The
  debugger returns a set of gated physical drivers, which LLPI passes
  to the remainder of the layers, and exposes to upper layers.

- set Null Debugger as default for all fpgaenv submodules.

- removed obsolete "Physical Channel Debugger".

----------
mcadler     Date: Tue Jan 20 21:44:56 EST 2009  CSN: CSN-platforms-158
                  Wed Jan 21 02:44:56 UTC 2009


Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-server.bsv      Locally Modified          157 
 basic-rrr-client.bsv      Locally Modified          157 

Split rules to simplify Bluespec scheduling predicates.

----------
aparasha    Date: Wed Jan 28 19:16:10 EST 2009  CSN: CSN-platforms-159
                  Thu Jan 29 00:16:10 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          158 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/basic
 basic-channelio.cpp       Locally Modified          158 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-client.cpp      Locally Modified          158 
 basic-rrr-server.cpp      Locally Modified          158 

Directory modules/bluespec/common/fpgaenv/virtual-platform/low-level-platform-interface
 llpi.cpp                  Locally Modified          158 
 llpi.h                    Locally Modified          158 

Directory modules/bluespec/common/fpgaenv/physical-platform/debuggers/htg-virtex5
 htg-debugger.cpp          Locally Modified          158 
 htg-debugger.h            Locally Modified          158 

Directory modules/bluespec/common/fpgaenv/physical-platform/debuggers/null
 null-debugger.bsv         Locally Modified          158 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express
 pci-express-c-import-mmap.h Locally Modified          158 

- Modified C++ instantiation order of LLPI layers so that debugger gets
  instantiated after the physical devices but before any of the other
  layers.

- Added Copyright headers to some files.

----------
mcadler     Date: Wed Jan 28 20:27:31 EST 2009  CSN: CSN-platforms-160
                  Thu Jan 29 01:27:31 UTC 2009


Directory modules/bluespec/common/fpgaenv/fpga-components
 bram-multi-read.bsv       Locally Modified          159 

Define a new category of multi-read-port BRAM that has multiple virtual ports
instead of multiple physical ports.  mkBRAMPseudoMultiRead() builds the
specified number of read port interfaces but only allocates a single BRAM.
Read requests are multiplexed through the single BRAM and responses are routed
back to the proper interface.

----------
aparasha    Date: Wed Jan 28 22:00:25 EST 2009  CSN: CSN-platforms-161
                  Thu Jan 29 03:00:25 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/debuggers/htg-virtex5
 htg-debugger.cpp          Locally Modified          160 
 htg-debugger.bsv          Locally Modified          160 

Debugged a bug in the debugger.

----------
aparasha    Date: Wed Jan 28 22:36:38 EST 2009  CSN: CSN-platforms-162
                  Thu Jan 29 03:36:38 UTC 2009


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel
 pcie-dma/                 Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-dma
 dma-physical-channel.cpp  Locally Added               0 
 dma-physical-channel.h    Locally Added               0 
 dma-physical-channel.awb  Locally Added               0 
 dma-physical-channel.bsv  Locally Added               0 

Added a DMA-based Physical Channel. It is currently non-functional due to
the abscence of physical platform hooks it needs to work. Please do not
attempt to use this module yet.

----------
aparasha    Date: Thu Jan 29 11:07:38 EST 2009  CSN: CSN-platforms-163
                  Thu Jan 29 16:07:38 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/debuggers/htg-virtex5
 htg-debugger.bsv          Locally Modified          162 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express
 pci-express-device.bsv    Locally Modified          162 
 pci-express-device-mmap.awb Locally Modified          162 
 pci-express-c-import-mmap.cpp Locally Modified          162 
 pci-express-c-import-mmap.h Locally Modified          162 

- Added Bluespec wrappers and synchronizers around the VHDL DMA controller.
- Added pass-through DMA interface to HTG debugger.

----------
aparasha    Date: Tue Feb  3 16:39:28 EST 2009  CSN: CSN-platforms-164
                  Tue Feb  3 21:39:28 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/debuggers/htg-virtex5
 htg-debugger.cpp          Locally Modified          163 
 htg-debugger.bsv          Locally Modified          163 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 pci-express-new/          Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-new
 f2h_data_fifo.ngc         Locally Added               0 
 h2f_data_fifo.ngc         Locally Added               0 
 pcieblkplus.ngc           Locally Added               0 
 pci-express-device.bsv    Locally Added               0 
 csr_fpga_ctrl.vhd         Locally Added               0 
 csr_host_ctrl.vhd         Locally Added               0 
 csr_ctrl.vhd              Locally Added               0 
 rst_controller.vhd        Locally Added               0 
 pci-express-vhdl-import.bsv Locally Added               0 
 CSR_BRAM.ngc              Locally Added               0 
 pci-express-device-mmap.awb Locally Added               0 
 intr_controller.vhd       Locally Added               0 
 pci-express-c-import-mmap.cpp Locally Added               0 
 pcie_bar0.vhd             Locally Added               0 
 dma_ctrl.vhd              Locally Added               0 
 pci-express-c-import-mmap.h Locally Added               0 
 pcie_rx_wrapper.vhd       Locally Added               0 
 channel_top.vhd           Locally Added               0 
 pcie_tx_wrapper.vhd       Locally Added               0 
 channel_ctrl.vhd          Locally Added               0 

- added a sequential burst write instruction to the debugger
- added a new PCI express device based on the latest code from CBL. This
  device has DMA support but is currently unusable because the CSR support
  is broken. The code is therefore being added as an alternate module until
  debugging is complete.

----------
mcadler     Date: Mon Feb  9 11:13:29 EST 2009  CSN: CSN-platforms-165
                  Mon Feb  9 16:13:29 UTC 2009


Directory modules/bluespec/common/fpgaenv/fpga-components
 lutram.bsv                Locally Modified          164 

Make the code a bit ugly but remove the need for PrimIndex, Eq and Arith
provisos that then work their way up the chain.

----------
mcadler     Date: Fri Feb 13 08:30:50 EST 2009  CSN: CSN-platforms-166
                  Fri Feb 13 13:30:50 UTC 2009


Directory modules/bluespec/common/fpgaenv/fpga-components
 lutram.bsv                Locally Modified          165 

Use RegFile with no conflict between sub and upd.  sub always returns the
value as of the beginning of the cycle.

----------
mcadler     Date: Mon Feb 16 11:41:06 EST 2009  CSN: CSN-platforms-167
                  Mon Feb 16 16:41:06 UTC 2009


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-csr
 pcie-physical-channel.bsv Locally Modified          166 

process_inst and do_channel_init are mutually exclusive but the source left
the Bluespec compiler with the decision of which gets priority.  If it picked
process_inst the channel was never initialized and the Xilinx tools optimized
away the design.  Changed predicate on process_inst to define the FSM
explicitly.

----------
aparasha    Date: Wed Feb 25 02:40:11 EST 2009  CSN: CSN-platforms-168
                  Wed Feb 25 07:40:11 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-htg-hwonly.apm    Locally Modified          167 
 hasim-fpgaenv-hybrid-sim.apm Locally Modified          167 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          167 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/basic
 basic-channelio.bsv       Locally Modified          167 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory
 local/                    Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/local
 local-memory-datatypes.bsv Locally Added               0 
 local-memory.awb          Locally Added               0 
 local-memory.bsv          Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-disabled
 htg-v5-pcie-disabled.awb  Locally Modified          167 
 htg-v5-pcie-disabled.bsv  Locally Modified          167 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.awb   Locally Modified          167 
 htg-v5-pcie-enabled.bsv   Locally Modified          167 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 ddr2-sdram/               Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr2-sdram
 ddr2_phy_io.vhd           Locally Added               0 
 ddr2_phy_ctl_io.vhd       Locally Added               0 
 ddr2-sdram-device.bsv     Locally Added               0 
 ddr2_phy_calib.vhd        Locally Added               0 
 pll-50-to-125-200.bsv     Locally Added               0 
 ddr2_usr_top.vhd          Locally Added               0 
 ddr2_idelay_ctrl.vhd      Locally Added               0 
 ddr2_usr_rd.vhd           Locally Added               0 
 ddr2-sdram-vhdl-import.bsv Locally Added               0 
 ddr2_phy_dqs_iob.vhd      Locally Added               0 
 ddr2_sdram.ucf            Locally Added               0 
 ddr2_top.vhd              Locally Added               0 
 ddr2_ctrl.vhd             Locally Added               0 
 ddr2_sdram.vhd            Locally Added               0 
 ddr2_usr_addr_fifo.vhd    Locally Added               0 
 pll-50-to-125-200.v       Locally Added               0 
 ddr2_phy_dm_iob.vhd       Locally Added               0 
 ddr2-sdram-device.awb     Locally Added               0 
 ddr2_phy_write.vhd        Locally Added               0 
 ddr2-sdram-sync-tig.ucf   Locally Added               0 
 ddr2_phy_dq_iob.vhd       Locally Added               0 
 ddr2_chipscope.vhd        Locally Added               0 
 ddr2_mem_if_top.vhd       Locally Added               0 
 ddr2_infrastructure.vhd   Locally Added               0 
 ddr2_usr_wr.vhd           Locally Added               0 
 ddr2_phy_top.vhd          Locally Added               0 
 ddr2_phy_init.vhd         Locally Added               0 

- Added a memory controller for the Elpida SO-DIMM DDR2 memory module on the
  HiTech Global PCI Express board. The memory controller was generated by
  Xilinx's MIG tool v2.3, and is wrapped in Bluespec in the form of an AWB
  Physical Device. The controller is currently clocked at 125MHz (soon to be
  upgraded to 150MHz), and uses an auxiliary 200MHz clock for its I/O Buffers.
  Both clocks are generated from an assumed 50MHz crystal clock using a PLL.
  This will be made more generic in future, but for now the controller will
  only work with a 50MHz crystal clock.

  Please do not modify the parameters in the AWB spec file for the module. The
  parameters have been placed in the spec only to make them visible in other
  modules. The entire controller has been generated for specific widths and
  timing constraints. Some of these are parameterizable and could be exposed
  in the AWB spec in future.

  The Xilinx tools sometimes try to pack two unrelated signals into the same
  LUT and then complain to the user that it should not be doing this. There is
  a section at the end of the ddr2_sdram.ucf file under the heading "Bugfixes"
  which deals with these issues. If you see any error messages from map stating
  that it cannot place any two "function generators" into the same LUT, try
  adding those names into the UCF file to see if the problem goes away. Usually
  these errors have been occurring on signals tied to or close to FPGA pins,
  so they do not get optimized away even if the controller is not used.

- Updated the HTG Platforms to include the DDR2 Physical Device.

- Added a new Scratchpad Memory Virtual Device implementation called Local
  Memory that uses the DDR2 physical device as its storage. This is a very
  simple implementation intended to provide basic access to the DDR2 module
  from the model. Performance is probably not going to be good. It has a
  single 256-bit Read Buffer which accomodates one DDR2 burst. Writes are
  write-through no-allocate.

- Updated the HTG fpgaenvs to use the new DDR2 Physical Device and the Local
  Scratchpad memory.

----------
aparasha    Date: Wed Feb 25 11:30:02 EST 2009  CSN: CSN-platforms-169
                  Wed Feb 25 16:30:02 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr2-sdram
 ddr2-pll.v                Locally Added               0 
 ddr2-sdram-device.bsv     Locally Modified          168 
 pll-50-to-125-200.bsv     Locally Removed           168 
 ddr2-sdram-vhdl-import.bsv Locally Modified          168 
 ddr2_sdram.ucf            Locally Modified          168 
 ddr2_sdram.vhd            Locally Modified          168 
 pll-50-to-125-200.v       Locally Removed           168 
 ddr2-sdram-device.awb     Locally Modified          168 
 ddr2-pll.bsv              Locally Added               0 
 ddr2_phy_top.vhd          Locally Modified          168 

- upgraded DDR2 memory controller speed to 150MHz.
- significantly reduced the size of a Bluespec register in the DDR2 device.

----------
mcadler     Date: Wed Mar  4 15:41:56 EST 2009  CSN: CSN-platforms-170
                  Wed Mar  4 20:41:56 UTC 2009


Directory modules/bluespec/common/fpgaenv/fpga-components
 Bram.v                    Locally Modified          169 

Directory drivers/linux/Xilinx_Platform_Cable
 README                    Locally Modified          169 

Directory drivers/linux/Xilinx_Platform_Cable/fxload
 fxload.8                  Locally Modified          169 
 main.c                    Locally Modified          169 
 ezusb.c                   Locally Modified          169 
 README.txt                Locally Modified          169 
 ezusb.h                   Locally Modified          169 

- Add a pragma forcing BRAM to be stored in block RAM instead of allowing Xst to
  put storage in LUTs.  We have block RAM and are out of LUTs.

- Update Xilinx platform cable setup instructions describing how to use libusb.

- Update fxload (USB device firmware loader).

----------
mcadler     Date: Wed Mar  4 22:27:32 EST 2009  CSN: CSN-platforms-171
                  Thu Mar  5 03:27:32 UTC 2009


Directory modules/bluespec/common/fpgaenv/fpga-components
 bram.bsv                  Locally Modified          169 

Directory modules/bluespec/common/fpgaenv
 fpga-environment.awb      Locally Modified          169 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr.awb             Locally Modified          169 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/streams
 hybrid-streams.awb        Locally Modified          169 
 simulation-streams.awb    Locally Modified          169 

Directory modules/bluespec/libfpga
 cache/                    Locally Added               0 

Directory modules/bluespec/libfpga/cache
 fpga-set-assoc-cache.bsv  Locally Added               0 
 fpga-tiny-cache.bsv       Locally Added               0 
 libfpga-cache.awb         Locally Added               0 

Directory modules/bluespec/libfpga
 libfpga-bsv.awb           Locally Added               0 
 libfpga-bsv.bsh           Locally Added               0 
 base/                     Locally Added               0 

Directory modules/bluespec/libfpga/base
 fifos.bsv                 Locally Added               0 
 alias_def.bsv             Locally Added               0 
 bluespec-common.prj       Locally Added               0 
 counting-filter.bsv       Locally Added               0 
 extends.bsv               Locally Added               0 
 fpga-fifos.bsv            Locally Added               0 
 counters.bsv              Locally Added               0 
 hash-bits.bsv             Locally Added               0 
 memory-heap.bsv           Locally Added               0 
 libfpga-bsv-base.awb      Locally Added               0 
 debug-file.bsv            Locally Added               0 

Directory modules/bluespec
 libfpga/                  Locally Added               0 

Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-hybrid-sim.apm Locally Modified          169 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          169 
 libfpga-bsv.apm           Locally Added               0 
 hasim-fpgaenv-null.apm    Locally Modified          169 
 hasim-fpgaenv-xup.apm     Locally Modified          169 

Move core modules here from the hasim repository to separate core modules
(libfpga) from HAsim-specific code.  This will allow us to use the core
modules in the platform.

----------
mcadler     Date: Thu Mar  5 19:55:41 EST 2009  CSN: CSN-platforms-172
                  Fri Mar  6 00:55:41 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 libfpga-bsv.apm           Locally Modified          171 

Directory modules/bluespec/libfpga
 cache/                    Locally Removed           171 

Directory modules/bluespec/libfpga/cache
 fpga-set-assoc-cache.bsv  Locally Removed           171 
 fpga-tiny-cache.bsv       Locally Removed           171 
 libfpga-cache.awb         Locally Removed           171 

Directory modules/bluespec/libfpga
 libfpga-bsv.awb           Locally Modified          171 
 storage/                  Locally Added               0 

Directory modules/bluespec/libfpga/storage
 fifos.bsv                 Locally Added               - 
 libfpga-bsv-storage.awb   Locally Added               0 
 fpga-fifos.bsv            Locally Added               - 
 memory-heap.bsv           Locally Added               - 

Directory modules/bluespec/libfpga
 libfpga-bsv.bsh           Locally Modified          171 

Directory modules/bluespec/libfpga/base
 fifos.bsv                 Locally Removed           171 
 fpga-fifos.bsv            Locally Removed           171 
 memory-heap.bsv           Locally Removed           171 
 libfpga-bsv-base.awb      Locally Modified          171 
 README                    Locally Added               0 

Directory modules/bluespec/common/fpgaenv/fpga-components
 alu-support.bsv           Locally Modified          171 
 bram.bsv                  Locally Modified          171 

Separate libfpga base into two parts:  one that depends on nothing but Bluespec
core libraries and another that may depend on other platform modules.  The
base modules can be included anywhere in platforms.

Added a "storage" libfpga category that includes storage management including
heaps, fifos and cache managers.

----------
mcadler     Date: Tue Mar 10 22:52:02 EDT 2009  CSN: CSN-platforms-173
                  Wed Mar 11 02:52:02 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-xup.apm     Locally Modified          171 
 hasim-fpgaenv-hybrid-sim.apm Locally Modified          171 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          171 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/local
 local-mem-scratch-words.awb Locally Added               0 
 local-mem-scratch-words.bsv Locally Added               0 
 local-memory-datatypes.bsv Locally Removed           171 
 local-memory.awb          Locally Removed           171 
 local-memory.bsv          Locally Removed           171 
 local-mem-scratch-lines.awb Locally Added               0 
 local-mem-scratch-lines.bsv Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform
 low-level-platform-interface/ Locally Removed           171 

Directory modules/bluespec/common/fpgaenv/virtual-platform/low-level-platform-interface
 platforms-module.h        Locally Removed           171 
 llpi.cpp                  Locally Removed           171 
 hwonly-llpi.awb           Locally Removed           171 
 llpi.h                    Locally Removed           171 
 hybrid-llpi.awb           Locally Removed           171 
 llpi.bsv                  Locally Removed           171 
 platforms-module.cpp      Locally Removed           171 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr2-sdram
 ddr2-sdram-device.bsv     Locally Modified          171 
 ddr2-sdram-device.awb     Locally Modified          171 
 ddr2-sdram-sync-tig.ucf   Locally Modified          171 

Directory modules/bluespec/common/fpgaenv/low-level-platform-interface
 local-mem/                Locally Added               0 

Directory modules/bluespec/common/fpgaenv/low-level-platform-interface/local-mem
 local-mem-null.awb        Locally Added               0 
 local-mem-ddr2.awb        Locally Added               0 
 local-mem-null.bsv        Locally Added               0 
 local-mem-ddr2.bsv        Locally Added               0 
 local-mem-interface.bsv   Locally Added               0 
 local-mem-bram.awb        Locally Added               0 
 local-mem-bram.bsv        Locally Added               0 

Rearrange scratchpad memory and the connection to local memory.  From the
bottom, up:

- DDR2 device parameters are now mostly Bluespec typedefs instead of AWB
  parameters, since they are constants.
- Add predicates controlling read rate in DDR2 driver so it is impossible
  to overrun buffers.

- Add "local_mem" to the low level platform interface.  Local memory exports
  storage as fixed sized words.  The words are grouped into lines.  Methods
  are provided for reading and writing both words and full lines.
- Added three flavors of local memory:  NULL, BRAM and DDR2.
- The DDR2 version sends requests down to the driver.
- The BRAM version has a configurable latency so that the BRAM local memory
  can be used for Bluesim builds to behave more like DDR2.

- Scratchpad implementation is temporary.  For now I added two new versions
  that export either word or line sized exclusive access to local memory.
  This code is just temporary for testing.

----------
mcadler     Date: Tue Mar 10 23:26:41 EDT 2009  CSN: CSN-platforms-174
                  Wed Mar 11 03:26:41 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-htg-hwonly.apm    Locally Modified          173 
 hasim-fpgaenv-null.apm    Locally Modified          173 

Fix low level platform definitions for untested submodels.

----------
mcadler     Date: Wed Mar 11 17:57:35 EDT 2009  CSN: CSN-platforms-175
                  Wed Mar 11 21:57:35 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-htg-hwonly.apm    Locally Modified          174 
 hasim-fpgaenv-hybrid-sim.apm Locally Modified          174 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          174 
 hasim-fpgaenv-null.apm    Locally Modified          174 
 hasim-fpgaenv-xup.apm     Locally Modified          174 

Directory modules/bluespec/libfpga/base
 memory-interface.bsv      Locally Added               0 
 libfpga-bsv-base.awb      Locally Modified          174 

Directory modules/bluespec/common/fpgaenv/fpga-components
 bram.bsv                  Locally Modified          174 
 bram-multi-read.bsv       Locally Modified          174 

Directory modules/bluespec/common/fpgaenv/low-level-platform-interface/local-mem
 local-mem-bram.bsv        Locally Modified          174 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 std-virtual-devices.awb   Locally Modified          174 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory
 simulation/               Locally Removed           174 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/simulation
 virtual_device_memory_datatypes.bsv Locally Removed           174 
 virtual_device_memory_simulation.awb Locally Removed           174 
 virtual_device_memory_simulation.bsv Locally Removed           174 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory
 null/                     Locally Removed           174 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/null
 memory_virtual_device_null.awb Locally Removed           174 
 memory_virtual_device_null.bsv Locally Removed           174 
 memory_virtual_device_datatypes.bsv Locally Removed           174 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/local
 local-mem-scratch-words.awb Locally Removed           174 
 local-mem-scratch-words.bsv Locally Removed           174 
 local-mem-scratch.awb     Locally Added               - 
 local-mem-scratch.bsv     Locally Added               - 
 local-mem-scratch-lines.awb Locally Removed           174 
 local-mem-scratch-lines.bsv Locally Removed           174 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory
 template/                 Locally Removed           174 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/template
 memory_virtual_device_template.awb Locally Removed           174 
 memory_virtual_device_template.bsv Locally Removed           174 
 memory_virtual_device_datatypes.bsv Locally Removed           174 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 std-virtual-devices.dic   Locally Added               0 

- Add an abtract memory interface (MEMORY_IFC) to libfpga for multi-cycle
  storage.  Change BRAM to use this interface and make scratchpad use the
  same code.  The goal is to be object oriented and let us drop in different
  backing storage for an object without changing the rest of the code.
- Export multiple ports to scratchpad local memory using dictionaries (VDEV.SCRATCH)
- Merge line and word local scratchpad memories into a single file using
  awb parameters.
- Remove old attempts at scratchpad memory.

----------
mcadler     Date: Tue Mar 17 22:00:49 EDT 2009  CSN: CSN-platforms-176
                  Wed Mar 18 02:00:49 UTC 2009


Directory modules/bluespec/libfpga/base
 libfpga-bsv-base.awb      Locally Modified          175 
 memory-pack.bsv           Locally Added               0 

Directory modules/bluespec/common/fpgaenv/low-level-platform-interface/local-mem
 local-mem-ddr2.bsv        Locally Modified          175 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-csr
 pcie-physical-channel.cpp Locally Modified          175 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/local
 local-mem-scratch.bsv     Locally Modified          175 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr2-sdram
 ddr2-sdram-device.bsv     Locally Modified          175 
 ddr2-sdram-sync-tig.ucf   Locally Modified          175 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express
 pci-express-c-import-mmap.cpp Locally Modified          175 

- Add MEM_PACK_IFC and methods for packing arrays of arbitrary sized objects
  in fixed-size containers.  The package is useful for turning a scratchpad,
  which is an array of fixed size objects, into an array of any type.  Objects
  are packed in bit ranges that are a power of 2 to simplify addressing.

- Support multiple scratchpad regions in the local memory scratchpad by
  allocating segments based on sizes reported by clients during run-time
  initialization.

- Fix synchronization bugs in the Bluespec DDR2 device code.  It appears
  there is no guarantee Sync FIFOs will be read in the first cycle in which
  they appear to be data ready.  This caused lost data on writes to memory.

- Adjust the pipelining in the local memory DDR2 low level platform interface
  so the read and write pipelines are the same depth.

- The PCIe interface seems to hang some fraction of the time during start-up.
  Changed the start-up loop to retry by raising the reset signal until a
  response is heard.

----------
mcadler     Date: Wed Mar 18 20:31:48 EDT 2009  CSN: CSN-platforms-177
                  Thu Mar 19 00:31:48 UTC 2009


Directory modules/bluespec/libfpga/storage
 memory-heap.bsv           Locally Modified          176 

Directory modules/bluespec/libfpga/base
 fifo-merge.bsv            Locally Added               0 
 libfpga-bsv-base.awb      Locally Modified          176 
 memory-pack.bsv           Locally Modified          176 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/local
 local-mem-scratch.bsv     Locally Modified          176 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr2-sdram
 ddr2-sdram-device.bsv     Locally Modified          176 

- Add MERGE_FIFOF interface, mkMergeFIFOF and mkMergeBypassFIFOF.  These
  provide N input ports that look like the input side of a FIFOF and output
  methods that look like the output side of a FIFO.  Priority is regulated
  first temporally and then lowest number port to highest number port when
  messages arrive in the same FPGA cycle.

- Add a pseudo-multi-read port version of packed memory (MEM_PACK_MULTI_READ).

- Govern DDR2 requests with a merge FIFO to keep reads and writes ordered.

- Restructure free list manager in heap manager to make the Bluespec scheduler
  happier.

----------
mcadler     Date: Fri Mar 20 15:21:04 EDT 2009  CSN: CSN-platforms-178
                  Fri Mar 20 19:21:04 UTC 2009


Directory modules/bluespec
 libfpga/                  Locally Removed           176 

Directory config/pm/hasim/submodels/fpgaenv
 libfpga-bsv.apm           Locally Modified          176 

First step of renaming libfpga to librl.

----------
mcadler     Date: Fri Mar 20 17:31:17 EDT 2009  CSN: CSN-platforms-179
                  Fri Mar 20 21:31:17 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-xup.apm     Locally Modified          177 
 fpgaenv-htg-hwonly.apm    Locally Modified          177 
 hasim-fpgaenv-hybrid-sim.apm Locally Modified          177 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          177 
 libfpga-bsv.apm           Locally Removed           178 
 librl-bsv.apm             Locally Added               - 
 hasim-fpgaenv-null.apm    Locally Modified          177 

Directory modules/bluespec/common/fpgaenv/fpga-components
 alu-support.bsv           Locally Modified          177 
 bram.bsv                  Locally Modified          177 
 bram-multi-read.bsv       Locally Modified          177 

Directory modules/bluespec/common/fpgaenv/low-level-platform-interface/local-mem
 local-mem-bram.bsv        Locally Modified          177 

Directory modules/bluespec/common/fpgaenv
 fpga-environment.awb      Locally Modified          177 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/local
 local-mem-scratch.bsv     Locally Modified          177 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr2-sdram
 ddr2-sdram-device.bsv     Locally Modified          177 

Directory modules/bluespec/librl
 libfpga-bsv.awb           Locally Removed           178 

Directory modules/bluespec/librl/storage
 fifos.bsv                 Locally Modified          178 

Directory modules/bluespec/librl/storage/cache
 fpga-set-assoc-cache.bsv  Locally Modified          178 
 libfpga-cache.awb         Locally Removed           178 
 librl-cache.awb           Locally Added               - 

Directory modules/bluespec/librl/storage
 libfpga-bsv-storage.awb   Locally Removed           178 
 librl-bsv-storage.awb     Locally Added               - 

Directory modules/bluespec/librl
 librl-bsv.awb             Locally Added               - 
 libfpga-bsv.bsh           Locally Removed           178 
 librl-bsv.bsh             Locally Added               - 

Directory modules/bluespec/librl/base
 libfpga-bsv-base.awb      Locally Removed           178 
 librl-bsv-base.awb        Locally Added               - 
 memory-pack.bsv           Locally Modified          178 

Rename libfpga to librl.

----------
mcadler     Date: Tue Mar 24 20:59:19 EDT 2009  CSN: CSN-platforms-180
                  Wed Mar 25 00:59:19 UTC 2009


Directory modules/bluespec/common/fpgaenv/low-level-platform-interface/local-mem
 local-mem-ddr2.bsv        Locally Modified          179 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/local
 local-mem-scratch.bsv     Locally Modified          179 

- Guarantee that scratchpad memory always starts filled with 0.  This will
  be an especially useful default value with hybrid scratchpads, since
  anonymous mmap regions are guaranteed zero.
- Fix a timing problem in the local memory DDR2 interface that allowed
  loads to go around stores.

  


----------
aparasha    Date: Fri Mar 27 16:50:21 EDT 2009  CSN: CSN-platforms-181
                  Fri Mar 27 20:50:21 UTC 2009


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-csr
 pcie-physical-channel.cpp Locally Modified          180 
 pcie-physical-channel.awb Locally Modified          180 
 pcie-physical-channel.bsv Locally Modified          180 

Small performance optimization for PCIe CSR-Based Physical Channel

----------
mcadler     Date: Mon Mar 30 13:48:38 EDT 2009  CSN: CSN-platforms-182
                  Mon Mar 30 17:48:38 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-hybrid-sim.apm Locally Modified          181 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          181 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-memory.awb         Locally Removed           181 
 hybrid-memory.bsv         Locally Removed           181 
 hybrid-mem-scratch.cpp    Locally Added               - 
 hybrid-mem-scratch.rrr    Locally Added               - 
 hybrid-memory.cpp         Locally Removed           181 
 hybrid-mem-scratch.h      Locally Added               - 
 vmh-utils.cpp             Locally Removed           181 
 hybrid-mem-scratch.awb    Locally Added               - 
 hybrid-memory.rrr         Locally Removed           181 
 hybrid-mem-scratch.bsv    Locally Added               - 
 hybrid-memory-datatypes.bsv Locally Removed           181 
 hybrid-memory.h           Locally Removed           181 
 vmh-utils.h               Locally Removed           181 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/local
 local-mem-scratch.awb     Locally Modified          181 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device-bdpi.h   Locally Modified          181 

- Modify hybrid scratchpad to conform to new interface.  Scratchpad memory now
  uses the hybrid version, though it is quite slow.  Caches (coming soon) will
  make it more efficient.

- Change the timeout to 0 for the select() waiting for a message from the host
  in simulation mode.  Non-0 waits were causing extremely slow simulation during
  regions with no messages, such as initializing a large BRAM.  The only
  possible problem I can think of with a timeout of 0 is with simulation on
  uniprocessors.  On a uniprocessor, Bluesim make take a while to yield to the
  host thread when the model is stuck waiting for a message from the host.

----------
mcadler     Date: Mon Mar 30 16:44:04 EDT 2009  CSN: CSN-platforms-183
                  Mon Mar 30 20:44:04 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-xup.apm     Locally Modified          181 
 fpgaenv-htg-hwonly.apm    Locally Modified          181 
 hasim-fpgaenv-hybrid-sim.apm Locally Modified          182 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          182 
 hasim-fpgaenv-null.apm    Locally Modified          181 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.awb    Locally Modified          182 
 hybrid-mem-scratch.bsv    Locally Modified          182 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/local
 local-mem-scratch.awb     Locally Modified          182 
 local-mem-scratch.bsv     Locally Modified          181 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/interface
 scratchpad-interface.awb  Locally Added               0 
 scratchpad-interface.bsh  Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory
 interface/                Locally Added               0 

Directory modules/bluespec/common/fpgaenv/low-level-platform-interface/local-mem
 local-mem-bram.bsv        Locally Modified          181 

Move the scratchpad memory virtual device interface to a separate module in
an attempt to force all scratchpad implementations to conform to the same
interface.

----------
mcadler     Date: Mon Mar 30 20:44:30 EDT 2009  CSN: CSN-platforms-184
                  Tue Mar 31 00:44:30 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-xup.apm     Locally Modified          183 
 fpgaenv-htg-hwonly.apm    Locally Modified          183 
 hasim-fpgaenv-hybrid-sim.apm Locally Modified          183 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          183 
 hasim-fpgaenv-null.apm    Locally Modified          183 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.awb    Locally Modified          183 
 hybrid-mem-scratch.bsv    Locally Modified          183 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/local
 local-mem-scratch.awb     Locally Modified          183 
 local-mem-scratch.bsv     Locally Modified          183 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/interface
 scratchpad-interface.awb  Locally Removed           183 
 scratchpad-interface.bsh  Locally Removed           183 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory
 interface/                Locally Removed           183 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 std-virtual-device-interfaces.bsv Locally Added               0 
 std-virtual-devices.awb   Locally Modified          182 

Do what I should have done last time:  define a polymorphic scratchpad
interface at the root of the virtual devices.  Other virtual devices are free
to do the same.  Virtual devices can thus define standard interfaces without
resorting to multiple levels of awb dependence.

----------
mcadler     Date: Wed Apr  1 15:52:21 EDT 2009  CSN: CSN-platforms-185
                  Wed Apr  1 19:52:21 UTC 2009


Directory modules/bluespec/common/fpgaenv/fpga-components
 lutram.bsv                Locally Modified          183 
 software-fpga-components.awb Locally Modified          183 
 hardware-fpga-components.awb Locally Modified          183 
 lutram.v                  Locally Added               0 

Directory modules/bluespec/librl/base
 bluespec-common.prj       Locally Modified          183 

Implement the solution suggested by Xilinx for the Xst bug that incorrectly
assigns some RegFiles to BRAM instead of LUTs:  add a "ram_style = distributed"
pragma to the Verilog, forcing the storage to LUTs.  Instead of modifying
RegFile.v in the Bluespec tree I removed the reference to RegFile.v in
the list of Verilog modules included from Bluespec.  The new module,
lutram.v, is just a copy of Bluespec's Regfile.v with the pragma added.

Removed the previous work-around in lutram.bsv that mapped N-wide RegFiles
into N concatenated 1-bit RegFiles.  That code generated nearly identical
results in Xilinx tools but compiled much more slowly in Bluespec.

----------
mcadler     Date: Sat Apr  4 10:21:58 EDT 2009  CSN: CSN-platforms-186
                  Sat Apr  4 14:21:58 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-htg-hwonly.apm    Locally Modified          185 
 hasim-fpgaenv-hybrid-sim.apm Locally Modified          185 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          185 
 hasim-fpgaenv-null.apm    Locally Modified          185 
 hasim-fpgaenv-xup.apm     Locally Modified          185 

Directory modules/bluespec/librl/storage/cache
 fpga-set-assoc-cache.bsv  Locally Modified          185 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 std-virtual-device-interfaces.bsv Locally Modified          185 
 std-virtual-devices.awb   Locally Modified          185 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.dic    Locally Added               0 
 hybrid-mem-scratch.cpp    Locally Modified          185 
 hybrid-mem-scratch.rrr    Locally Modified          185 
 hybrid-mem-scratch.h      Locally Modified          185 
 hybrid-mem-scratch.awb    Locally Modified          185 
 hybrid-mem-scratch.bsv    Locally Modified          185 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 central-cache/            Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/central-cache
 central-cache-backing-store.bsv Locally Added               0 
 null-central-cache.awb    Locally Added               0 
 null-central-cache.bsv    Locally Added               0 

- Add a central cache definition.  Only a NULL central cache is implemented, though
  even a NULL central cache needs to route requests to the backing storage.
- Hybrid memory requests now go to the central cache.

----------
mcadler     Date: Mon Apr  6 07:27:01 EDT 2009  CSN: CSN-platforms-187
                  Mon Apr  6 11:27:01 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-hybrid-sim.apm Locally Modified          186 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          186 

Directory modules/bluespec/librl/storage/cache
 fpga-set-assoc-cache.bsv  Locally Modified          186 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 std-virtual-device-interfaces.bsv Locally Modified          186 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/central-cache
 local-mem-central-cache.awb Locally Added               0 
 local-mem-central-cache.bsv Locally Added               0 
 central-cache-backing-store.bsv Locally Modified          186 
 null-central-cache.bsv    Locally Modified          186 

Local memory central cache is a set-associative cache.  For now it allocates
the storage in BRAM.  Using local RAM is next.

----------
mcadler     Date: Tue Apr  7 17:29:39 EDT 2009  CSN: CSN-platforms-188
                  Tue Apr  7 21:29:39 UTC 2009


Directory modules/bluespec/librl/storage/cache
 fpga-set-assoc-cache.bsv  Locally Modified          187 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/central-cache
 local-mem-central-cache.bsv Locally Modified          187 
 central-cache-backing-store.bsv Locally Modified          187 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 std-virtual-device-interfaces.bsv Locally Modified          187 

Directory modules/bluespec/common/fpgaenv/low-level-platform-interface/local-mem
 local-mem-ddr2.bsv        Locally Modified          186 
 local-mem-interface.bsv   Locally Modified          186 
 local-mem-bram.awb        Locally Modified          186 
 local-mem-bram.bsv        Locally Modified          186 

- Set associative cache changes:
  - Merge all metadata into one structure so it can be stored in a single memory
    line or BRAM.
  - Encapsulate cache's local storage in a module.  Provide a standard BRAM-
    based implementation.
  - Rename all data structions from HASIM_CACHE to RL_SA_CACHE.

- Use local memory for central cache storage.

- Local memory:
  - Add a word-masked line write method for specifying which words in a line
    should be written.  The DDR controller implements this to avoid read-modify-
    write updates.
  - Make the array smaller in the BRAM version of local memory.  Initialization
    of the cache tags was too slow in Bluesim.  The downside is the default cache
    behavior no longer matches our hardware.

----------
mcadler     Date: Thu Apr  9 13:49:39 EDT 2009  CSN: CSN-platforms-189
                  Thu Apr  9 17:49:39 UTC 2009


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/central-cache
 local-mem-central-cache.bsv Locally Modified          188 

Resolve a race between reading cache data and metadata.  Resolution in the wrong
direction can cause deadlocks.

----------
mcadler     Date: Fri Apr 10 09:32:16 EDT 2009  CSN: CSN-platforms-190
                  Fri Apr 10 13:32:16 UTC 2009


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.bsv    Locally Modified          188 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr2-sdram
 ddr2-sdram-device.bsv     Locally Modified          188 

- Clean up scheduling precedence for DDR2 initialization.
- Derive hybrid memory sizes from local memory.

----------
mcadler     Date: Mon Apr 13 09:22:20 EDT 2009  CSN: CSN-platforms-191
                  Mon Apr 13 13:22:20 UTC 2009


Directory modules/bluespec/librl/storage/cache
 fpga-set-assoc-cache.bsv  Locally Modified          190 

Directory modules/bluespec/common/fpgaenv/fpga-components
 bram.bsv                  Locally Modified          190 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 std-virtual-device-interfaces.bsv Locally Modified          190 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.cpp    Locally Modified          190 
 hybrid-mem-scratch.rrr    Locally Modified          190 
 hybrid-mem-scratch.h      Locally Modified          190 
 hybrid-mem-scratch.bsv    Locally Modified          190 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/central-cache
 local-mem-central-cache.bsv Locally Modified          190 
 central-cache-backing-store.bsv Locally Modified          190 

- Space diet for central cache:
  - Central cache communication with backing storage is pipelined.  Writes send
    a control message followed by the line's data broken into word-sized chunks.
    Read responses are similar.  The old code sent the entire line and control
    in a single message.
  - Embed write-through and disabled cache modes in the cache itself.  The cache
    is now disabled by forcing all tag comparisons to fail instead of having
    to MUX the connection between client and source data outside the cache.
  - Remove the in-order read response path.  Clients wishing in-order returns
    must handle that by building their own ROB (a ScoreboardFIFO would work).

- BRAM now guarantees read/write ordering by blocking writes when the read
  response buffer is full.  The read response side is still single cycle, using
  a chained pair of BypassFIFOs.

----------
mcadler     Date: Tue Apr 14 19:41:26 EDT 2009  CSN: CSN-platforms-192
                  Tue Apr 14 23:41:26 UTC 2009


Directory modules/bluespec/librl/storage/cache
 librl-cache.awb           Locally Modified          190 
 rl-direct-mapped-cache.bsv Locally Added               0 
 fpga-set-assoc-cache.bsv  Locally Removed           191 
 rl-set-assoc-cache.bsv    Locally Added               - 
 fpga-tiny-cache.bsv       Locally Removed           190 
 rl-tiny-cache.bsv         Locally Added               - 

Directory modules/bluespec/librl/storage
 memory-heap.bsv           Locally Modified          190 

Directory modules/bluespec/librl/base
 memory-pack.bsv           Locally Modified          190 

Directory modules/bluespec/common/fpgaenv/fpga-components
 bram.bsv                  Locally Modified          191 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/central-cache
 local-mem-central-cache.bsv Locally Modified          191 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-server.bsv      Locally Modified          190 
 basic-rrr-client.bsv      Locally Modified          190 

- Switch to R/W conflict-free RegFile in simulation mode so simulated BRAM
  has the same timing as on hardware.
- Add interface stub for direct mapped cache.  The code is fully functional
  as a pass through.  No cache, yet.
- Clean up the memory-pack module to eliminate scheduling ambiguity.  Switched
  to the new MergeFIFOs module instead of ad-hoc logic to govern read/write
  request arrival.
- Add explicit scheduling for a number of warnings in various modules, including
  RRR.

----------
mcadler     Date: Fri Apr 17 09:05:24 EDT 2009  CSN: CSN-platforms-193
                  Fri Apr 17 13:05:24 UTC 2009


Directory modules/bluespec/librl/storage/cache
 rl-direct-mapped-cache.bsv Locally Modified          192 
 rl-set-assoc-cache.bsv    Locally Modified          192 

Directory modules/bluespec/librl/base
 counting-filter.bsv       Locally Modified          192 

- Implement the direct mapped cache.
- Add a flag to counting filters to force allocation of only simple filters.
  (E.g. no Bloom filters.)

----------
mcadler     Date: Fri Apr 17 15:59:53 EDT 2009  CSN: CSN-platforms-194
                  Fri Apr 17 19:59:53 UTC 2009


Directory modules/bluespec/librl/base
 fifo-merge.bsv            Locally Modified          192 
 memory-pack.bsv           Locally Modified          192 

- Add firstPortID() method so the source port number corresponding to the head
  of the FIFO can be known.
- Move logic to rules to reduce Bluespec scheduler complexity.

----------
mcadler     Date: Tue Apr 21 16:42:17 EDT 2009  CSN: CSN-platforms-195
                  Tue Apr 21 20:42:17 UTC 2009


Directory modules/bluespec/librl/base
 memory-interface.bsv      Locally Modified          193 
 memory-pack.bsv           Locally Modified          194 

Directory modules/bluespec/librl/storage/cache
 rl-direct-mapped-cache.bsv Locally Modified          193 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 std-virtual-device-interfaces.bsv Locally Modified          193 
 std-virtual-devices.awb   Locally Modified          193 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.bsv    Locally Modified          193 

- Add modules for conversion between a standard MEMORY_IFC and a single-reader
  version of MEMORY_MULTI_READ_IFC.  This allows us to implement a module
  that supports either interface by writing the implementation as a multi-reader
  and converting it, when needed, to a MEMORY_IFC using a wrapper.

- Converted the memory packer to true multi-reader implementations.

- Change the hybrid scratchpad to return the address as part of a read result.
  Also enlarge the refInfo passed through a scratchpad request so clients can
  add more tags, such as the read-port associated with a reference.  Returning
  these values along with a read result eliminates the need for private FIFOs
  in clients to track the metadata.

----------
mcadler     Date: Mon Apr 27 13:19:06 EDT 2009  CSN: CSN-platforms-197
                  Mon Apr 27 17:19:06 UTC 2009


Directory modules/bluespec/librl/base
 memory-interface.bsv      Locally Modified          196 
 memory-pack.bsv           Locally Modified          196 

Directory modules/bluespec/common/fpgaenv/fpga-components
 bram.bsv                  Locally Modified          196 
 bram-multi-read.bsv       Locally Modified          196 

- Add a new flavor of multi-reader BRAM (buffered pseudo).  Now there are 3 kinds:
  - Large & Fast: replicated BRAM structure.  One BRAM per read port.
  - Medium: single, shared BRAM.  Private 2-stage output buffers on each
      read port prevent deadlocks.  Read/write order is preserved at the
      cost of never doing a read and a write in the same cycle.
  - Small: single, shared BRAM.  All read ports share a common output FIFO.
      There is, thus, the chance of deadlock if the client is waiting on
      a read-port whose request is not the oldest.  This flavor is useful
      if all the client needs is a tag to connect read requests and responses.

- Clean up the replication of code to support initialized memory.  Added standard
  initialization wrapper modules in the memory interface.  The BRAM implementations
  now use these.

----------
mcadler     Date: Mon Apr 27 19:48:03 EDT 2009  CSN: CSN-platforms-198
                  Mon Apr 27 23:48:03 UTC 2009


Directory modules/bluespec/librl/base
 memory-interface.bsv      Locally Modified          197 
 memory-pack.bsv           Locally Modified          197 

Directory modules/bluespec/librl/storage
 fifos.bsv                 Locally Modified          196 

Directory modules/bluespec/librl/storage/cache
 rl-direct-mapped-cache.bsv Locally Modified          196 
 rl-set-assoc-cache.bsv    Locally Modified          196 

Directory modules/bluespec/common/fpgaenv/fpga-components
 bram.bsv                  Locally Modified          197 
 bram-multi-read.bsv       Locally Modified          197 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/local
 local-mem-scratch.bsv     Locally Modified          196 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/central-cache
 local-mem-central-cache.bsv Locally Modified          196 
 null-central-cache.bsv    Locally Modified          196 

- Update NULL central cache and local mem scratchpad implementations to current
  interface version.
- Rename SCOREBOARD_FIFO to SCOREBOARD_FIFOF since it has notFull, etc.
- Add notFull, notEmpty, peek and writeNotFull methods to MEMORY_IFC.  Update
  all modules implementing a memory.

----------
mcadler     Date: Sat May  2 08:14:29 EDT 2009  CSN: CSN-platforms-199
                  Sat May  2 12:14:29 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-hybrid-sim.apm Locally Modified          198 

Directory modules/bluespec/librl/storage/cache
 rl-set-assoc-cache.bsv    Locally Modified          198 

Directory modules/bluespec/librl/base
 bluespec-common.prj       Locally Modified          198 

Directory modules/bluespec/common/fpgaenv/fpga-components
 lutram.bsv                Locally Modified          198 
 software-fpga-components.awb Locally Modified          198 
 hardware-fpga-components.awb Locally Modified          198 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 std-virtual-device-interfaces.bsv Locally Modified          198 
 std-virtual-devices.awb   Locally Modified          198 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.bsv    Locally Modified          198 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/central-cache
 local-mem-central-cache.bsv Locally Modified          198 
 central-cache-backing-store.bsv Locally Modified          198 

- Xilinx LUTRAM Xst error workaround (see the previous lutram.bsv check-in)
  does not work.  Reverted to the ugly, but effective, mapping to 1-bit RegFiles.
- Set associate cache no longer requires ways to be a power of 2.  Using 3 ways
  for the central cache uses memory more efficiently, dividing memory into
  4 equal regions: three regions of ways, one of tags.
- Expose the central cache for clients coming through the platform interface.
- Reduce local memory for Bluesim to 1K words so we see spills during simulation.

----------
aparasha    Date: Mon May  4 15:22:52 EDT 2009  CSN: CSN-platforms-200
                  Mon May  4 19:22:52 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-htg-hwonly.apm    Locally Modified          199 
 hasim-fpgaenv-hybrid-sim.apm Locally Modified          199 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          199 
 hasim-fpgaenv-xup.apm     Locally Modified          199 

Directory modules/bluespec/common/fpgaenv/fpga-components
 user-clock.bsv            Locally Modified          199 
 software-fpga-components.awb Locally Modified          199 
 hardware-fpga-components.awb Locally Modified          199 

Directory modules/bluespec/common/fpgaenv/low-level-platform-interface
 llpi.bsv                  Locally Modified          199 

Directory modules/bluespec/common/fpgaenv/physical-platform
 utils/                    Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/utils
 soft-reset.bsv            Locally Added               0 
 utils.awb                 Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/simulation
 sim-physical-platform.awb Locally Modified          199 
 sim-physical-platform.bsv Locally Modified          199 

Directory modules/bluespec/common/fpgaenv/physical-platform/debuggers/htg-virtex5
 htg-debugger.cpp          Locally Modified          199 
 htg-debugger.bsv          Locally Modified          199 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup
 xup-physical-platform.awb Locally Modified          199 
 xup-physical-platform.bsv Locally Modified          199 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-disabled
 htg-v5-pcie-disabled.awb  Locally Modified          199 
 htg-v5-pcie-disabled.bsv  Locally Modified          199 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.awb   Locally Modified          199 
 htg-v5-pcie-enabled.bsv   Locally Modified          199 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr2-sdram
 ddr2-sdram-device.bsv     Locally Modified          199 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express
 pci-express-device.bsv    Locally Modified          199 
 pci-express-vhdl-import.bsv Locally Modified          199 
 Channel_top.vhd           Locally Modified          199 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/leds
 general-led-device.bsv    Locally Modified          199 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/switches
 general-switch-device.awb Locally Modified          199 
 general-switch-device.bsv Locally Modified          199 
 general-switch-vhdl-import.bsv Locally Added               0 
 general-switch-device.vhd Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device.h        Locally Modified          199 
 unix-pipe-device.bsv      Locally Modified          199 
 unix-pipe-device-bdpi.c   Locally Modified          199 
 unix-pipe-device.cpp      Locally Modified          199 
 unix-pipe-device-bdpi.h   Locally Modified          199 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 clocks/                   Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks
 simulation/               Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks/simulation
 sim-clocks-device.awb     Locally Added               0 
 sim-clocks-device.bsv     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks
 differential/             Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks/differential
 differential-clocks-vhdl-import.bsv Locally Added               0 
 differential-clocks-device.vhd Locally Added               0 
 differential-clocks-device.awb Locally Added               0 
 differential-clocks-device.bsv Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks
 single-ended/             Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks/single-ended
 single-ended-clocks-device.awb Locally Added               0 
 single-ended-clocks-device.bsv Locally Added               0 
 single-ended-clocks-vhdl-import.bsv Locally Added               0 
 single-ended-clocks-device.vhd Locally Added               0 

Updated clocking methodology for all FPGA designs. "Clocks" is now a new
physical device exported by each Physical Platform. Three implementations
of clocks device have been provided:

  - a single-ended device that derives a Clock object from a single top-level
    wire CLK,
  - a differential device that derives a Clock object from a pair of wires
    CLK_P and CLK_N, and
  - a simulation device that instantiates a simulated oscillator.

For real hardware platforms, the wires are *not* bound to UCF pins within
the device implementation; the binding happens at the Physical Platform
layer, so that multiple Physical Platforms can share the same single-ended
and differential clock modules.

Clock-multiplication for the model clock is now part of the Clocks device.
The crystal clock frequency is a local AWB parameter, but the multiplication
and division factors are exported as global parameters so that different
models can use different factors.

Each Clocks implementation also exports a Reset object. The Clock and Reset
objects together form the "driver" part of the physical device.

The Clocks device also internally implements the logic for generating a soft
reset, and ties the effect of the soft reset into the main Reset signal it
exports as part of the driver. However, the soft reset needs to be explicitly
*triggered* elsewhere. The clocks device therefore also exports a
SOFT_RESET_IFC interface up to the Platform, which can then pass it into
whichever Physical Device is capable of actually triggering the Soft Reset on
the particular platform.

----------
aparasha    Date: Tue May  5 03:39:54 EDT 2009  CSN: CSN-platforms-201
                  Tue May  5 07:39:54 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks/single-ended
 single-ended-clocks-device.vhd Locally Modified          200 

Added input buffers to global clock and reset signal for single-ended
clocks device. The alpha model was showing a weird tiny timing glitch
in the memory controller that went away once these buffers were added.

----------
mcadler     Date: Tue May  5 10:18:34 EDT 2009  CSN: CSN-platforms-202
                  Tue May  5 14:18:34 UTC 2009


Directory modules/bluespec/librl/storage/cache
 rl-direct-mapped-cache.bsv Locally Modified          201 
 rl-set-assoc-cache.bsv    Locally Modified          201 
 rl-cache.bsv              Locally Added               0 
 librl-cache.awb           Locally Modified          201 

Directory modules/bluespec/librl/base
 counting-filter.bsv       Locally Modified          201 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/central-cache
 local-mem-central-cache.bsv Locally Modified          201 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr2-sdram
 ddr2-sdram-device.bsv     Locally Modified          201 

- Try to make the DDR initialization more robust, understanding that the
  DDR domain doesn't get a soft reset.  Initialization now drains the sync
  FIFOs between DDR and the model domain.  There still seem to be some lurking
  problems, but soft reset works more often now.
- Move cache statistics interface definition to common code.
- Add statistics option to direct mapped cache.
- Drop unneeded writeSyncReq/Wait from direct mapped cache.
- Add NULL direct mapped cache that is just a pass-through to the backing
  storage interface.  This allows modules to code to a direct mapped cache
  while keeping the option of not allocating a cache.

----------
mcadler     Date: Tue May 12 07:24:42 EDT 2009  CSN: CSN-platforms-203
                  Tue May 12 11:24:42 UTC 2009


Directory modules/bluespec/librl/storage/cache
 rl-set-assoc-cache.bsv    Locally Modified          202 

Directory modules/bluespec/librl/base
 counters.bsv              Locally Modified          201 
 counting-filter.bsv       Locally Modified          202 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/central-cache
 local-mem-central-cache.bsv Locally Modified          202 
 local-mem-central-cache.awb Locally Modified          201 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 std-virtual-device-interfaces.bsv Locally Modified          201 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.bsv    Locally Modified          201 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr2-sdram
 ddr2-sdram-sync-tig.ucf   Locally Modified          201 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks/single-ended
 single-ended-clocks-device.awb Locally Modified          201 
 single-ended-clocks-device.bsv Locally Modified          201 

Directory modules/bluespec/common/fpgaenv/physical-platform/utils
 soft-reset.bsv            Locally Modified          201 

Directory modules/bluespec/common/fpgaenv/low-level-platform-interface/local-mem
 local-mem-bram.awb        Locally Modified          201 
 local-mem-bram.bsv        Locally Modified          201 

Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-hybrid-sim.apm Locally Modified          201 

- Central cache now buffers recently read lines.  New read requests may return
  early by hitting in the recently read lines cache.  New write requests simply
  invalidate their associated recently read line cache entry.
- Central cache platform interface internal code no longer sees read results
  as lines.  Only the requested word is returned.
- Improve BRAM-based local memory latency simulation, with the goal of making it
  behave a little more like DDR.  The default simulation model configuration now
  has added latency.
- Add notSet() method to counting filters to test whether an entry is set.
- Counter no longer ignores up/down requests in the same cycle as setC.
  Ignoring the up request could drop statistics increments while statistics
  are being scanned out.
- Get rid of the long (128 entry) reset chain for soft resets and revert to
  a counter to pull the reset wire.
- Restore 75MHz HTG model default frequency.
- Add TIG (timing ignore) tags for syncResetQ sync-FIFO in DDR2 driver.

----------
aparasha    Date: Thu May 14 17:26:21 EDT 2009  CSN: CSN-platforms-204
                  Thu May 14 21:26:21 UTC 2009


Directory modules/bluespec/common/fpgaenv/low-level-platform-interface/local-mem
 local-mem-interface.bsv   Locally Modified          203 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks/single-ended
 single-ended-clocks-device.bsv Locally Modified          203 

- Removed gratuitous ddr2_sdram include from clocks device
- Added an import to local-mem-interface.bsv

----------
mcadler     Date: Fri May 15 14:43:52 EDT 2009  CSN: CSN-platforms-205
                  Fri May 15 18:43:52 UTC 2009


Directory modules/bluespec/librl/storage/cache
 rl-direct-mapped-cache.bsv Locally Modified          204 

Directory modules/bluespec/librl/base
 hash-bits.bsv             Locally Modified          204 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/central-cache
 local-mem-central-cache.awb Locally Modified          204 
 local-mem-central-cache.bsv Locally Modified          204 

- Direct mapped cache optionally hashes addresses.
- hash-bits module now accepts input up to 128 bits, though everything above
  64 is just copied through.  The optimizer should remove unused bits.  This
  was done to avoid a proviso to set the maximum permitted size.
- Change the filter being used on the central cache's recent read cache so the
  filter is a function of the index into the cache.  Our Block RAM gives
  unpredictable results when reading and writing the same address in a cycle.
  The old filter allowed that to happen.

----------
mcadler     Date: Tue May 19 23:04:01 EDT 2009  CSN: CSN-platforms-206
                  Wed May 20 03:04:01 UTC 2009


Directory modules/bluespec/librl/storage
 fifos.bsv                 Locally Modified          204 

Directory modules/bluespec/librl/base
 fifo-merge.bsv            Locally Modified          204 

- Add lastInGroup() test to Merge FIFO as a test that the oldest entry
  is the last from the set queued in its cycle.
- Eliminate scheduling warnings caused by code in a method of the BRAM-based
  Scoreboard FIFO.

----------
pellauer    Date: Thu May 21 13:49:27 EDT 2009  CSN: CSN-platforms-207
                  Thu May 21 17:49:27 UTC 2009


Directory modules/bluespec/common/fpgaenv/fpga-components
 lutram.bsv                Locally Modified          206 


* Added a nice abstraction: instead of initializing a LUTRAM with all indices
  getting the same value, use a function from index to value. The old case is
  now just a wrapper which calls the new case trivially. This really helps
  A-Port initialization.


Michael P.

----------
mcadler     Date: Thu May 21 16:50:37 EDT 2009  CSN: CSN-platforms-208
                  Thu May 21 20:50:37 UTC 2009


Directory modules/bluespec/librl/base
 memory-interface.bsv      Locally Modified          207 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks/simulation
 sim-clocks-device.bsv     Locally Modified          207 

- Change simulation clock period so cycles match the clock period in waveform dumps.
- Add predicate to memory interface peek() method to eliminate scheduler warnings.

----------
aparasha    Date: Fri May 22 17:12:08 EDT 2009  CSN: CSN-platforms-209
                  Fri May 22 21:12:08 UTC 2009


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/central-cache
 local-mem-central-cache.bsv Locally Modified          208 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks
 null/                     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks/null
 null-clocks-device.awb    Locally Added               0 
 null-clocks-device.bsv    Locally Added               0 

- added a NULL clocks device
- [mcadler] fixed a bug in the BRAM-based central cache

----------
mcadler     Date: Mon May 25 22:36:17 EDT 2009  CSN: CSN-platforms-210
                  Tue May 26 02:36:17 UTC 2009


Directory modules/bluespec/librl/storage/cache
 rl-direct-mapped-cache.bsv Locally Modified          209 
 rl-set-assoc-cache.bsv    Locally Modified          209 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.cpp    Locally Modified          209 
 hybrid-mem-scratch.rrr    Locally Modified          209 
 hybrid-mem-scratch.h      Locally Modified          209 
 hybrid-mem-scratch.bsv    Locally Modified          209 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/central-cache
 local-mem-central-cache.bsv Locally Modified          209 

- Direct mapped cache:
  - Flushed dirty line wasn't marked clean after flush
  - Change protocol for inval/flush ACK.  Old protocol was causing write-backs
    to be allowed to go out after the ACK that was supposed to confirm the
    data reached the host.

- Fix central cache deadlock by changing rule priority.

- Stop breaking line-sized RRR scratchpad load/store into word-sized chunks.
  Loss of performance wasn't worth the area.

    

----------
mcadler     Date: Sun May 31 09:26:07 EDT 2009  CSN: CSN-platforms-211
                  Sun May 31 13:26:07 UTC 2009


Directory modules/bluespec/librl/storage/cache
 rl-set-assoc-cache.bsv    Locally Modified          210 

Directory modules/bluespec/common/fpgaenv/fpga-components
 lutram.bsv                Locally Modified          210 
 hardware-fpga-components.awb Locally Modified          210 

- Changes to Xst LUTRAM (RegFile) bug work-around:
  - Figured out a better way to guarantee storage in LUTs by inverting the low
    bit of the address.  The old code broke all storage into sets of single-bit-
    wide arrays.  The new code allocates a single array but ensures that the
    incoming address is not a register by inverting the low bit.  This
    "asynchronous source," as Xilinx Virtex 5's user manual describes it,
    causes Xst to infer LUT-based storage.
  - Add an AWB parameter for enabling the work-around.

- Tweak rule order in SA cache.

----------
mcadler     Date: Thu Jun  4 19:58:17 EDT 2009  CSN: CSN-platforms-212
                  Thu Jun  4 23:58:17 UTC 2009


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.bsv    Locally Modified          211 

Fix typo (spelled debug log file name wrong).

----------
mcadler     Date: Tue Jun  9 22:43:07 EDT 2009  CSN: CSN-platforms-213
                  Wed Jun 10 02:43:07 UTC 2009


Directory modules/bluespec/librl/storage/cache
 rl-set-assoc-cache.bsv    Locally Modified          212 

Directory modules/bluespec/librl/storage
 memory-heap.bsv           Locally Modified          212 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 std-virtual-device-interfaces.bsv Locally Modified          212 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/central-cache
 local-mem-central-cache.bsv Locally Modified          212 

- Fix a deadlock in the central cache caused by the write-data heap's free list
  queue filling and not being allowed to drain.  Fixed two ways:  give priority
  for union LUTRAM heaps to the freeQ over data writes.  Also changed the
  set-associative cache to use a heap with separate data and free list.

- Add more debug scan state for the central cache.

----------
mcadler     Date: Fri Jun 12 23:10:21 EDT 2009  CSN: CSN-platforms-214
                  Sat Jun 13 03:10:21 UTC 2009


Directory modules/bluespec/librl/storage/cache
 rl-direct-mapped-cache.bsv Locally Modified          213 
 rl-set-assoc-cache.bsv    Locally Modified          213 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.bsv    Locally Modified          213 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/local
 local-mem-scratch.bsv     Locally Modified          213 

- Mode 2 in direct mapped cache now bypasses the cache for writes and preserves
  the existing data unless, of course, the address being written is already in
  the cache.
- Mode 3 in caches is now the disabled mode.

----------
keflemin    Date: Mon Jun 22 15:25:32 EDT 2009  CSN: CSN-platforms-215
                  Mon Jun 22 19:25:32 UTC 2009


Directory modules/bluespec/librl/base
 debug-file.bsv            Locally Modified          214 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.awb    Locally Modified          214 
 hybrid-mem-scratch.bsv    Locally Modified          214 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/local
 local-mem-scratch.awb     Locally Modified          214 
 local-mem-scratch.bsv     Locally Modified          214 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/central-cache
 local-mem-central-cache.awb Locally Modified          214 
 local-mem-central-cache.bsv Locally Modified          214 


Added support for eliminating extra memory subsystem print outs

----------
keflemin    Date: Sat Jul 25 16:13:21 EDT 2009  CSN: CSN-platforms-216
                  Sat Jul 25 20:13:21 UTC 2009


Directory modules/bluespec/librl/storage/cache
 rl-direct-mapped-cache.bsv Locally Modified          215 

Directory modules/bluespec/librl/base
 memory-interface.bsv      Locally Modified          215 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/central-cache
 local-mem-central-cache.bsv Locally Modified          215 

DO NOT DELETE THIS LINE! ADD COMMENTS BELOW

Changed interface of source data to have a peek

----------
kfleming    Date: Wed Jul 29 15:31:57 EDT 2009  CSN: CSN-platforms-218
                  Wed Jul 29 19:31:57 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup
 serial/                   Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup/serial
 xilinx.download           Locally Added               0 
 xilinx.ut                 Locally Added               0 
 xilinx-xup-serial.cpp     Locally Added               0 
 xilinx.xst                Locally Added               0 
 xilinx-xup-serial.h       Locally Added               0 
 xilinx-xup-serial.awb     Locally Added               0 
 xilinx-xup-serial.bsv     Locally Added               0 
 xilinx-xup-serial.ucf     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 serial/                   Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/serial
 ublaze-serial/            Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/serial/ublaze-serial
 xps_bram_if_cntlr_1_wrapper.ngc Locally Added               0 
 bramfeeder_0_wrapper.ngc  Locally Added               0 
 lmb_bram_wrapper.ngc      Locally Added               0 
 xps_bram_if_cntlr_1_bram_wrapper.ngc Locally Added               0 
 dlmb_wrapper.ngc          Locally Added               0 
 clock_generator_0_wrapper.ngc Locally Added               0 
 dlmb_cntlr_wrapper.ngc    Locally Added               0 
 proc_sys_reset_0_wrapper.ngc Locally Added               0 
 system.v                  Locally Added               0 
 ilmb_wrapper.ngc          Locally Added               0 
 system.ngc                Locally Added               0 
 ilmb_cntlr_wrapper.ngc    Locally Added               0 
 rs232_uart_1_wrapper.ngc  Locally Added               0 
 debug_module_wrapper.ngc  Locally Added               0 
 mb_plb_wrapper.ngc        Locally Added               0 
 serial-device-ublaze.awb  Locally Added               0 
 serial-device.bsv         Locally Added               0 
 microblaze_0_wrapper.ngc  Locally Added               0 

Added ublaze-based serial device.

----------
ndave       Date: Wed Jul 29 16:41:14 EDT 2009  CSN: CSN-platforms-219
                  Wed Jul 29 20:41:14 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-xupv2-serial.apm Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/serial
 serial-physical-channel.cpp Locally Modified          218 
 serial-physical-channel.h Locally Modified          218 
 serial-physical-channel.bsv Locally Modified          218 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/little-32
 umf-little-32.cpp         Locally Modified          218 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup/serial
 xilinx-xup-serial.bsv     Locally Modified          218 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/serial
 loopback-serial/          Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/serial/loopback-serial
 loopback-serial-device.awb Locally Added               0 
 loopback-serial-device.bsv Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/serial
 general-serial/           Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/serial/general-serial
 general-serial-device.awb Locally Added               0 
 general-serial-device.bsv Locally Added               0 

* Created XUP v2 hybrid platform with a serial channel. 

* Setup a loopback serial device and skeleton for a general one

small typo in umb-little-32.cpp
small typo in xilinx-serial-xup.bsv


----------
emer        Date: Wed Jul 29 16:46:50 EDT 2009  CSN: CSN-platforms-220
                  Wed Jul 29 20:46:50 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/serial/ublaze-serial
 serial-device-ublaze.awb  Locally Modified          219 
 serial-device.bsv         Locally Modified          219 

Eliminate extraneous %requires.
Add NL at end of file serial-device.bsv.


----------
keflemin    Date: Thu Jul 30 19:13:19 EDT 2009  CSN: CSN-platforms-221
                  Thu Jul 30 23:13:19 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-xupv2-serial.apm Locally Modified          220 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/central-cache
 null-central-cache.bsv    Locally Modified          220 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/serial/ublaze-serial
 serial.v                  Locally Added               0 
 serial-device-ublaze.awb  Locally Modified          220 
 serial-device.bsv         Locally Modified          220 



Updates to serial

----------
mcadler     Date: Fri Jul 31 14:44:58 EDT 2009  CSN: CSN-platforms-224
                  Fri Jul 31 18:44:58 UTC 2009


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/local
 local-mem-scratch.awb     Locally Modified          223 
 local-mem-scratch.bsv     Locally Modified          223 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/central-cache
 null-central-cache.bsv    Locally Modified          223 

Update NULL central cache and local memory scratchpads to current interfaces.

----------
mcadler     Date: Sun Aug  2 10:56:31 EDT 2009  CSN: CSN-platforms-234
                  Sun Aug  2 14:56:31 UTC 2009


Directory modules/bluespec/librl/storage/cache
 rl-direct-mapped-cache.bsv Locally Modified          233 

Directory modules/bluespec/librl/base
 alias_def.bsv             Locally Removed           233 
 bluespec-def.bsv          Locally Added               - 
 librl-bsv-base.awb        Locally Modified          233 

- Add NumTypeParam#() to bluespec-def as a way to pass a numeric type as
  a module parameter without adding the type to the interface.
- Rename alias_def.bsv to bluespec-def.bsv.  File now holds base Bluespec
  language extensions.
- Use NumTypeParam for direct mapped cache sizing.  The old method (too
  complicated to describe here) isn't supported by the compiler, especially
  in combination with ModuleCollect.


----------
keflemin    Date: Sun Aug  2 19:35:18 EDT 2009  CSN: CSN-platforms-235
                  Sun Aug  2 23:35:18 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          234 

Directory modules/bluespec/common/fpgaenv/fpga-components
 hardware-fpga-components-virtex5.awb Locally Modified          234 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup/serial
 xilinx-xup-serial.awb     Locally Modified          234 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-disabled
 htg-v5-pcie-disabled.awb  Locally Modified          234 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.awb   Locally Modified          234 

Directory modules/bluespec/common/fpgaenv/physical-platform/null
 null-physical-platfrom.awb Locally Modified          234 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/serial/ublaze-serial
 system.bmm                Locally Modified          234 
 bramfeeder.v              Locally Modified          234 
 serial-device-ublaze.awb  Locally Modified          234 


Added support for bmm and elf for serial

----------
mcadler     Date: Mon Aug  3 07:47:00 EDT 2009  CSN: CSN-platforms-236
                  Mon Aug  3 11:47:00 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-disabled
 htg-v5-pcie-disabled.awb  Locally Modified          235 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.awb   Locally Modified          235 

Spaces no longer needed around MAP_OPTIONS.

----------
aparasha    Date: Thu Aug  6 17:19:27 EDT 2009  CSN: CSN-platforms-242
                  Thu Aug  6 21:19:27 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-hybrid-sim.apm Locally Modified          241 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          241 
 hasim-fpgaenv-null.apm    Locally Modified          241 

Directory modules/bluespec/common/fpgaenv/low-level-platform-interface
 llpi.cpp                  Locally Modified          241 
 remote-memory/            Locally Added               0 

Directory modules/bluespec/common/fpgaenv/low-level-platform-interface/remote-memory
 pci-express-dma/          Locally Added               0 

Directory modules/bluespec/common/fpgaenv/low-level-platform-interface/remote-memory/pci-express-dma
 remote-memory-pcie-dma.cpp Locally Added               0 
 remote-memory-pcie-dma.h  Locally Added               0 
 remote-memory-pcie-dma.awb Locally Added               0 
 remote-memory-pcie-dma.bsv Locally Added               0 

Directory modules/bluespec/common/fpgaenv/low-level-platform-interface/remote-memory
 null/                     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/low-level-platform-interface/remote-memory/null
 null-remote-memory.h      Locally Added               0 
 null-remote-memory.awb    Locally Added               0 
 null-remote-memory.bsv    Locally Added               0 

Directory modules/bluespec/common/fpgaenv/low-level-platform-interface
 llpi.h                    Locally Modified          241 
 hybrid-llpi.awb           Locally Modified          241 
 llpi.bsv                  Locally Modified          241 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-dma
 dma-physical-channel.cpp  Locally Modified          241 
 dma-physical-channel.awb  Locally Modified          241 
 dma-physical-channel.bsv  Locally Modified          241 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 std-virtual-devices.awb   Locally Modified          241 
 shared-memory/            Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/shared-memory
 standard/                 Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/shared-memory/standard
 standard-shared-memory-server.cpp Locally Added               0 
 standard-shared-memory.h  Locally Added               0 
 standard-shared-memory.awb Locally Added               0 
 standard-shared-memory.bsv Locally Added               0 
 standard-shared-memory-server.h Locally Added               0 
 standard-shared-memory.cpp Locally Added               0 
 standard-shared-memory.rrr Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/shared-memory
 null/                     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/shared-memory/null
 null-shared-memory.h      Locally Added               0 
 null-shared-memory.awb    Locally Added               0 
 null-shared-memory.bsv    Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/debuggers/htg-virtex5
 htg-debugger.bsv          Locally Modified          241 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express
 pci-express-device-ioctl.awb Locally Modified          241 
 pci-express-device.bsv    Locally Modified          241 
 pci-express-device-mmap.awb Locally Modified          241 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-new
 pci-express-device.bsv    Locally Modified          241 
 pci-express-vhdl-import.bsv Locally Modified          241 
 pci-express-device-mmap.awb Locally Modified          241 
 pci-express-c-import-mmap.cpp Locally Modified          241 
 dma_ctrl.vhd              Locally Modified          241 
 pci-express-c-import-mmap.h Locally Modified          241 
 channel_ctrl.vhd          Locally Modified          241 

Directory drivers/linux/hasim/kernel
 pchnl_if.h                Locally Modified          241 
 pchnl_main.c              Locally Modified          241 
 README                    Locally Modified          241 
 pchnl_main.h              Locally Modified          241 

- Updated the PCI-Express kernel driver to support page address translation and locking
  for DMA.

- Updated the PCI-Express physical device to support DMA. The firmware code appears
  to be buggy and crashes the system if the flow of data is not continuous once a
  DMA has started. To work around this, the physical device layer uses a BRAM buffer
  to buffer the entire DMA transaction before sending it out.

- Added a DMA-based Physical Channel. This is primarily a proof-of-concept module and is
  not being used in any platform configuration. The CSR-based channel is going to be
  used for ChannelIO and value-based RRR. DMA is going to be exposed via the Remote/
  Shared memory interface (see below).

- Added a new Remote Memory module to the set of Physical Platform Interfaces (alongside
  ChannelIO and Local Memory). The module supports line- and burst-mode accesses to "remote"
  host memory. Also added a Null implementation for physical platforms that currently do
  not allow access to host memory. In future, a Simulation version could be created.

  The software side of this module has methods to obtain the address translations from
  the underlying physical platform driver.

- Added a new Shared Memory virtual device. This module also supports line- and
  burst-mode accesses. Clients of this device use "virtual" addresses. The host-side
  virtual address is simply the C++ pointer to the memory region. The FPGA-side virtual
  address is the offset from the start of the region (starting at 0). The current
  implementation only supports a single client, and a single page-sized transfer region.
  Client software calls sharedMemory.Allocate() to allocate the region and obtain a
  virtual address. Following this, the hardware can simply use addresses in the [0, 4KB]
  range to access this region.

  Also added a Null implementation of shared memory. A Simulation version will be added
  in the near future.

----------
aparasha    Date: Fri Aug  7 16:18:09 EDT 2009  CSN: CSN-platforms-247
                  Fri Aug  7 20:18:09 UTC 2009


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/shared-memory/standard
 standard-shared-memory.bsv Locally Modified          246 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/shared-memory/null
 null-shared-memory.bsv    Locally Modified          246 

- Added some structs to the shared memory interface.

- Fleshed out the Null shared memory to export the full standard interface
  (sans functionality). This was required because Platform Interface attempts
  to translate connection messages into method calls to the device.

----------
mpellaue    Date: Wed Aug 12 16:23:23 EDT 2009  CSN: CSN-platforms-251
                  Wed Aug 12 20:23:23 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-htg-hwonly.apm    Locally Modified          250 
 fpgaenv-hybrid-xupv2-serial.apm Locally Modified          250 
 hasim-fpgaenv-hybrid-sim.apm Locally Modified          250 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          250 
 hasim-fpgaenv-null.apm    Locally Modified          250 
 std-virtual-devices.apm   Locally Added               0 
 hasim-fpgaenv-xup.apm     Locally Modified          250 

Directory modules/bluespec/common/fpgaenv/low-level-platform-interface
 llpi.cpp                  Locally Modified          250 
 llpi.h                    Locally Modified          250 

Directory modules/bluespec/common/fpgaenv/virtual-platform
 std-virtual-platform.cpp  Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-client.cpp      Locally Modified          250 
 basic-rrr-client.h        Locally Modified          250 
 demarshaller.bsv          Locally Modified          250 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 std-virtual-devices.cpp   Locally Added               0 
 std-virtual-devices.h     Locally Added               0 
 starter/                  Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/starter
 starter-device.cpp        Locally Added               0 
 starter-device.rrr        Locally Added               0 
 starter-device.h          Locally Added               0 
 starter-device.awb        Locally Added               0 
 starter-device.bsv        Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 std-virtual-device-interfaces.bsv Locally Modified          250 
 std-virtual-devices.awb   Locally Modified          250 
 std-virtual-devices.bsv   Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.rrr    Locally Modified          250 
 hybrid-mem-scratch.awb    Locally Modified          250 
 hybrid-mem-scratch.bsv    Locally Modified          250 
 hybrid-mem-scratch-interfaces.bsv Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/central-cache
 central-cache-interfaces.bsv Locally Added               0 
 local-mem-central-cache.awb Locally Modified          250 
 local-mem-central-cache.bsv Locally Modified          250 
 central-cache-backing-store.bsv Locally Modified          250 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/shared-memory/standard
 standard-shared-memory.cpp Locally Modified          250 

Directory modules/bluespec/common/fpgaenv/virtual-platform
 std-virtual-platform.h    Locally Modified          250 
 std-virtual-platform.awb  Locally Modified          250 
 std-virtual-platform.bsv  Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.ucf   Locally Modified          250 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr2-sdram
 ddr2_sdram.ucf            Locally Modified          250 
 ddr2-sdram-sync-tig.ucf   Locally Modified          250 

Directory modules
 project/                  Locally Added               0 

Directory modules/project
 SCons.dict.template       Locally Added               0 
 SCons.sw.template         Locally Added               0 
 project-hybrid-main.cpp   Locally Added               0 
 Makefile.top.template     Locally Added               0 
 project-hw.awb            Locally Added               0 
 project-hw-main.bsv       Locally Added               0 
 project-hybrid.awb        Locally Added               0 
 project-hybrid-main.h     Locally Added               0 
 project-sw-main.cpp       Locally Added               0 
 project-hybrid-main.bsv   Locally Added               0 
 SCons.top.template        Locally Added               0 
 project-sw.awb            Locally Added               0 
 project-sw-main.h         Locally Added               0 
 SCons.iface.template      Locally Added               0 
 hardware-done.h           Locally Added               0 
 SCons.hw.template         Locally Added               0 

Directory modules
 application-env/          Locally Added               0 

Directory modules/application-env
 hybrid/                   Locally Added               0 

Directory modules/application-env/hybrid
 base/                     Locally Added               0 

Directory modules/application-env/hybrid/base
 application-env-hybrid-base.cpp Locally Added               0 
 application-env-hybrid-base.h Locally Added               0 
 application-env-hybrid-base.awb Locally Added               0 
 application-env-hybrid-base.bsv Locally Added               0 

Directory modules/application-env
 hw-only/                  Locally Added               0 

Directory modules/application-env/hw-only
 base/                     Locally Added               0 

Directory modules/application-env/hw-only/base
 application-env-hw-only-base.awb Locally Added               0 
 application-env-hw-only-base.bsv Locally Added               0 


* Stage 1 of unraveling HAsim from general Hybrid applications using AWB.

* The new "project" top-level module has been added, in HW, SW, and HW/SW flavors.

* Projects which use Bluespec need an application environment. Right now that's
  just Base. In Stage 2 we will add a Soft Connections environment.
  
* The virtual platform now instantiates the virtual devices directly.

* Added a submodel for "standard virtual devices". This will help in Stage 2
  when we add devices for Stats, Params, and Debug.


* Added the new "Starter" device.

* Disentangled Scratchpad and Central Cache from HAsim. This required changing
  the demarshaller to have a new method that makes it more like a
  soft-connection-wrapped RRR service.

* UCF files updated to reflect the new instantiation hierarchy.

----------
mcadler     Date: Thu Aug 13 08:49:39 EDT 2009  CSN: CSN-platforms-253
                  Thu Aug 13 12:49:39 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks/simulation
 sim-clocks-device.bsv     Locally Modified          252 

Changes to make iverilog work again:
  - Generate a reset at the beginning of the run.
  - A period of 1 doesn't work for mkAbsoluteClock with the generated Verilog.

NOTE: Our clock topology with clock/reset coming from the bottom of the design
instead of the top does not work with the default version of $BLUESPEC_LIB/main.v.
I modified main.v in the Bluespec compiler directory, commenting out the
parameters to "top()".  I had to change the copy in $BLUESPEC_LIB because,
it appears, there is no way to specify a different main.v on the command line.
This only affects iverilog simulation and not synthesized designs.

----------
mpellaue    Date: Thu Aug 13 09:43:32 EDT 2009  CSN: CSN-platforms-254
                  Thu Aug 13 13:43:32 UTC 2009


Directory modules/bluespec/common/fpgaenv/low-level-platform-interface
 llpi.cpp                  Locally Modified          253 


* Add a call to pthread_cancel in the LLPI destructor. This should alleviate the
  race condition that was manifesting.
  
Michael

----------
mpellaue    Date: Mon Aug 17 12:36:17 EDT 2009  CSN: CSN-platforms-258
                  Mon Aug 17 16:36:17 UTC 2009


Directory modules/bluespec/common/fpgaenv/low-level-platform-interface
 platforms-module.h        Locally Modified          257 
 llpi.cpp                  Locally Modified          257 
 platforms-module.cpp      Locally Modified          257 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-server.cpp      Locally Modified          257 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 hybrid-fp.cpp             Locally Modified          257 
 hybrid-fp-command-switches.cpp Locally Added               0 
 hybrid-fp.h               Locally Modified          257 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.cpp    Locally Modified          257 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/streams
 hybrid-streams.cpp        Locally Modified          257 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device.h        Locally Modified          257 
 unix-pipe-device.cpp      Locally Modified          257 

Directory modules/project
 project-hybrid-main.cpp   Locally Modified          257 
 project-hybrid-main.bsv   Locally Modified          257 
 SCons.top.template        Locally Modified          257 


* Command line parameter reorganization.

* Update Scons.top.template to be in sync with hasim/model. We will be
  maintaining 2 Scons scripts until stage 2 of the reorganization is compelete.

Michael P.

----------
emer        Date: Wed Aug 19 15:12:34 EDT 2009  CSN: CSN-platforms-262
                  Wed Aug 19 19:12:34 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-new
 pci-express-c-import-mmap.cpp Locally Modified          261 

Another #include needed very later versions of gcc.

----------
emer        Date: Wed Aug 19 19:33:08 EDT 2009  CSN: CSN-platforms-263
                  Wed Aug 19 23:33:08 UTC 2009


Directory modules/bluespec/librl/base
 librl-bsv-base.awb        Locally Modified          262 

Use %include -type=verilog instead of .prj file.

----------
mpellaue    Date: Fri Aug 21 17:26:25 EDT 2009  CSN: CSN-platforms-264
                  Fri Aug 21 21:26:25 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-exe.apm    Locally Added               0 
 hasim-fpgaenv-hybrid-sim.apm Locally Modified          263 
 std-virtual-devices.apm   Locally Modified          263 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 std-virtual-devices.cpp   Locally Modified          263 
 std-virtual-devices.h     Locally Modified          263 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 hybrid-fp.bsv             Locally Modified          263 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 std-virtual-devices.awb   Locally Modified          263 
 std-virtual-devices.bsv   Locally Modified          263 
 common/                   Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common
 assertions-io/            Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/assertions-io
 assertions-io.cpp         Locally Added               0 
 assertions-io.rrr         Locally Added               0 
 assertions-io.h           Locally Added               0 
 assertions-io.awb         Locally Added               0 
 assertions-io.bsv         Locally Added               0 
 assertions-io.dic         Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common
 common-utility-devices.h  Locally Added               0 
 common-utility-devices.awb Locally Added               0 
 common-utility-devices.bsv Locally Added               0 
 stats-io/                 Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/stats-io
 stats-io.dic              Locally Added               0 
 stats-io.cpp              Locally Added               0 
 stats-io.rrr              Locally Added               0 
 stats-io.h                Locally Added               0 
 stats-io.awb              Locally Added               0 
 stats-io.bsv              Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common
 streams-io/               Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/streams-io
 streams-common.bsh        Locally Added               0 
 hybrid-streams-services.rrr Locally Added               0 
 hybrid-streams.h          Locally Added               0 
 hybrid-streams.awb        Locally Added               0 
 hybrid-streams.bsv        Locally Added               0 
 streamid.dic              Locally Added               0 
 streams.dic               Locally Added               0 
 hybrid-streams.cpp        Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common
 common-utility-null.h     Locally Added               0 
 common-utility-null.awb   Locally Added               0 
 dynamic-parameters-io/    Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/dynamic-parameters-io
 dynamic-parameters-io.h   Locally Added               0 
 dynamic-parameters-io.awb Locally Added               0 
 dynamic-parameters-io.bsv Locally Added               0 
 dynamic-parameters-io.dic Locally Added               0 
 dynamic-parameters-io.cpp Locally Added               0 
 dynamic-parameters-io.rrr Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common
 common-utility-devices.cpp Locally Added               0 
 common-utility-null.bsv   Locally Added               0 
 debug-scan-io/            Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/debug-scan-io
 debug-scan-io.rrr         Locally Added               0 
 debug-scan-io.h           Locally Added               0 
 debug-scan-io.awb         Locally Added               0 
 debug-scan-io.bsv         Locally Added               0 
 debug-scan-io.dic         Locally Added               0 
 debug-scan-io.cpp         Locally Added               0 

Directory modules/application-env/hybrid
 soft-connections/         Locally Added               0 

Directory modules/application-env/hybrid/soft-connections
 application-env-hybrid-soft-conn.h Locally Added               0 
 application-env-hybrid-soft-conn.awb Locally Added               0 
 application-env-hybrid-soft-conn.bsv Locally Added               0 
 default-sw/               Locally Added               0 

Directory modules/application-env/hybrid/soft-connections/default-sw
 connected-application-default-sw.h Locally Added               0 
 connected-application-default-sw.awb Locally Added               0 
 connected-application-default-sw.bsv Locally Added               0 

Directory modules/application-env/hybrid/soft-connections
 application-env-hybrid-soft-conn.cpp Locally Added               0 


* Stage 2 of reorganization and generalization.

* Added virtual devices for Stats, Params, Debug Scan, and Assertions under
"Common Utility Devices"

* Added a new application environment for Soft Connections.

* Updated virtual device collection.

Michael P.

----------
mpellaue    Date: Tue Aug 25 10:27:22 EDT 2009  CSN: CSN-platforms-265
                  Tue Aug 25 14:27:22 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          264 
 fpgaenv-hybrid-htg-v5-pcie.apm Locally Added               0 


* HTG environment made backwards compatable.
* New forwards-compatable environment added.

Michael P.

----------
emer        Date: Tue Aug 25 18:50:49 EDT 2009  CSN: CSN-platforms-266
                  Tue Aug 25 22:50:49 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-exe.apm    Locally Modified          265 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          265 

Directory modules/project
 project-hybrid.awb        Locally Modified          265 

Directory modules/application-env/hybrid/base
 application-env-hybrid-base.awb Locally Modified          265 

Directory modules/application-env/hybrid/soft-connections
 application-env-hybrid-soft-conn.awb Locally Modified          265 

Directory modules/application-env/hybrid/soft-connections/default-sw
 connected-application-default-sw.awb Locally Modified          265 

Some attribute updates.

----------
pellauer    Date: Wed Aug 26 13:50:41 EDT 2009  CSN: CSN-platforms-267
                  Wed Aug 26 17:50:41 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-htg-v5-pcie.apm Locally Modified          266 
 std-virtual-devices.apm   Locally Modified          266 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common
 common-utility-devices.awb Locally Modified          266 
 dynamic-parameters-device/ Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/dynamic-parameters-device
 dynamic-parameters-device.dic Locally Added               0 
 dynamic-parameters-device.cpp Locally Added               0 
 dynamic-parameters-device.rrr Locally Added               0 
 dynamic-parameters-device.h Locally Added               0 
 dynamic-parameters-device.awb Locally Added               0 
 dynamic-parameters-device.bsv Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common
 streams-io/               Locally Removed           266 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/streams-io
 streams-common.bsh        Locally Removed           266 
 hybrid-streams-services.rrr Locally Removed           266 
 hybrid-streams.h          Locally Removed           266 
 hybrid-streams.awb        Locally Removed           266 
 hybrid-streams.bsv        Locally Removed           266 
 streamid.dic              Locally Removed           266 
 streams.dic               Locally Removed           266 
 hybrid-streams.cpp        Locally Removed           266 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common
 assertions-device/        Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/assertions-device
 assertions-device.awb     Locally Added               0 
 assertions-device.bsv     Locally Added               0 
 assertions-device.dic     Locally Added               0 
 assertions-device.cpp     Locally Added               0 
 assertions-device.rrr     Locally Added               0 
 assertions-device.h       Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common
 common-utility-devices.cpp Locally Modified          266 
 dynamic-parameters-io/    Locally Removed           266 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/dynamic-parameters-io
 dynamic-parameters-io.h   Locally Removed           266 
 dynamic-parameters-io.awb Locally Removed           266 
 dynamic-parameters-io.bsv Locally Removed           266 
 dynamic-parameters-io.dic Locally Removed           266 
 dynamic-parameters-io.cpp Locally Removed           266 
 dynamic-parameters-io.rrr Locally Removed           266 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common
 stats-device/             Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/stats-device
 stats-device.rrr          Locally Added               0 
 stats-device.h            Locally Added               0 
 stats-device.awb          Locally Added               0 
 stats-device.bsv          Locally Added               0 
 stats-device.dic          Locally Added               0 
 stats-device.cpp          Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common
 common-utility-devices.h  Locally Modified          266 
 assertions-io/            Locally Removed           266 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/assertions-io
 assertions-io.cpp         Locally Removed           266 
 assertions-io.rrr         Locally Removed           266 
 assertions-io.h           Locally Removed           266 
 assertions-io.awb         Locally Removed           266 
 assertions-io.bsv         Locally Removed           266 
 assertions-io.dic         Locally Removed           266 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common
 common-utility-devices.bsv Locally Modified          266 
 stats-io/                 Locally Removed           266 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/stats-io
 stats-io.dic              Locally Removed           266 
 stats-io.cpp              Locally Removed           266 
 stats-io.rrr              Locally Removed           266 
 stats-io.h                Locally Removed           266 
 stats-io.awb              Locally Removed           266 
 stats-io.bsv              Locally Removed           266 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common
 debug-scan-device/        Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/debug-scan-device
 debug-scan-device.dic     Locally Added               0 
 debug-scan-device.cpp     Locally Added               0 
 debug-scan-device.rrr     Locally Added               0 
 debug-scan-device.h       Locally Added               0 
 debug-scan-device.awb     Locally Added               0 
 debug-scan-device.bsv     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common
 streams-device/           Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/streams-device
 streams-common.bsh        Locally Added               0 
 hybrid-streams-services.rrr Locally Added               0 
 hybrid-streams.h          Locally Added               0 
 hybrid-streams.awb        Locally Added               0 
 hybrid-streams.bsv        Locally Added               0 
 streamid.dic              Locally Added               0 
 streams.dic               Locally Added               0 
 hybrid-streams.cpp        Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common
 debug-scan-io/            Locally Removed           266 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/debug-scan-io
 debug-scan-io.rrr         Locally Removed           266 
 debug-scan-io.h           Locally Removed           266 
 debug-scan-io.awb         Locally Removed           266 
 debug-scan-io.bsv         Locally Removed           266 
 debug-scan-io.dic         Locally Removed           266 
 debug-scan-io.cpp         Locally Removed           266 


* Clarify names of new virtual devices. "streams_device" instead of
  "streams_io_service" and so on. The services are now exclusively in
  platform_services.

* Clarify some type names as well.

Michael P.

----------
pellauer    Date: Wed Aug 26 14:21:14 EDT 2009  CSN: CSN-platforms-268
                  Wed Aug 26 18:21:14 UTC 2009


Directory modules/project
 project-hybrid.awb        Locally Modified          266 


* Added new project_common requirement.

Michael P.

----------
mpellaue    Date: Thu Aug 27 17:13:48 EDT 2009  CSN: CSN-platforms-269
                  Thu Aug 27 21:13:48 UTC 2009


Directory modules/bluespec/librl/storage/cache
 rl-direct-mapped-cache.bsv Locally Modified          268 
 rl-set-assoc-cache.bsv    Locally Modified          268 
 rl-cache.bsv              Locally Modified          268 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 std-virtual-devices.bsv   Locally Modified          268 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/central-cache
 central-cache-interfaces.bsv Locally Modified          268 
 local-mem-central-cache.bsv Locally Modified          268 


* Re-enable stats in the central cache device.

Michael P.

----------
mpellaue    Date: Fri Aug 28 11:46:12 EDT 2009  CSN: CSN-platforms-270
                  Fri Aug 28 15:46:12 UTC 2009


Directory modules/bluespec/librl/storage/cache
 rl-cache.bsv              Locally Modified          269 


* Re-enable a default Null Stat Tracker to the library.

Michael P.

----------
mpellaue    Date: Mon Aug 31 18:51:33 EDT 2009  CSN: CSN-platforms-271
                  Mon Aug 31 22:51:33 UTC 2009


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/starter
 starter-device.cpp        Locally Modified          270 
 starter-device.h          Locally Modified          270 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/dynamic-parameters-device
 dynamic-parameters-device.bsv Locally Modified          270 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/stats-device
 stats-device.h            Locally Modified          270 
 stats-device.cpp          Locally Modified          270 


* For now the stats device and heartbeat are still intertwined.
* Bugfix in dynamic parameters device.

Michael P.

----------
pellauer    Date: Tue Sep  1 14:23:28 EDT 2009  CSN: CSN-platforms-272
                  Tue Sep  1 18:23:28 UTC 2009


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/stats-device
 stats-device.cpp          Locally Modified          271 


* Fix a segfault for deleting stats before Init() had been called.

Michael P.


----------
mcadler     Date: Tue Sep  1 20:27:13 EDT 2009  CSN: CSN-platforms-273
                  Wed Sep  2 00:27:13 UTC 2009


Directory modules/bluespec/librl/storage/cache
 rl-set-assoc-cache.bsv    Locally Modified          272 

Directory modules/bluespec/librl/base
 hash-bits.bsv             Locally Modified          272 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.bsv    Locally Modified          272 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/central-cache
 local-mem-central-cache.awb Locally Modified          272 

- Central cache now supports objects with 64 bit addresses.
- Hashing function now supports inputs up to 128 bits wide.

----------
mpellaue    Date: Thu Sep  3 10:39:54 EDT 2009  CSN: CSN-platforms-274
                  Thu Sep  3 14:39:54 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-xupv2-serial.apm Locally Modified          273 


* Update serial device APM.

Michael P.

----------
mpellaue    Date: Thu Sep  3 11:10:19 EDT 2009  CSN: CSN-platforms-275
                  Thu Sep  3 15:10:19 UTC 2009


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common
 common-utility-devices.cpp Locally Modified          274 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/stats-device
 stats-device.rrr          Locally Modified          274 
 stats-device.h            Locally Modified          274 
 stats-device.awb          Locally Modified          274 
 stats-device.bsv          Locally Modified          274 
 stats-device.cpp          Locally Modified          274 
 stat-vector.cpp           Locally Added               0 


* Stat vectors now work differently. The HW now reports just how long each stat
vector is. Unused slots in the vector no longer show up in the stats output.

* This means that stats are no longer hardwired to NUM_CONTEXTS.

* Stat overflow is also treated differently. Instead of periodically scanning
  the stats, the HW now just reports when an overflow of a single stat occurs.
  This causes the SW to increment it by 32-bit UINT_MAX.

* This should cut down on unnecessary RRR traffic, since only an actual overflow
  will trigger this, rather than a potential time-based overflow.
  
Michael P.

----------
mpellaue    Date: Thu Sep  3 17:34:24 EDT 2009  CSN: CSN-platforms-276
                  Thu Sep  3 21:34:24 UTC 2009


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/starter
 starter-device.cpp        Locally Modified          275 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common
 common-utility-devices.cpp Locally Modified          275 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/stats-device
 stats-device.rrr          Locally Modified          275 
 stats-device.bsv          Locally Modified          275 
 stats-device.cpp          Locally Modified          275 


* Fix another deadlock, this time in the stats device.

Michael P.

----------
emer        Date: Tue Sep  8 14:17:37 EDT 2009  CSN: CSN-platforms-278
                  Tue Sep  8 18:17:37 UTC 2009


Directory config/pm
 platforms/                Locally Removed           277 

Directory config/pm/platforms
 README                    Locally Removed           277 

Directory modules/bluespec/common/fpgaenv/physical-platform/simulation
 sim-physical-platform.awb Locally Modified          277 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup/serial
 xilinx-xup-serial.awb     Locally Modified          277 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup
 xup-physical-platform.awb Locally Modified          277 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-disabled
 htg-v5-pcie-disabled.awb  Locally Modified          277 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.awb   Locally Modified          277 

Directory modules/bluespec/common/fpgaenv/physical-platform/null
 null-physical-platfrom.awb Locally Modified          277 

Directory modules/project
 project-hw.awb            Locally Modified          277 
 project-hybrid.awb        Locally Modified          277 

Directory modules
 platforms/                Locally Removed           277 

Directory modules/platforms
 README                    Locally Removed           277 

Moved MAKE_ALL_TARGET from the root modules (model/project) to the
physical_platform module inside fpgaenv. In the various phyiscal
platforms the default is set appropriately, e.g., exe for simulation,
bit for real hardware. In the physical_platform module, MAKE_ALL_TARGET
is declared as a 'global' parameter so it can be overridden in the
model that requires an fpgaenv.

----------
mcadler     Date: Mon Sep 14 09:21:36 EDT 2009  CSN: CSN-platforms-279
                  Mon Sep 14 13:21:36 UTC 2009


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 hybrid-fp.bsv             Locally Modified          278 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/dynamic-parameters-device
 dynamic-parameters-device.cpp Locally Modified          278 
 dynamic-parameters-device.rrr Locally Modified          278 
 dynamic-parameters-device.bsv Locally Modified          278 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/debug-scan-device
 debug-scan-device.bsv     Locally Modified          278 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/stats-device
 stats-device.rrr          Locally Modified          278 
 stats-device.h            Locally Modified          278 
 stats-device.awb          Locally Modified          278 
 stats-device.bsv          Locally Modified          278 
 stats-device.cpp          Locally Modified          278 
 stat-vector.cpp           Locally Removed           278 

- Refactor the driver interfaces so they all appear the same when possible.
  Drivers now provide getCmd(), peekCmd() and finishCmd() methods.

- Make statistics more robust:
  - Verify that a dictionary entry is used at most once as a statistic.
  - Simplify the protocol for determining the lengths of vector statistics.
  - Make vector statistic output consistent by always emitting a value for
    each vector element.

- Eliminated many Bluespec scheduler warnings.

----------
aparasha    Date: Tue Sep 15 17:49:10 EDT 2009  CSN: CSN-platforms-280
                  Tue Sep 15 21:49:10 UTC 2009


Directory modules/bluespec/common/fpgaenv/fpga-components
 clock-buffers.v           Locally Added               0 
 hardware-fpga-components-virtex5.awb Locally Modified          279 
 clock-buffers.bsv         Locally Added               0 

Directory modules/bluespec/common/fpgaenv/low-level-platform-interface
 llpi.cpp                  Locally Modified          279 
 llpi.h                    Locally Modified          279 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/little-32
 umf-little-32.cpp         Locally Modified          279 
 umf-allocator.cpp         Locally Modified          279 
 umf-little-32.h           Locally Modified          279 
 umf-allocator.h           Locally Modified          279 

- Added clock buffering modules to Virtex 5 FPGA components library.

- Added explicit pthread cancelation point to Monitor thread after
  each Poll. This may fix some exit-time segfaults.

- Added the UMF Allocator and all UMF messages in the allocator's pool
  to the Platforms module hierarchy so that UMF messages can use
  CallbackExit() to exit cleanly if they see an error.

----------
kfleming    Date: Thu Sep 17 13:47:17 KST 2009  CSN: CSN-platforms-281
                  Thu Sep 17 04:47:17 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-htg-v5-pcie.apm Locally Modified          280 

Directory modules/bluespec/librl/storage/cache
 rl-cache.bsv              Locally Modified          280 

Directory modules/bluespec/common/fpgaenv/toplevel-wires/xilinx
 xilinx.xst                Locally Modified          280 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup/serial
 xilinx.sdc                Locally Added               0 
 xilinx.sdf                Locally Added               0 
 xilinx.xst                Locally Modified          280 
 xilinx-xup-serial.awb     Locally Modified          280 
 xilinx-xup-serial.ucf     Locally Modified          280 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup
 xilinx.xst                Locally Modified          280 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-disabled
 htg-v5-pcie-disabled.sdf  Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 xilinx.sdf                Locally Added               0 
 xilinx.xst                Locally Modified          280 
 htg-v5-pcie-enabled.sdc   Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr2-sdram
 ddr2_sdram.sdc            Locally Added               0 

Directory modules/project
 SCons.top.template        Locally Modified          280 


Adding support for more general build process and building synplify

----------
aparasha    Date: Tue Sep 22 14:37:56 EDT 2009  CSN: CSN-platforms-282
                  Tue Sep 22 18:37:56 UTC 2009


Directory modules/bluespec/common/fpgaenv/fpga-components
 user-clock-pll.bsv        Locally Added               0 
 user-clock.bsv            Locally Modified          281 
 user-clock-pll.v          Locally Added               0 
 hardware-fpga-components-virtex5.awb Locally Modified          281 

Added support for using PLLs as frequency synthesizers.

----------
mcadler     Date: Wed Sep 23 10:08:00 EDT 2009  CSN: CSN-platforms-283
                  Wed Sep 23 14:08:00 UTC 2009


Directory modules/bluespec/common/fpgaenv/toplevel-wires/xilinx
 htg-v5-pcie-toplevel-wires.awb Locally Modified          282 
 xup-toplevel-wires.awb    Locally Modified          282 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup
 xup-physical-platform.awb Locally Modified          282 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.awb   Locally Modified          282 

Directory modules/bluespec/common/fpgaenv/physical-platform/null
 null-physical-platfrom.awb Locally Modified          282 

Use Elliott's new FPGA_PART_XILINX instead of FPGA_PART.

----------
mcadler     Date: Thu Sep 24 17:18:03 EDT 2009  CSN: CSN-platforms-284
                  Thu Sep 24 21:18:03 UTC 2009


Directory modules/bluespec/common/fpgaenv/fpga-components
 user-clock-pll.bsv        Locally Modified          283 
 user-clock-pll.v          Locally Modified          283 

Directory modules/project
 SCons.top.template        Locally Modified          283 

Directory drivers/linux/hasim
 hasim-fpga-ctrl.c         Locally Modified          283 

- Add input divider configuration option to PLL configuration.
- SCons script no longer builds a download script since not all FPGAs are
  programmed using Xilinx impact.
- hasim-fpga-ctrl can now deal with ACP.  The code is getting a bit messy
  since it has no idea whether the machine uses PCIe or not.  A configuration
  file would be good.


----------
aparasha    Date: Fri Sep 25 14:33:44 EDT 2009  CSN: CSN-platforms-285
                  Fri Sep 25 18:33:44 UTC 2009


Directory modules/bluespec/common/fpgaenv/low-level-platform-interface
 platforms-module.h        Locally Modified          284 
 platforms-module.cpp      Locally Modified          284 

Updated init/uninit sequences to call Init() on children modules in the
order they were constructed, and to call Uninit() in the reverse order.

----------
mcadler     Date: Wed Sep 30 13:04:56 EDT 2009  CSN: CSN-platforms-286
                  Wed Sep 30 17:04:56 UTC 2009


Directory modules/bluespec/common/fpgaenv/fpga-components
 user-clock-pll.bsv        Locally Modified          285 

Compute PLL parameters given input frequency and desired output frequency.

----------
mcadler     Date: Thu Oct  1 13:18:01 EDT 2009  CSN: CSN-platforms-287
                  Thu Oct  1 17:18:01 UTC 2009


Directory modules/bluespec/common/fpgaenv/low-level-platform-interface/local-mem
 local-mem-bram.bsv        Locally Modified          285 

Put FIFOs between request methods and the BRAM to break a critical path
in standard models that use local memory BRAM to hold the central cache's data.
Without the FIFOs all models were limited to 75MHz.

----------
kfleming    Date: Thu Oct 15 16:26:33 KST 2009  CSN: CSN-platforms-290
                  Thu Oct 15 07:26:33 UTC 2009


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/serial
 SerialStream.h            Locally Modified          289 
 serial-physical-channel.awb Locally Modified          289 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/starter
 starter-device.h          Locally Modified          289 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.awb   Locally Modified          289 

Directory modules/project
 project-hybrid.awb        Locally Modified          289 


Reworking file dependencies to have allow top level synthesis boundaries to actually build.

----------
mdk         Date: Fri Oct 16 13:43:08 KST 2009  CSN: CSN-platforms-291
                  Fri Oct 16 04:43:08 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-exe-serial-ChanIO-loopback.apm Locally Added               0 
 std-virtual-devices.apm   Locally Modified          290 

Directory config/pm/platforms/tests
 chanIO_loopback_sim.apm   Locally Added               0 
 chanIO_loopback_xup2.apm  Locally Modified          290 

Directory modules/bluespec/tests/NullConnectedApp
 AudioProcessor.bsv        Locally Modified          290 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/loopback
 loopback-channelio.bsv    Locally Modified          290 
 loopback-channelio.cpp    Locally Modified          290 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/null
 null-rrr-client.h         Locally Added               0 
 null-rrr-server.cpp       Locally Added               0 
 marshaller.bsv            Locally Added               0 
 null-rrr.awb              Locally Modified          290 
 null-rrr.bsv              Locally Modified          290 
 null-rrr-server.h         Locally Added               0 
 null-rrr.bsh              Locally Added               0 
 null-rrr-client.cpp       Locally Added               0 
 demarshaller.bsv          Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/starter
 starter-device.cpp        Locally Modified          290 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 null-virtual-devices.awb  Locally Added               0 
 null-virtual-devices.cpp  Locally Added               0 
 null-virtual-devices.h    Locally Added               0 
 null-virtual-devices.bsv  Locally Added               0 



getting null modules to work takes some real effort


----------
kfleming    Date: Fri Oct 23 02:58:50 EDT 2009  CSN: CSN-platforms-292
                  Fri Oct 23 06:58:50 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled-synplify.awb Locally Added               0 
 htg-v5-pcie-enabled-synplify.ucf Locally Added               0 
 htg-v5-pcie-enabled.sdc   Locally Modified          291 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr2-sdram
 ddr2-sdram-device-synplify.awb Locally Added               0 
 ddr2-sdram-sync-tig-synplify.ucf Locally Added               0 
 ddr2_sdram-synplify.ucf   Locally Added               0 


Adding some new files for synplify

----------
mcadler     Date: Fri Oct 23 15:37:47 EDT 2009  CSN: CSN-platforms-293
                  Fri Oct 23 19:37:47 UTC 2009


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/stats-device
 stats-device.rrr          Locally Modified          292 
 stats-device.h            Locally Modified          292 
 stats-device.bsv          Locally Modified          292 
 stats-device.cpp          Locally Modified          292 

More flexible array generation code.  Arrays can now be constructed from multiple
hardware ring stops.

----------
kfleming    Date: Sat Oct 24 17:41:24 KST 2009  CSN: CSN-platforms-294
                  Sat Oct 24 08:41:24 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-xupv2-serial.apm Locally Modified          293 
 fpgaenv-hybrid-htg-v5-pcie-synplify.apm Locally Added               0 
 xup-virtual-devices.apm   Locally Added               0 

Directory modules/bluespec/common/fpgaenv/fpga-components
 user-clock-pll.bsv        Locally Modified          293 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/central-cache
 null-central-cache.awb    Locally Modified          293 
 null-central-cache.bsv    Locally Modified          293 

New synplify fpgaenv and some minor bug fixes.

----------
kfleming    Date: Sun Oct 25 16:27:23 KST 2009  CSN: CSN-platforms-296
                  Sun Oct 25 07:27:23 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.awb   Locally Modified          295 


Fixed typo in htg AWB...

----------
mdk         Date: Tue Oct 27 11:44:55 KST 2009  CSN: CSN-platforms-297
                  Tue Oct 27 02:44:55 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-exe-serial-ChanIO-loopback.apm Locally Modified          296 

Directory config/pm/platforms/tests
 chanIO_loopback_sim.apm   Locally Modified          296 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/loopback
 loopback-channelio.cpp    Locally Modified          296 
 loopback-channelio.h      Locally Modified          296 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 null-starter/             Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/null-starter
 null-starter-device.awb   Locally Added               0 
 starter-device.cpp        Locally Added               0 
 starter-device.h          Locally Added               0 
 starter-device.bsv        Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup/serial
 xilinx.sdc                Locally Modified          296 
 xilinx.sdf                Locally Modified          296 


changing the sdc and sdf files to accomodate elliott's changes to the synthesis environment

some other stuff to the loopback device which still doesn't work and is waiting on Angshu for his input

----------
mcadler     Date: Tue Oct 27 12:02:57 EDT 2009  CSN: CSN-platforms-298
                  Tue Oct 27 16:02:57 UTC 2009


Directory modules/bluespec/common/fpgaenv/low-level-platform-interface
 platforms-module.cpp      Locally Modified          297 

Uninit() was skipping the first child.

----------
mdk         Date: Thu Oct 29 17:00:00 KST 2009  CSN: CSN-platforms-299
                  Thu Oct 29 08:00:00 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-xupv2-serial.apm Locally Modified          298 

Directory modules/bluespec/librl/storage
 scoreboard-fifo.awb       Locally Removed           298 


Removing a redundant module

----------
kfleming    Date: Mon Nov  2 19:51:18 EST 2009  CSN: CSN-platforms-300
                  Tue Nov  3 00:51:18 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/serial/ublaze-serial
 serial-device.bsv         Locally Modified          299 
 firmware.elf              Locally Modified          299 

Patch to fix early synchronization bug between phy and hardware.

----------
kfleming    Date: Tue Nov  3 17:40:00 KST 2009  CSN: CSN-platforms-301
                  Tue Nov  3 08:40:00 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-xupv2-serial-synplify.apm Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup/serial
 xilinx.sdf                Locally Modified          300 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/serial/ublaze-serial
 serial-device-ublaze-synplify.awb Locally Added               0 
 serial-device-ublaze-tig.ucf Locally Added               0 
 serial-device-ublaze.awb  Locally Modified          300 
 serial-device-ublaze-tig-synplify.ucf Locally Added               0 


Added TIG statements to ucf to allow upclocking the models.

----------
pellauer    Date: Tue Nov  3 10:57:42 EST 2009  CSN: CSN-platforms-302
                  Tue Nov  3 15:57:42 UTC 2009


Directory modules/bluespec/librl/base
 bluespec-def.bsv          Locally Modified          301 


* Updating the definition of Alias with a functional dependence A -> B. 
* This allows the definition to work with the new bluespec compiler 
  (also it's probably how it should have been written to start).
* There's a small change in functionality, in that the order is now fixed to:
  Alias#(t_EXISTING, t_NEW_ALIAS), however that's fine since we were using it
  like that any way and didn't depend on it to be commutative.
  
Michael P.

----------
mcadler     Date: Tue Nov  3 11:05:29 EST 2009  CSN: CSN-platforms-303
                  Tue Nov  3 16:05:29 UTC 2009


Directory modules/bluespec/librl/base
 fifo-functions.bsv        Locally Added               0 
 librl-bsv-base.awb        Locally Modified          302 

Add a functional, internally stateless, implementation of a FIFO.  Functions
take the state of the FIFO as a parameter.  Those that update the FIFO return
the new state.  The state is simply a struct that can be stored in any memory.

Clearly the FIFO has different semantics than usual, since reading and writing
from different rules in the same cycle is impossible.  The code simply manages
a ring buffer.  The most likely use is in algorithms that need a large array
of relatively small FIFOs.

----------
mcadler     Date: Wed Nov  4 20:22:51 EST 2009  CSN: CSN-platforms-304
                  Thu Nov  5 01:22:51 UTC 2009


Directory modules/bluespec/common/fpgaenv/toplevel-wires/xilinx
 xilinx.xst                Locally Modified          303 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup/serial
 xilinx.xst                Locally Modified          303 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup
 xilinx.xst                Locally Modified          303 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 xilinx.xst                Locally Modified          303 

Directory modules/project
 SCons.top.template        Locally Modified          303 
 SCons.hw.template         Locally Modified          303 

Build each synthesis boundary as a separate invocation of Xilinx Xst, treating
all other synthesis regions as black boxes.

The SCons script waits for all Bluespec compilations to complete before
beginning any Xst.  While this may not be completely necessary, the logic
for building black boxes would have to be more complex.  All runs of Xst
are independent, and SCons figures this out, so Xst building is parallel.

----------
mcadler     Date: Fri Nov  6 07:37:21 EST 2009  CSN: CSN-platforms-305
                  Fri Nov  6 12:37:21 UTC 2009


Directory modules/bluespec/librl/base
 fifo-functions.bsv        Locally Modified          303 

Directory modules/project
 SCons.top.template        Locally Modified          304 

- Rewrite FIFO functions using a shift on deq instead of a ring buffer.

- Delete Xilinx project database stub files at the start of map because they
  can be corrupted by parallel xst builds.  The files aren't needed for
  command line tools.  The problem of warnings and errors when xst starts
  in parallel persist because I can't figure out how to keep xst from
  trying to create a local database.  Unless xst actually aborts (very rare)
  the messages appear to cause no harm.

----------
mcadler     Date: Fri Nov  6 14:30:19 EST 2009  CSN: CSN-platforms-306
                  Fri Nov  6 19:30:19 UTC 2009


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/stats-device
 stats-device.h            Locally Modified          304 
 stats-device.cpp          Locally Modified          304 

Add a hack for software clients that want to emit data to the statistics file.
Right now the data is unstructured.  Eventually we should switch to a real
package.

----------
mcadler     Date: Wed Nov 11 14:05:02 EST 2009  CSN: CSN-platforms-309
                  Wed Nov 11 19:05:02 UTC 2009


Directory modules/bluespec/librl/base
 fifo-functions.bsv        Locally Modified          306 

Add a function to ask how many slots are busy in a FIFO.

----------
kfleming    Date: Sat Nov 14 16:40:27 KST 2009  CSN: CSN-platforms-310
                  Sat Nov 14 07:40:27 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-xupv2-serial.apm Locally Modified          309 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup/serial
 xilinx.xst                Locally Modified          309 
 xilinx-xup-serial.awb     Locally Modified          309 
 xilinx-xup-serial.bsv     Locally Modified          309 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 xilinx.xst                Locally Modified          309 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 ddr/                      Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr
 clock_generator_0_wrapper.vhd Locally Added               0 
 ddr-sdram-device.awb      Locally Added               0 
 ddr-sdram-verilog-import.bsv Locally Added               0 
 ddr_sdram.v               Locally Added               0 
 ddr_sdram_wrapper.v       Locally Added               0 
 ddr-sdram-device.bsv      Locally Added               0 
 ddr_sdram_wrapper.ngc     Locally Added               0 
 clock_generator_0_wrapper.ngc Locally Added               0 
 NPICommon.bsv             Locally Added               0 
 NPIMaster.bsv             Locally Added               0 
 ddr_sdram.ucf             Locally Added               0 
 ddr_sdram_xilinx.v        Locally Added               0 


Adding files for Xilinx MPMC DRAM support.  Doesn't work yet (at least not reliably), but the skeleton is essentially here.  The issue seems to be the the bsv and mpmc are not sharing the correct reset. 

----------
mcadler     Date: Mon Nov 16 08:35:28 EST 2009  CSN: CSN-platforms-311
                  Mon Nov 16 13:35:28 UTC 2009


Directory modules/bluespec/librl/base
 fifo-functions.bsv        Locally Modified          310 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 marshaller.bsv            Locally Modified          310 

- Wrap responses from funcFIFO_peek() in a Maybe#() to detect unoccupied slots.
- Add a notEmpty() method to marshaller.

----------
kfleming    Date: Tue Nov 17 01:56:40 EST 2009  CSN: CSN-platforms-312
                  Tue Nov 17 06:56:40 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr
 ddr-sdram-device.awb      Locally Modified          311 
 ddr-sdram-verilog-import.bsv Locally Modified          311 
 clock_generator_0_wrapper.ngc Locally Removed           311 
 NPICommon.bsv             Locally Modified          311 
 NPIMaster.bsv             Locally Modified          311 
 ddr_sdram_xilinx.v        Locally Modified          311 
 clock_generator_ddr_wrapper.ngc Locally Added               0 
 clock_generator_0_wrapper.vhd Locally Removed           311 
 proc_sys_reset_ddr_wrapper.ngc Locally Added               0 
 ddr_sdram.v               Locally Modified          311 
 ddr-sdram-device.bsv      Locally Modified          311 
 ddr_sdram_wrapper.ngc     Locally Modified          311 
 ddr_sdram_tig.ucf         Locally Added               0 

Directory modules/project
 SCons.top.template        Locally Modified          311 

Fixed bug in SCons where top level build was not being forced in single synthesis boundary designs.  Also, some updates to the ddr design.  Still not working, but several bugs have been fixed.
----------
kfleming    Date: Tue Nov 17 21:05:06 EST 2009  CSN: CSN-platforms-313
                  Wed Nov 18 02:05:06 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr
 clock_generator_ddr_wrapper.ngc Locally Modified          312 
 proc_sys_reset_ddr_wrapper.ngc Locally Modified          312 
 ddr_sdram_wrapper.ngc     Locally Modified          312 
 NPICommon.bsv             Locally Modified          312 
 NPIMaster.bsv             Locally Modified          312 

Fixed ngc interface to DRAM.  It now works.  more testing will come soon.
----------
mcadler     Date: Wed Nov 18 11:45:24 EST 2009  CSN: CSN-platforms-314
                  Wed Nov 18 16:45:24 UTC 2009


Directory modules/bluespec/common/fpgaenv/low-level-platform-interface
 llpi.cpp                  Locally Modified          313 
 llpi.h                    Locally Modified          313 

Wait for the monitor thread to die before continuing.

----------
mcadler     Date: Fri Nov 20 19:35:19 EST 2009  CSN: CSN-platforms-315
                  Sat Nov 21 00:35:19 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-xupv2-serial.apm Locally Modified          314 
 fpgaenv-hybrid-htg-v5-pcie-synplify.apm Locally Modified          314 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          314 
 fpgaenv-hybrid-xupv2-serial-synplify.apm Locally Modified          314 
 fpgaenv-hybrid-exe.apm    Locally Modified          314 
 fpgaenv-hybrid-exe-serial-ChanIO-loopback.apm Locally Modified          314 
 hasim-fpgaenv-hybrid-sim.apm Locally Modified          314 
 fpgaenv-hybrid-htg-v5-pcie.apm Locally Modified          314 
 fpgaenv-hybrid-xupv2-serial-chanIO-loopback.apm Locally Modified          314 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-server.bsv      Locally Modified          314 
 basic-rrr-client.bsv      Locally Modified          314 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf
 little-32/                Locally Removed           314 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/little-32
 umf-little-32.cpp         Locally Removed           314 
 umf-allocator.cpp         Locally Removed           314 
 umf-little-32.h           Locally Removed           314 
 umf-allocator.h           Locally Removed           314 
 umf-little-32.awb         Locally Removed           314 
 umf-little-32.bsv         Locally Removed           314 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/little-endian
 umf-little-endian.cpp     Locally Added               - 
 umf-little-endian.h       Locally Added               - 
 umf-little-endian.awb     Locally Added               - 
 umf-little-endian.bsv     Locally Added               - 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device.awb      Locally Modified          314 
 unix-pipe-device.bsv      Locally Modified          314 
 unix-pipe-device-bdpi.c   Locally Modified          314 
 unix-pipe-device-bdpi.h   Locally Modified          314 

- Fix a deadlock in unix pipe device when both the Bluespec side and the host
  side are stuck in block writes to their ends of the pipes.  Fixed by adding
  a pipe_can_write() BDPI method.  This is not the only source of deadlocks.
  It is still possible to build a protocol that deadlocks due to an
  algorithmic loop.  The host side still uses blocking writes.

- Convert umf-little-32 to support either 32 or 64 bit chunks.
- Simplify that AWB parameters controlling object sizes.  Anything that
  can be computed from another parameter is now gone.
- Make the Unix pipe device work wither with either 32 or 64 bit chunks.  The
  size is derived automatically from the UMF size.
- UMF header encode/decode field sizes now come from the AWB parameters.
- Add a special 1-bit field to the UMF header for use in the physical
  channel.  The ACP channel uses the field to differentiate between the
  start of a new packet vs. unused parts of a buffer.

- Tried to update all the platform configurations for the renamed
  umf-little-endian.  In case I missed any, umf-little-endian is a drop-in
  replacement for the old umf-little-32.  The default chunk size remains
  32 bits.

----------
mcadler     Date: Mon Nov 23 15:08:59 EST 2009  CSN: CSN-platforms-316
                  Mon Nov 23 20:08:59 UTC 2009


Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/little-endian
 umf-little-endian.h       Locally Modified          315 

Add a way to set the physical channel flag in a header.

----------
mcadler     Date: Mon Nov 23 19:26:21 EST 2009  CSN: CSN-platforms-317
                  Tue Nov 24 00:26:21 UTC 2009


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-dma
 dma-physical-channel.cpp  Locally Modified          316 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/serial
 serial-physical-channel.cpp Locally Modified          316 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-csr
 pcie-physical-channel.cpp Locally Modified          316 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/sim
 sim-physical-channel.cpp  Locally Modified          316 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/loopback
 loopback-channelio.cpp    Locally Modified          316 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/little-endian
 umf-little-endian.cpp     Locally Modified          316 
 umf-little-endian.h       Locally Modified          316 
 umf-allocator.cpp         Locally Modified          316 
 umf-allocator.h           Locally Modified          316 

Directory modules/project
 SCons.top.template        Locally Modified          316 

UMF performance changes (about 20% boost on the tests I measured):

- Allocator:
  - Use a lock-free linked list (still supports multiple threads) instead of
    pthreads mutex.
  - Switch to C++ overloaded new/delete for the allocator instead of
    non-standard methods.

- UMF:
  - Move performance-critical routines to the .h file and tag them inline.
  - Allocate the message as part of the UMF_MESSAGE_CLASS instead of through
    a pointer.  It was being allocated at a fixed size already.
  - Switch from assert() to Asim's ASSERT and change the SCons script
    so ASSERT is compiled only in debug mode.

----------
mcadler     Date: Wed Nov 25 11:04:35 EST 2009  CSN: CSN-platforms-318
                  Wed Nov 25 16:04:35 UTC 2009


Directory modules/bluespec/common/fpgaenv/low-level-platform-interface
 llpi.cpp                  Locally Modified          317 
 llpi.h                    Locally Modified          317 

Definie Uninit() that is invoked only on abnormal exit (e.g. due to a ^C).
Uninit() calls the destructors for the channel and physical devices, which
appears to make the ACP code close the device cleanly.

----------
kfleming    Date: Sat Nov 28 01:52:03 KST 2009  CSN: CSN-platforms-319
                  Fri Nov 27 16:52:03 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr
 NPIMaster.bsv             Locally Modified          318 


Fixed NPI to support single word transfers, which required address latch before data transfer was attempted.  

----------
kfleming    Date: Sat Nov 28 14:42:02 KST 2009  CSN: CSN-platforms-320
                  Sat Nov 28 05:42:02 UTC 2009


Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/little-endian
 umf-little-endian.h       Locally Modified          319 

Directory modules/project
 SCons.top.template        Locally Modified          319 

Fixed build bug in umf. Apparently memcpy is not automatically included in Karmic Koala, even though Jaunty Jackalope has no problems.  Also, fixed build problem wherein the top level exe was not rebuilt after changes in platforms.

----------
kfleming    Date: Sat Nov 28 14:48:42 KST 2009  CSN: CSN-platforms-320
                  Sat Nov 28 05:48:42 UTC 2009


Directory admin
 mytags                    Locally Modified          319 

Directory admin/packages
 platforms                 Locally Modified          319 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/little-endian
 umf-little-endian.h       Locally Modified          319 

Directory modules/project
 SCons.top.template        Locally Modified          319 

Directory .
 changes                   Locally Modified          319 

Added include for memcpy in umf.  This seems to be necessary on some build platforms.  Also, fixed software side bug where changes in platform were not forcing a model rebuild.

----------
kfleming    Date: Sat Nov 28 15:39:21 KST 2009  CSN: CSN-platforms-321
                  Sat Nov 28 06:39:21 UTC 2009


Directory modules/bluespec/librl/base
 memory-interface.bsv      Locally Modified          320 

Added BURST_MEMORY_IFC and friends

----------
kfleming    Date: Sat Nov 28 16:55:53 KST 2009  CSN: CSN-platforms-322
                  Sat Nov 28 07:55:53 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr
 ddr_sdram_tig.ucf         Locally Modified          321 

Removed vestigal debugging registers from ucf

----------
mcadler     Date: Sun Nov 29 13:46:39 EST 2009  CSN: CSN-platforms-323
                  Sun Nov 29 18:46:39 UTC 2009


Directory modules/project
 SCons.hw.template         Locally Modified          322 

Add build of .ba files to the set of objects built as a side effect of building
the .bo files.  I suspect this should fix the problems Elliott was trying
to fix up at the top level SCons script.  Elliott's most recent changes
are unstable, with regressions in Hudson failing.  This change fixes that
instability, since SCons now knows it built the .ba files.

----------
kfleming    Date: Mon Nov 30 19:05:46 KST 2009  CSN: CSN-platforms-324
                  Mon Nov 30 10:05:46 UTC 2009


Directory modules/bluespec/librl/base
 memory-interface.bsv      Locally Modified          323 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr
 ddr-sdram-device.awb      Locally Modified          323 
 ddr-sdram-device.bsv      Locally Modified          323 
 NPICommon.bsv             Locally Modified          323 
 NPIMaster.bsv             Locally Modified          323 

DDR now ascribes to BURST_MEMORY_IFC, using a wrapper to translate the NPI to BURST_MEMORY_IFC

----------
kfleming    Date: Tue Dec  1 00:04:49 KST 2009  CSN: CSN-platforms-325
                  Mon Nov 30 15:04:49 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr
 ddr-sdram-device.bsv      Locally Modified          324 
 ddr_sdram_tig.ucf         Locally Modified          324 

Fixed the conversion module to prevent more than one outstanding read at a time.  This was causing a number of bugs in the PHY, including overwhelming its limit of 4 outstanding transactions, and I think causing some issue in back to back addrAck's. This should be fixed at some point in an effort to mine out maximum parallelism.  

----------
kfleming    Date: Tue Dec  1 19:32:41 KST 2009  CSN: CSN-platforms-326
                  Tue Dec  1 10:32:41 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr
 ddr-sdram-device.bsv      Locally Modified          325 

Added debug registers to the DDR 

----------
mcadler     Date: Tue Dec  1 16:31:13 EST 2009  CSN: CSN-platforms-327
                  Tue Dec  1 21:31:13 UTC 2009


Directory modules/bluespec/common/fpgaenv/low-level-platform-interface
 llpi.cpp                  Locally Modified          326 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/basic
 basic-channelio.cpp       Locally Modified          326 
 basic-channelio.h         Locally Modified          326 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-dma
 dma-physical-channel.cpp  Locally Modified          326 
 dma-physical-channel.h    Locally Modified          326 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-csr
 pcie-physical-channel.cpp Locally Modified          326 
 pcie-physical-channel.h   Locally Modified          326 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-server.cpp      Locally Modified          326 
 basic-rrr-server.h        Locally Modified          326 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/null
 null-rrr-server.h         Locally Modified          326 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/starter
 starter-device.cpp        Locally Modified          326 
 starter-device.h          Locally Modified          326 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 hybrid-fp.cpp             Locally Modified          326 
 hybrid-fp.h               Locally Modified          326 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/dynamic-parameters-device
 dynamic-parameters-device.h Locally Modified          326 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/debug-scan-device
 debug-scan-device.cpp     Locally Modified          326 
 debug-scan-device.h       Locally Modified          326 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/assertions-device
 assertions-device.cpp     Locally Modified          326 
 assertions-device.h       Locally Modified          326 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/stats-device
 stats-device.h            Locally Modified          326 
 stats-device.cpp          Locally Modified          326 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/streams-device
 hybrid-streams.h          Locally Modified          326 
 hybrid-streams.cpp        Locally Modified          326 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/null-starter
 starter-device.cpp        Locally Modified          326 
 starter-device.h          Locally Modified          326 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.cpp    Locally Modified          326 
 hybrid-mem-scratch.h      Locally Modified          326 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/shared-memory/standard
 standard-shared-memory-server.cpp Locally Modified          326 
 standard-shared-memory-server.h Locally Modified          326 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/streams
 hybrid-streams.h          Locally Modified          326 
 hybrid-streams.cpp        Locally Modified          326 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/little-endian
 umf-little-endian.cpp     Locally Modified          326 
 umf-little-endian.h       Locally Modified          326 

Directory modules/project
 SCons.top.template        Locally Modified          326 
 SCons.hw.template         Locally Modified          326 

- SCons build dependence:
  - Some versions of SCons appear to look for changes only in immediate children
    of a derived build.  When the children don't change the derived build is
    not rebuilt.  This was a problem for our scheme since the parent of a synth
    boundary is the Verilog wrapper, which changes only when the soft connections
    change.  Fixed by adding an md5 signature of the Bluespec-generated Verilog
    module to the Verilog wrapper module.
  - Remove dependence on generated .ba files in SCons.top.template.  No longer
    needed.

- Performance changes:  Compared to PCIe, the ACP I/O stream is a fire hose.
  Waste any time in key I/O code and we don't keep up with the bus.

  - Change the polling loop in LLPI to favor channel I/O.  Only poll
    the expensive and less likely RRR servers and clients every 16th iteration.

  - Eliminate the channel lock preventing simultaneous reads and writes in
    channel I/O.  Clients that require a lock (e.g. PCIe) must handle that
    on their own.

  - Reduce the cost of RRR server I/O:

    - Don't iterate over unused server IDs

    - Change the server Poll() method to return a bool allowing Poll() to
      say it no longer needs to be called.

    - Remove virtual Poll methods from RRR servers that don't need to be polled.
      They will use the default implementation in the base class that simply
      returns false, meaning "don't call me again."

  - Optimize the UMF reverse extraction path.

----------
kfleming    Date: Thu Dec  3 00:53:38 KST 2009  CSN: CSN-platforms-328
                  Wed Dec  2 15:53:38 UTC 2009


Directory modules/bluespec/librl/base
 memory-interface.bsv      Locally Modified          327 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr
 ddr-sdram-device.bsv      Locally Modified          327 
 NPIMaster.bsv             Locally Modified          327 
 ddr_sdram_xilinx.v        Locally Modified          327 

Changed BURST_MEM_IFC to have single command interface.  This gives a clearer, more supportable semantics to the end user.

----------
kfleming    Date: Thu Dec  3 22:34:48 KST 2009  CSN: CSN-platforms-329
                  Thu Dec  3 13:34:48 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/serial/ublaze-serial
 serial-device-ublaze-tig.ucf Locally Modified          328 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr
 ddr-sdram-device-synplify.awb Locally Added               0 
 ddr_sdram_xilinx.v        Locally Modified          328 
 ddr_sdram_synplify.ucf    Locally Added               0 
 ddr_sdram_tig_synplify.ucf Locally Added               0 
 ddr_sdram_tig.ucf         Locally Modified          328 

Fixed Synplify build.  Still doesn't do recursion however.  

----------
kfleming    Date: Thu Dec  3 23:44:56 KST 2009  CSN: CSN-platforms-330
                  Thu Dec  3 14:44:56 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-xupv2-serial-synplify.apm Locally Modified          329 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr
 ddr-sdram-device-synplify.awb Locally Modified          329 

Fixed pointer to synplify ucf file

----------
kfleming    Date: Fri Dec  4 14:01:46 KST 2009  CSN: CSN-platforms-331
                  Fri Dec  4 05:01:46 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup/serial
 xilinx.sdc                Locally Modified          330 
 xilinx-xup-serial.awb     Locally Modified          330 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr
 NPIMaster.bsv             Locally Modified          330 
 ddr-sdram-device-synplify.awb Locally Modified          330 

Directory modules/project
 SCons.top.template        Locally Modified          330 

Added timing files for DDR, changed build of SDCs to make recompilation faster and simpler

----------
kfleming    Date: Fri Dec  4 14:14:26 KST 2009  CSN: CSN-platforms-332
                  Fri Dec  4 05:14:26 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr
 ddr_sdram.sdc             Locally Added               0 

Forgot to add ddr timing file

----------
kfleming    Date: Sat Dec  5 12:59:27 KST 2009  CSN: CSN-platforms-333
                  Sat Dec  5 03:59:27 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-xupv2-serial-synplify.apm Locally Modified          332 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr
 NPIMaster.bsv             Locally Modified          332 
 ddr-sdram-device-synplify.awb Locally Modified          332 
 ddr-sdram-device.bsv      Locally Modified          332 
 ddr_sdram.sdc             Locally Modified          332 
 ddr_sdram_synplify.ucf    Locally Modified          332 
 ddr_sdram_tig_synplify.ucf Locally Modified          332 

Synplify now sees the dram ngc.  This leads to better synthesis results.  

----------
kfleming    Date: Sat Dec  5 16:02:47 KST 2009  CSN: CSN-platforms-334
                  Sat Dec  5 07:02:47 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr
 NPIMaster.bsv             Locally Modified          333 

Added floating check for init done.  This seems to fix the size one issue.

----------
mcadler     Date: Sat Dec  5 15:12:19 EST 2009  CSN: CSN-platforms-335
                  Sat Dec  5 20:12:19 UTC 2009


Directory modules/bluespec/librl/base
 extends.bsv               Locally Modified          334 

Add a resize() function that takes anything packable into bits and returns it
as any other bit-packable type.  The original value is truncated or zero
extended as needed.

I have no idea why we didn't add this earlier.

----------
mcadler     Date: Mon Dec  7 18:36:42 EST 2009  CSN: CSN-platforms-337
                  Mon Dec  7 23:36:42 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-htg-v5-pcie-synplify.apm Locally Modified          336 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          336 
 fpgaenv-htg-hwonly.apm    Locally Modified          336 
 fpgaenv-hybrid-htg-v5-pcie.apm Locally Modified          336 

Directory modules/bluespec/common/fpgaenv/low-level-platform-interface/local-mem
 local-mem-ddr2.bsv        Locally Modified          336 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/central-cache
 null-central-cache.bsv    Locally Modified          336 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/local
 scratch-interfaces.bsv    Locally Added               0 
 local-mem-scratch.awb     Locally Modified          336 
 local-mem-scratch.bsv     Locally Modified          336 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-disabled
 htg-v5-pcie-disabled.awb  Locally Modified          336 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled-synplify.awb Locally Modified          336 
 htg-v5-pcie-enabled.awb   Locally Modified          336 
 htg-v5-pcie-enabled.bsv   Locally Modified          336 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr2-sdram
 ddr2-sdram-device.bsv     Locally Modified          336 
 ddr2-sdram-device-synplify.awb Locally Modified          336 
 ddr2_sdram.ucf            Locally Modified          336 
 ddr2-sdram-device.awb     Locally Modified          336 
 ddr2_sdram-synplify.ucf   Locally Modified          336 

- Fix the scratchpad code that uses local memory with no central cache.

- Rename DDR2 memory interfaces to remove the type of memory (SDRAM, SRAM, etc.)
  since that is of no consequence at higher levels.

----------
kfleming    Date: Wed Dec  9 12:40:33 KST 2009  CSN: CSN-platforms-338
                  Wed Dec  9 03:40:33 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks/single-ended
 single-ended-clocks-device-simulation.awb Locally Added               0 
 single-ended-clocks-device-simulation.bsv Locally Added               0 
 single-ended-clocks-device-simulation.v Locally Added               0 

Directory modules/project
 SCons.top.template        Locally Modified          337 

Patched the verilog simulator builds.  Work is not complete, but the current scons will build a functional, vpi-based simulator.  Currently, benchmarks scripts must link to the *.vpi files in the hw directory.  I will try to fix this next.

----------
kfleming    Date: Thu Dec 10 20:36:02 KST 2009  CSN: CSN-platforms-339
                  Thu Dec 10 11:36:02 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-xupv2-serial.apm Locally Modified          338 
 fpgaenv-hybrid-xupv2-serial-synplify.apm Locally Modified          338 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup/serial
 xilinx-xup-serial.awb     Locally Modified          338 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled-synplify.awb Locally Modified          338 
 htg-v5-pcie-enabled.awb   Locally Modified          338 

Directory modules/project
 SCons.top.template        Locally Modified          338 

Made a "synthesis tool" build option, which triggers the xst or synplify build paths.  This is needed to run fpga based regressions for 6.375.  

----------
kfleming    Date: Sat Dec 12 22:43:37 KST 2009  CSN: CSN-platforms-340
                  Sat Dec 12 13:43:37 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr
 ddr_sdram.ucf             Locally Modified          339 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-new
 pci-express-c-import-mmap.cpp Locally Modified          339 

Directory modules/project
 synplify.sdc              Locally Added               0 
 project-hybrid.awb        Locally Modified          339 
 SCons.top.template        Locally Modified          339 
 SCons.iface.template      Locally Modified          339 
 SCons.hw.template         Locally Modified          339 

Adding support for unified synplify and xst build

----------
kfleming    Date: Mon Dec 14 18:42:43 KST 2009  CSN: CSN-platforms-341
                  Mon Dec 14 09:42:43 UTC 2009


Directory modules/project
 project-hybrid.awb        Locally Modified          340 
 SCons.top.template        Locally Modified          340 
 SCons.iface.template      Locally Modified          340 
 SCons.hw.template         Locally Modified          340 

Reverting BSC_FLAGS_SIM and VERILOG in Scons child modules per adler.  Change in iface is not complete because I haven't figured out it's invocation yet.

----------
kfleming    Date: Tue Dec 15 15:46:54 KST 2009  CSN: CSN-platforms-342
                  Tue Dec 15 06:46:54 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks/single-ended
 single-ended-clocks-device-verilog-simulation.bsv Locally Added               0 
 single-ended-clocks-device.v Locally Added               0 

Added a couple of files for simulating single ended clocks.  This change was necessary to make Bluespec's verilog build script happy, but I forgot to add these files

----------
mcadler     Date: Wed Jan 20 10:26:17 EST 2010  CSN: CSN-platforms-343
                  Wed Jan 20 15:26:17 UTC 2010


Directory modules/project
 SCons.iface.template      Locally Modified          342 

Pass C include path to hasim-dict, since it now runs cpp in input files.

----------
kfleming    Date: Tue Feb  9 21:26:51 EST 2010  CSN: CSN-platforms-344
                  Wed Feb 10 02:26:51 UTC 2010


Directory modules/bluespec/librl/base
 memory-interface.bsv      Locally Modified          343 

Added an interface to make multiple reader memories safe.

----------
kfleming    Date: Fri Feb 19 18:18:21 EST 2010  CSN: CSN-platforms-345
                  Fri Feb 19 23:18:21 UTC 2010


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device.awb      Locally Modified          344 

Directory modules/project
 SCons.top.template        Locally Modified          344 


Arbitrary synthesis boundaries/BPDI now supported

----------
kfleming    Date: Mon Feb 22 22:06:35 EST 2010  CSN: CSN-platforms-346
                  Tue Feb 23 03:06:35 UTC 2010


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-xupv2-serial.apm Locally Modified          345 

Directory modules/project
 SCons.top.template        Locally Modified          345 


Added support for multiple processors with multiple bmms and elfs.

----------
mcadler     Date: Fri Feb 26 07:22:48 EST 2010  CSN: CSN-platforms-347
                  Fri Feb 26 12:22:48 UTC 2010


Directory modules/bluespec/librl/base
 fifo-merge.bsv            Locally Modified          346 

Add LFIFOF flavor (mkMergeLFIFOF).

----------
mcadler     Date: Fri Feb 26 12:39:55 EST 2010  CSN: CSN-platforms-348
                  Fri Feb 26 17:39:55 UTC 2010


Directory modules/bluespec/librl/base
 fifo-merge.bsv            Locally Modified          347 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/local
 scratch-interfaces.bsv    Locally Modified          347 

- Use standard vector search functions in merge FIFO instead of hand-rolled code.
- Tweak the hack in the scratchpad index typedef to guarantee the index size is
  non-zero.

----------
kfleming    Date: Thu Mar  4 20:19:49 EST 2010  CSN: CSN-platforms-349
                  Fri Mar  5 01:19:49 UTC 2010


Directory modules/bluespec/librl/storage/cache
 rl-set-assoc-cache.bsv    Locally Modified          348 

Changed proviso to an elaboration time check.  

----------
mcadler     Date: Mon Mar  8 16:56:59 EST 2010  CSN: CSN-platforms-350
                  Mon Mar  8 21:56:59 UTC 2010


Directory modules/bluespec/librl/base
 fifo-functions.bsv        Locally Modified          349 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/little-endian
 umf-awb-size-hacks.h      Locally Added               0 
 umf-little-endian.h       Locally Modified          349 
 umf-little-endian.awb     Locally Modified          349 

- Add 16 bit integers to UMF base types.

- Add C preprocessor macros for converting an integer macro value to an
  integer type.  This is useful for specifying an AWB macro that is a type's
  size in bits and having C++ magically build, e.g., a UINT64 when the
  value is 64.  It can then be used in RRR definitions:

    #include "asim/restricted/umf-awb-size-hacks.h"
    #include "asim/provides/hasim_exascale_port.h"

    #define CF_TILE    BITS_TO_UINT(CHANNEL_FIFOS_TILE_BITS)

    service CHANNEL_FIFOS
    {
        server sw (cpp, method) <- hw (bsv, connection)
        {
            method NextCycle(in CF_TILE[CHANNEL_FIFOS_TILE_BITS] tile);
        }
    }

  or in C++ headers:

    typedef BITS_TO_UINT(CHANNEL_FIFOS_TILE_BITS) CF_TILE;

  Don't expect much if the size isn't 8, 16, 32 or 64.

- Add a new class of Bluespec functions to manage a FIFO.  The old class
  managed a struct representing the entire fifo (both data and metadata).
  The new class manages just the metadata and returns the index of the
  data that should be read or written, depending on the function.  This
  lets a caller store metadata and data in separate structures and allows
  the data to be indexed by FIFO slot instead of being loaded and stored
  as a huge chunk.

----------
mcadler     Date: Thu Mar 11 20:12:40 EST 2010  CSN: CSN-platforms-351
                  Fri Mar 12 01:12:40 UTC 2010


Directory modules/bluespec/librl/base
 bluespec-def.bsv          Locally Modified          350 

Directory modules/bluespec/common/fpgaenv/low-level-platform-interface/local-mem
 local-mem-null.bsv        Locally Modified          350 
 local-mem-ddr2.bsv        Locally Modified          350 
 local-mem-interface.bsv   Locally Modified          350 
 local-mem-bram.bsv        Locally Modified          350 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/central-cache
 local-mem-central-cache.bsv Locally Modified          350 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.cpp    Locally Modified          350 
 hybrid-mem-scratch.rrr    Locally Modified          350 
 hybrid-mem-scratch.h      Locally Modified          350 
 hybrid-mem-scratch.bsv    Locally Modified          350 
 hybrid-mem-scratch-interfaces.bsv Locally Modified          350 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/local
 scratch-interfaces.bsv    Locally Modified          350 
 local-mem-scratch.bsv     Locally Modified          350 

- Add a new category of scratchpad called "uncached".  See the corresponding
  checkin in hasim for a description.

- Expose the byte-masked write interface in local memory.  That is the native
  hardware support.  The old code exposed only word masks.

----------
mcadler     Date: Fri Mar 12 09:05:36 EST 2010  CSN: CSN-platforms-352
                  Fri Mar 12 14:05:36 UTC 2010


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.cpp    Locally Modified          351 
 hybrid-mem-scratch.h      Locally Modified          351 

StoreLine() now uses MMX/SSE instructions only when they are available.
The alternate version isn't terrible now that I figured out how to generate
byte masks.

----------
pellauer    Date: Fri Mar 12 11:49:13 EST 2010  CSN: CSN-platforms-353
                  Fri Mar 12 16:49:13 UTC 2010


Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 xilinx.xst                Locally Modified          352 


* Add -iobuf no to HTG .xst script to un-break synthesis boundaries.

Michael P.

----------
kfleming    Date: Sun Mar 14 23:23:56 EDT 2010  CSN: CSN-platforms-354
                  Mon Mar 15 03:23:56 UTC 2010


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.cpp    Locally Modified          353 

Added support for later model gccs in the scratchpad code.  Some thinking should be done about whether this is the right way to construct the code, but I am checking it in anyway because all my nightlies are shot. 


----------
mcadler     Date: Fri Mar 19 07:22:04 EDT 2010  CSN: CSN-platforms-355
                  Fri Mar 19 11:22:04 UTC 2010


Directory modules/bluespec/librl/storage
 fifos.bsv                 Locally Removed           354 
 librl-bsv-storage.awb     Locally Modified          354 
 fifo-mem.bsv              Locally Added               0 
 fifo-scoreboard.bsv       Locally Added               - 

Directory modules/bluespec/common/fpgaenv/fpga-components
 Bram.v                    Locally Modified          354 
 bram.bsv                  Locally Modified          354 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.awb    Locally Modified          354 
 hybrid-mem-scratch.bsv    Locally Modified          354 
 hybrid-mem-scratch-interfaces.bsv Locally Modified          354 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/local
 scratch-interfaces.bsv    Locally Modified          354 
 local-mem-scratch.bsv     Locally Modified          354 

- Add a BRAM FIFO that uses the FIFO functions in fifo-functions.bsv
- Remove all predicates from the unguarded BRAM so that it actually is unguarded.
- Guarantee that INIT messages go out before all other scratchpad messages.
- Increase scratchpad hybrid read request metadata buffer size using a BRAM
  FIFO.  The buffer size limits the number of outstanding host read requests.
  The limit used to be 16 and is now 1024.  Tuning is not yet done and will
  depend on the latency of hybrid read requests.
- Rename fifos.bsv to fifo-scoreboard.bsv

----------
mcadler     Date: Fri Mar 19 13:42:15 EDT 2010  CSN: CSN-platforms-356
                  Fri Mar 19 17:42:15 UTC 2010


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.cpp    Locally Modified          355 
 hybrid-mem-scratch.rrr    Locally Modified          355 
 hybrid-mem-scratch.h      Locally Modified          355 
 hybrid-mem-scratch.bsv    Locally Modified          355 
 hybrid-mem-scratch-interfaces.bsv Locally Modified          355 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/local
 scratch-interfaces.bsv    Locally Modified          355 
 local-mem-scratch.bsv     Locally Modified          355 

- Store buffer can now hit at the byte level instead of requiring a full word.
- Add word-sized RRR store method and use it when only one word in a line has
  changes.
- Clean up GCC version code for inline SSE instructions.

----------
mcadler     Date: Fri Mar 19 15:25:38 EDT 2010  CSN: CSN-platforms-357
                  Fri Mar 19 19:25:38 UTC 2010


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.cpp    Locally Modified          356 

Commented out the SSE path of masked writes for two reasons:
  1.  Our version of GCC corrupted FP state.
  2.  The SSE version is slower than my non-SSE masking that implements the
      same function.  Doh!

----------
mcadler     Date: Wed Mar 24 17:43:11 EDT 2010  CSN: CSN-platforms-358
                  Wed Mar 24 21:43:11 UTC 2010


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/stats-device
 stats-device.cpp          Locally Modified          357 

Directory modules/project
 project-hybrid-main.cpp   Locally Modified          357 

- Instantiate an ASIM_CONFIG_CLASS in main.  The config class is a member of
  STATS_EMITTER_CLASS, which will cause the parameter values to be written
  to the stats file.
- Reverse name and description in the stats file for better sorting.

----------
mcadler     Date: Thu Mar 25 14:38:14 EDT 2010  CSN: CSN-platforms-359
                  Thu Mar 25 18:38:14 UTC 2010


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/stats-device
 stats-device.cpp          Locally Modified          358 

Directory modules/project
 project-hybrid-main.cpp   Locally Modified          358 

Previous change broke models that have no support for statistics.  Move the
instantiation of an ASIM_CONFIG_CLASS down to the stats-device for now.

----------
kfleming    Date: Fri Mar 26 13:43:19 EDT 2010  CSN: CSN-platforms-360
                  Fri Mar 26 17:43:19 UTC 2010


Directory modules/bluespec/librl/storage
 fifo-mem.bsv              Locally Modified          359 

added type parameter to fix breakage in newer bluespec compiler versions. 

----------
kfleming    Date: Sat Mar 27 21:30:51 EDT 2010  CSN: CSN-platforms-361
                  Sun Mar 28 01:30:51 UTC 2010


Directory modules/project
 project-pipeline.awb      Locally Added               0 
 ProjectDependency.py      Locally Added               0 
 SCons.top.pipeline.template Locally Added               0 
 XST.py                    Locally Added               0 
 ModuleList.py             Locally Added               0 
 Module.py                 Locally Added               0 

Added support for python libraries in SCons.  %scons %library will create a symlink in the new site_scons directory.  This enables, among other things, a relatively easy way to break down the monolithic makefile.  It also sets the stage for Altera support.  The edit is a little rough, and I would like to investigate using a more SConsy object-oriented approach with the Builder and Node classes. 

----------
kfleming    Date: Sun Mar 28 21:19:21 EDT 2010  CSN: CSN-platforms-362
                  Mon Mar 29 01:19:21 UTC 2010


Directory modules/project
 project-pipeline.awb      Locally Modified          361 
 xst.awb                   Locally Added               0 
 SCons.top.pipeline.template Locally Modified          361 
 XST.py                    Locally Modified          361 
 build-pipeline.awb        Locally Added               0 

Added support for awb-style swapable python build modules.  Syntax is
from module_name import *.  This allows multiple tools
(XST/Synplify/Quartus/DC) to share similar build pipelines it also
helps in sharing build code among several projects.  

----------
kfleming    Date: Mon Mar 29 14:26:01 EDT 2010  CSN: CSN-platforms-363
                  Mon Mar 29 18:26:01 UTC 2010


Directory modules/project
 synplify.awb              Locally Added               0 
 SCons.top.pipeline.template Locally Modified          362 
 Synplify.py               Locally Added               0 
 XST.py                    Locally Modified          362 
 ModuleList.py             Locally Modified          362 

Added support for synplify in the new style.  With the <> wire naming change introduced a lilittle while ago, it appears that some designs can now build without a seperate synplify specific udf files. If any problems exist, they are likely due to bi-directional busses, which xilinx seems to handle poorly.

----------
kfleming    Date: Tue Mar 30 15:08:36 EDT 2010  CSN: CSN-platforms-364
                  Tue Mar 30 19:08:36 UTC 2010


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-xupv2-serial-synplify.apm Locally Modified          363 
 std-virtual-devices.apm   Locally Modified          363 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.awb    Locally Modified          363 
 hybrid-mem-scratch.bsv    Locally Modified          363 
 hybrid-mem-scratch-interfaces.bsv Locally Removed           363 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory
 common/                   Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/common
 mem-scratch-common.awb    Locally Added               0 
 mem-scratch-common-interfaces.bsv Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/local
 scratch-interfaces.bsv    Locally Removed           363 
 local-mem-scratch.awb     Locally Modified          363 
 local-mem-scratch.bsv     Locally Modified          363 

Refactored scratchpad to eliminate shared file

----------
kfleming    Date: Thu Apr  1 18:14:08 EDT 2010  CSN: CSN-platforms-365
                  Thu Apr  1 22:14:08 UTC 2010


Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup/serial
 xilinx.sdf                Locally Modified          364 

Directory modules/project
 SCons.hw.pipeline.template Locally Added               0 
 project-pipeline.awb      Locally Modified          364 
 Utils.py                  Locally Added               0 
 SCons.sw.pipeline.template Locally Added               0 
 ProjectDependency.py      Locally Modified          364 
 SCons.top.pipeline.template Locally Modified          364 
 Synplify.py               Locally Modified          364 
 XST.py                    Locally Modified          364 
 ModuleList.py             Locally Modified          364 
 Module.py                 Locally Modified          364 


Refactored new build pipeline codes.  Now hasim configure generates a
module tree data structure for the python code.  Started pulling
library code out of top template.  Resurrected Synplify code.

----------
mcadler     Date: Fri Apr  2 16:33:51 EDT 2010  CSN: CSN-platforms-370
                  Fri Apr  2 20:33:51 UTC 2010


Directory modules/bluespec/common/fpgaenv/low-level-platform-interface/local-mem
 local-mem-ddr2.awb        Locally Modified          369 
 local-mem-null.bsv        Locally Modified          369 
 local-mem-ddr2.bsv        Locally Modified          369 
 local-mem-interface.bsv   Locally Modified          369 
 local-mem-bram.bsv        Locally Modified          369 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/central-cache
 central-cache-backing-store.bsv Locally Modified          369 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 xilinx.xst                Locally Modified          369 
 htg-v5-pcie-enabled.bsv   Locally Modified          369 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr2-sdram
 ddr2-sdram-device.bsv     Locally Modified          369 
 ddr2-sdram-sync-tig-synplify.ucf Locally Modified          369 
 ddr2_sdram.ucf            Locally Modified          369 
 ddr2-sdram-device.awb     Locally Modified          369 
 ddr2-sdram-sync-tig.ucf   Locally Modified          369 
 ddr2_sdram-synplify.ucf   Locally Modified          369 

Directory modules/project
 XST.py                    Locally Modified          369 
 SCons.top.template        Locally Modified          369 

- Generalize local memory using DDR to support both the HTG and ACP controllers:
  - Local memory configuration now virtualizes word and line sizes for the
    rest of the model.  It will marshall low-level DDR physical characteristics
    to the requested sizes.
  - The current implementation assumes that a line is composed of at least one
    access to all memory banks.
  - Local memory using DDR no longer takes an address size.  The virtualized
    address space is recomputed to fill the underlying memory using the
    requested word size.

- Update the DDR2 SDRAM controller to conform to the new interface expected
  by local memory.  (The largest change was making the controllers a vector
  over the number of banks.)

- "-iobuf no" must be specified at all synthesis levels below top level.
  For HTG it must NOT be specified at top level.

- Drop a bypass FIFO from the central cache scratchpad interface for timing.

----------
kfleming    Date: Fri Apr  2 18:38:23 EDT 2010  CSN: CSN-platforms-371
                  Fri Apr  2 22:38:23 UTC 2010


Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup/serial
 xilinx.sdf                Locally Modified          370 

Directory modules/project
 Utils.py                  Locally Modified          370 
 ProjectDependency.py      Locally Modified          370 
 Synplify.py               Locally Modified          370 
 ModuleList.py             Locally Modified          370 
 Module.py                 Locally Modified          370 


Synplify finally supports synthesis boundaries. Next up is fixing build dependency issues in XST and parallelizing Synplify.



----------
kfleming    Date: Mon Apr  5 13:24:03 EDT 2010  CSN: CSN-platforms-373
                  Mon Apr  5 17:24:03 UTC 2010


Directory modules/bluespec/common/fpgaenv/fpga-components
 user-clock-pll.bsv        Locally Modified          372 
 user-clock.bsv            Locally Modified          372 
 software-fpga-components.awb Locally Modified          372 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup/serial
 xilinx.sdf                Locally Modified          372 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-disabled
 htg-v5-pcie-disabled.sdf  Locally Modified          372 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 xilinx.sdf                Locally Modified          372 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks/simulation
 sim-clocks-device.awb     Locally Modified          372 
 sim-clocks-device.bsv     Locally Modified          372 

Directory modules/project
 Synplify.py               Locally Modified          372 
 XST.py                    Locally Modified          372 
 ModuleList.py             Locally Modified          372 

Added support for ratioed clocks in simulation.  Now the clocks library can create precisely ratioed clocks, rather than just passing back an unmodified clock.  Due to some estimation, small errors in ratio calculation may be present.

----------
kfleming    Date: Mon Apr  5 18:25:30 EDT 2010  CSN: CSN-platforms-374
                  Mon Apr  5 22:25:30 UTC 2010


Directory modules/bluespec/common/fpgaenv/physical-platform
 development_board_arriaII_gx/ Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/development_board_arriaII_gx
 jtag/                     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/development_board_arriaII_gx/jtag
 altera-arriaIIgx_dev-jtag.bsv Locally Added               0 
 jtag.sdf                  Locally Added               0 
 altera-arriaIIgx_dev-jtag.ucf Locally Added               0 
 altera-arriaIIgx_dev-jtag.cpp Locally Added               0 
 altera-arriaIIgx_dev-jtag.h Locally Added               0 
 altera-arriaIIgx_dev-jtag.awb Locally Added               0 

Added skeleton for arriaII GX physical platform

----------
kfleming    Date: Tue Apr  6 15:05:11 EDT 2010  CSN: CSN-platforms-375
                  Tue Apr  6 19:05:11 UTC 2010


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-evaluation-arriaII-jtag.apm Locally Added               0 

Directory modules/bluespec/common/fpgaenv/fpga-components
 hardware-fpga-components-arriaII.awb Locally Added               0 
 user-clock-pll.bsv        Locally Removed           374 
 user-clock-pll-virtex5.bsv Locally Added               - 
 user-clock-altera-arriaII.v Locally Added               0 
 user-clock-pll.v          Locally Removed           374 
 user-clock.bsv            Locally Modified          374 
 hardware-fpga-components-virtex2.awb Locally Modified          374 
 user-clock-pll-virtex5.v  Locally Added               - 
 user-clock-altera.bsv     Locally Added               0 
 hardware-fpga-components-virtex5.awb Locally Modified          374 
 user-clock-xilinx.bsv     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/development_board_arriaII_gx/jtag
 altera-arriaIIgx_dev-jtag.awb Locally Modified          374 


Reworked the fpga components to support Altera targets.  This
consisted of introducing manufacturer specific clock imports. Also
added new Arria II physical platform based on a JTAG phy channel.

----------
kfleming    Date: Tue Apr  6 16:38:13 EDT 2010  CSN: CSN-platforms-376
                  Tue Apr  6 20:38:13 UTC 2010


Directory modules/bluespec/common/fpgaenv/fpga-components
 user-clock-pll.bsv        Locally Added               0 


Replaced accidentally deleted file

----------
kfleming    Date: Tue Apr  6 17:16:37 EDT 2010  CSN: CSN-platforms-377
                  Tue Apr  6 21:16:37 UTC 2010


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 jtag/                     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/jtag
 altera/                   Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/jtag/altera
 jtag-device.bsv           Locally Added               0 

Added skeleton code for altera jtag device

----------
kfleming    Date: Wed Apr  7 14:18:03 EDT 2010  CSN: CSN-platforms-379
                  Wed Apr  7 18:18:03 UTC 2010


Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 xilinx.sdf                Locally Modified          378 

Directory modules/project
 Synplify.py               Locally Modified          378 

Fixed bug in synplify build.

----------
kfleming    Date: Wed Apr  7 14:22:39 EDT 2010  CSN: CSN-platforms-380
                  Wed Apr  7 18:22:39 UTC 2010


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel
 jtag/                     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/jtag
 jtag-physical-channel.cpp Locally Added               0 
 jtag-physical-channel.h   Locally Added               0 
 jtag-physical-channel.awb Locally Added               0 
 jtag-physical-channel.bsv Locally Added               0 


Added jtag phy channel code skeleton.  Impl not complete.

----------
kfleming    Date: Wed Apr  7 18:37:56 EDT 2010  CSN: CSN-platforms-381
                  Wed Apr  7 22:37:56 UTC 2010


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/jtag
 jtag-physical-channel.cpp Locally Modified          380 
 jtag-physical-channel.h   Locally Modified          380 



Add Altera JTAG C code.  This code probably needs a robust way of shooting down NIOS 2 Terminal.

----------
kfleming    Date: Wed Apr  7 18:49:19 EDT 2010  CSN: CSN-platforms-382
                  Wed Apr  7 22:49:19 UTC 2010


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/jtag
 jtag-physical-channel.h   Locally Modified          381 

Fixed compilation error

----------
kfleming    Date: Wed Apr  7 21:44:35 EDT 2010  CSN: CSN-platforms-388
                  Thu Apr  8 01:44:35 UTC 2010


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/jtag
 jtag-physical-channel.cpp Locally Modified          387 


Fixed some code typos.  This file compiles now.

----------
kfleming    Date: Wed Apr  7 23:52:29 EDT 2010  CSN: CSN-platforms-389
                  Thu Apr  8 03:52:29 UTC 2010


Directory modules/bluespec/common/fpgaenv/physical-platform/development_board_arriaII_gx/jtag
 altera-arriaIIgx_dev-jtag.cpp Locally Modified          388 
 altera-arriaIIgx_dev-jtag.h Locally Modified          388 

Added platforms module include to jtag phy platform C++ stub.

----------
jsemer      Date: Thu Apr  8 09:29:48 EDT 2010  CSN: CSN-platforms-390
                  Thu Apr  8 13:29:48 UTC 2010


Directory config/pm/hasim/submodels/fpgaenv
 xup-virtual-devices.apm   Locally Modified          389 

Changed name of model to 'XUP Virtual Devices' to eliminate duplication 
with name 'Standard Virtual Devices' used in std-virtual-device.apm.

Only difference in this submodel from 'Standard Virtual Devices' seems
to be use of a NULL central cache instead of a local memory central
cache. There also seemed to be no usage of this submodel.

----------
mcadler     Date: Thu Apr  8 17:48:14 EDT 2010  CSN: CSN-platforms-391
                  Thu Apr  8 21:48:14 UTC 2010


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.bsv    Locally Modified          390 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks/simulation
 sim-clocks-device.awb     Locally Modified          390 

- Make the default simulation clock ration 1:1
- Tweak debugging message in scratchpad.

----------
kfleming    Date: Fri Apr  9 19:18:55 EDT 2010  CSN: CSN-platforms-394
                  Fri Apr  9 23:18:55 UTC 2010


Directory modules/project
 SCons.top.pipeline.template Locally Modified          393 
 Synplify.py               Locally Modified          393 
 ModuleList.py             Locally Modified          393 
 SCons.top.template        Locally Modified          393 

Changes to support the moving names of the new types command.  

I have tested this pretty heavily, but there could still be bugs.  

----------
kfleming    Date: Mon Apr 12 17:04:33 EDT 2010  CSN: CSN-platforms-397
                  Mon Apr 12 21:04:33 UTC 2010


Directory modules/project
 Synplify.py               Locally Modified          396 
 XST.py                    Locally Modified          396 


Added support for patching XST mishandling of Bluespec's inout naming
syntax. This enables us to unify ucf syntax across tools.

----------
kfleming    Date: Thu Apr 15 15:42:53 EDT 2010  CSN: CSN-platforms-402
                  Thu Apr 15 19:42:53 UTC 2010


Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 xilinx.sdf                Locally Modified          401 
 htg-v5-pcie-enabled.sdc   Locally Modified          401 

Fixed some Synplify synthesis parameters

----------
kfleming    Date: Fri Apr 16 01:44:40 EDT 2010  CSN: CSN-platforms-406
                  Fri Apr 16 05:44:40 UTC 2010


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 hybrid-fp.cpp             Locally Modified          405 

Modified fp to default to display to stdout.

----------
kfleming    Date: Fri Apr 16 18:10:55 EDT 2010  CSN: CSN-platforms-407
                  Fri Apr 16 22:10:55 UTC 2010


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-evaluation-arriaII-jtag.apm Locally Modified          406 

Directory modules/bluespec/common/fpgaenv/fpga-components
 user-clock.bsv            Locally Modified          406 
 user-clock-altera.bsv     Locally Modified          406 

Directory modules/bluespec/common/fpgaenv/physical-platform/development_board_arriaII_gx/jtag
 altera-arriaIIgx_dev-jtag.awb Locally Modified          406 

Added functions to calculate LCD/GCD, making a simplier version of mkUserClock_PLL.  This is not guaranteed to produce working PLL implemenations, but it should do a good job. 

----------
kfleming    Date: Sat Apr 17 15:44:15 EDT 2010  CSN: CSN-platforms-412
                  Sat Apr 17 19:44:15 UTC 2010


Directory modules/bluespec/common/fpgaenv/fpga-components
 user-clock.bsv            Locally Modified          411 
 user-clock-altera.bsv     Locally Modified          411 

Corrected error in GCD code. Seems to be correct for synthesis now.

----------
kfleming    Date: Mon Apr 19 19:57:57 EDT 2010  CSN: CSN-platforms-413
                  Mon Apr 19 23:57:57 UTC 2010


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-evaluation-arriaII-jtag.apm Locally Modified          412 

Directory modules/bluespec/common/fpgaenv/physical-platform/development_board_arriaII_gx/jtag
 altera-arriaIIgx_dev-jtag.bsv Locally Removed           412 
 jtag.sdf                  Locally Removed           412 
 altera-jtag.h             Locally Added               - 
 altera-jtag.awb           Locally Added               - 
 altera-jtag.bsv           Locally Added               - 
 altera-arriaIIgx_dev-jtag-pins.qsf Locally Removed           412 
 altera-arriaIIgx_dev-jtag.cpp Locally Removed           412 
 altera-arriaIIgx_dev-jtag.h Locally Removed           412 
 altera-jtag.cpp           Locally Added               - 
 jtag.sdc                  Locally Removed           412 
 altera-arriaIIgx_dev-jtag.awb Locally Removed           412 
 altera-arriaIIgx_dev-jtag.qsf Locally Removed           412 
 arriaII_dev/              Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/development_board_arriaII_gx/jtag/arriaII_dev
 jtag.sdf                  Locally Added               - 
 altera-arriaIIgx_dev-jtag-pins.qsf Locally Added               - 
 jtag.sdc                  Locally Added               - 
 altera-arriaIIgx_dev-jtag.qsf Locally Added               - 

Swapped around files in altera jtag to prepare for the upcoming, new jtag targets (huntsman wireless board, airblue 2.0)

----------
kfleming    Date: Mon Apr 19 20:55:54 EDT 2010  CSN: CSN-platforms-414
                  Tue Apr 20 00:55:54 UTC 2010


Directory modules/bluespec/common/fpgaenv/physical-platform/development_board_arriaII_gx/jtag/arriaII_dev
 altera-arriaIIgx_dev-jtag.awb Locally Added               0 

Forgot awb file.

----------
kfleming    Date: Wed Apr 21 10:23:07 EDT 2010  CSN: CSN-platforms-418
                  Wed Apr 21 14:23:07 UTC 2010


Directory modules/project
 Synplify.py               Locally Modified          417 
 XST.py                    Locally Modified          417 

Fixed typo relating to basicinout filter.

----------
kfleming    Date: Fri Apr 23 20:59:06 EDT 2010  CSN: CSN-platforms-419
                  Sat Apr 24 00:59:06 UTC 2010


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/serial
 SerialStream.cc           Locally Removed           418 
 serial-physical-channel.awb Locally Modified          418 
 SerialStreamBuf.cpp       Locally Added               - 
 SerialStreamBuf.cc        Locally Removed           418 
 SerialStream.cpp          Locally Added               - 

Fixed broken serial physical channel

----------
kfleming    Date: Tue Apr 27 21:28:29 EDT 2010  CSN: CSN-platforms-421
                  Wed Apr 28 01:28:29 UTC 2010


Directory modules/project
 SCons.top.pipeline.template Locally Modified          420 

Patched new DATA intializer type by removing from build rule.  This takes care of the empty string case more easily.  

----------
mcadler     Date: Wed Apr 28 14:36:32 EDT 2010  CSN: CSN-platforms-422
                  Wed Apr 28 18:36:32 UTC 2010


Directory modules/bluespec/librl/storage
 fifo-scoreboard.bsv       Locally Modified          421 

Use LUTRAM instead of register vectors for managing ready bits.  Also
eliminate a vector-wide XOR when a 1-bit XOR will suffice.

----------
mcadler     Date: Wed Apr 28 22:43:53 EDT 2010  CSN: CSN-platforms-423
                  Thu Apr 29 02:43:53 UTC 2010


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.bsv    Locally Modified          422 

Tweak the streaming read code for uncached scratchpads to behave the way it
should have in the first place.  The old code didn't record a read line until
the data was returned by the host.  By then it was too late, since all
streaming requests for a line are most likely generated before the line
is returned from host memory.

The new code tracks the most recent read line request.  If the new request
matches the old line, the request bypasses the host memory pipeline and
is returned from a shared buffer once the data arrives.

----------
kfleming    Date: Thu Apr 29 13:41:13 EDT 2010  CSN: CSN-platforms-424
                  Thu Apr 29 17:41:13 UTC 2010


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/serial
 serial-physical-channel-8bit.cpp Locally Added               0 
 serial-physical-channel-8bit.bsv Locally Added               0 
 serial-physical-channel-8bit.awb Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/serial
 physical-serial/          Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/serial/physical-serial
 opb_uartlite_core.vhd     Locally Added               0 
 opb_uartlite_rx.vhd       Locally Added               0 
 serial-device.h           Locally Added               0 
 srl_fifo.vhd              Locally Added               0 
 opb_uartlite_tx.vhd       Locally Added               0 
 baudrate.vhd              Locally Added               0 
 uart-import.bsv           Locally Added               0 
 serial-device.cpp         Locally Added               0 
 serial-device-physical.awb Locally Added               0 

Added light-weight uart device

----------
kfleming    Date: Thu Apr 29 15:51:49 EDT 2010  CSN: CSN-platforms-425
                  Thu Apr 29 19:51:49 UTC 2010


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/serial/physical-serial
 opb_uartlite_core.vhd     Locally Modified          424 

Tweaked DTR, stability now greatly enhanced

----------
kfleming    Date: Fri Apr 30 16:10:41 EDT 2010  CSN: CSN-platforms-426
                  Fri Apr 30 20:10:41 UTC 2010


Directory modules/project
 XILINX_NGD.py             Locally Modified          425 



Added -aul file - this assists in the case that we use fully LOC'ed
controllers, but the tools proceed to do some slight renaming.  

----------
kfleming    Date: Mon May  3 12:09:57 EDT 2010  CSN: CSN-platforms-427
                  Mon May  3 16:09:57 UTC 2010


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-xupv2-serial.apm Locally Modified          426 

Directory modules/project
 xilinx_ucf.awb            Locally Removed           426 
 xilinx_map.awb            Locally Removed           426 
 project-pipeline.awb      Locally Modified          426 
 xilinx_par.awb            Locally Removed           426 
 synplify.sdc              Locally Removed           426 
 xst.awb                   Locally Removed           426 
 synopsis/                 Locally Added               0 

Directory modules/project/synopsis
 Synplify.py               Locally Added               - 
 synplify.awb              Locally Added               - 
 synplify.sdc              Locally Added               - 

Directory modules/project
 XILINX_LOADER.py          Locally Removed           426 
 XILINX_BMM.py             Locally Removed           426 
 project-hybrid.awb        Locally Modified          426 
 XILINX_MAP.py             Locally Removed           426 
 XILINX_UCF.py             Locally Removed           426 
 Synplify.py               Locally Removed           426 
 XST.py                    Locally Removed           426 
 altera/                   Locally Added               0 

Directory modules/project/altera
 ALTERA_POST_SYNTH.py      Locally Added               - 
 altera_post_synth.awb     Locally Added               - 

Directory modules/project
 altera_post_synth.awb     Locally Removed           426 
 xilinx/                   Locally Added               0 

Directory modules/project/xilinx
 xilinx_ucf.awb            Locally Added               - 
 xilinx_map.awb            Locally Added               - 
 xilinx_par.awb            Locally Added               - 
 xst.awb                   Locally Added               - 
 XILINX_LOADER.py          Locally Added               - 
 XILINX_NGD.py             Locally Added               - 
 XILINX_BITGEN.py          Locally Added               - 
 XILINX_POST_SYNTH.py      Locally Added               - 
 XILINX_BMM.py             Locally Added               - 
 XILINX_UCF.py             Locally Added               - 
 XILINX_MAP.py             Locally Added               - 
 XILINX_PAR.py             Locally Added               - 
 XST.py                    Locally Added               - 
 xilinx_loader.awb         Locally Added               - 
 xilinx_bitgen.awb         Locally Added               - 
 xilinx_ngd.awb            Locally Added               - 
 xilinx_post_synth.awb     Locally Added               - 
 xilinx_bmm.awb            Locally Added               - 

Directory modules/project
 xilinx_bitgen.awb         Locally Removed           426 
 synplify.awb              Locally Removed           426 
 ALTERA_POST_SYNTH.py      Locally Removed           426 
 XILINX_BITGEN.py          Locally Removed           426 
 XILINX_NGD.py             Locally Removed           426 
 XILINX_POST_SYNTH.py      Locally Removed           426 
 XILINX_PAR.py             Locally Removed           426 
 xilinx_loader.awb         Locally Removed           426 
 xilinx_ngd.awb            Locally Removed           426 
 xilinx_post_synth.awb     Locally Removed           426 
 xilinx_bmm.awb            Locally Removed           426 

Reorganized python files

----------
kfleming    Date: Mon May  3 12:47:51 EDT 2010  CSN: CSN-platforms-428
                  Mon May  3 16:47:51 UTC 2010


Directory modules/project
 SCons.top.pipeline.template Locally Modified          427 
 ModuleList.py             Locally Modified          427 

Directory modules/project/xilinx
 XILINX_POST_SYNTH.py      Locally Modified          427 

Removed some data structure dumpes now that the build pipeline is fairly stable.

----------
mcadler     Date: Mon May  3 14:24:55 EDT 2010  CSN: CSN-platforms-429
                  Mon May  3 18:24:55 UTC 2010


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.cpp    Locally Modified          428 
 hybrid-mem-scratch.rrr    Locally Modified          428 
 hybrid-mem-scratch.h      Locally Modified          428 
 hybrid-mem-scratch.bsv    Locally Modified          428 

Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/little-endian
 umf-little-endian.cpp     Locally Modified          428 
 umf-little-endian.h       Locally Modified          428 

Add a pseudo-DMA path for scratchpad references that bypasses channel I/O
and RRR, communicating directly with the channel driver.  The code is only
used when the channel I/O driver defines the preprocessor variable
PSEUDO_DMA_ENABLED.

----------
pellauer    Date: Mon May  3 16:38:17 EDT 2010  CSN: CSN-platforms-430
                  Mon May  3 20:38:17 UTC 2010


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.cpp    Locally Modified          429 


* Adding braces to legs of switch statements. GHC has apparently decided to 
  crack down on variables declared in switch statements without legs. Adding
  braces is harmlessly backwards compatible, so let's go for that.
  

Michael P.

                                                                                  down

----------
kfleming    Date: Sun May  9 14:32:16 EDT 2010  CSN: CSN-platforms-431
                  Sun May  9 18:32:16 UTC 2010


Directory modules/project/synopsis
 Synplify.py               Locally Modified          430 

Directory modules/project
 ModuleList.py             Locally Modified          430 

Directory modules/project/xilinx
 XILINX_NGD.py             Locally Modified          430 
 XILINX_UCF.py             Locally Modified          430 


Added support for synplify's generated UCF.  Not including this file can sometimes hang xilinx mapper.  

----------
mcadler     Date: Sat May 15 09:54:51 EDT 2010  CSN: CSN-platforms-432
                  Sat May 15 13:54:51 UTC 2010


Directory modules/bluespec/librl/base
 hash-bits.bsv             Locally Modified          431 
 support/                  Locally Added               0 

Directory modules/bluespec/librl/base/support
 hash-check.c              Locally Added               0 
 hash-inverse.c            Locally Added               0 
 README                    Locally Added               0 

- Tweak the hash function for > 32 bits.  It still does not use a hash larger
  than 32 bits and continues just to XOR higher bits into the low 32 bits
  before doing the hash.  A 64 bit hash is just too expensive.  The tweak
  rearranges the way the high bits are combined with the low bits so that
  bit 32 no longer gets XORed with its neighbor, bit 31.

- Add the C files used to build the inverse hashes in case they are needed
  later.

----------
mcadler     Date: Mon May 17 15:05:45 EDT 2010  CSN: CSN-platforms-433
                  Mon May 17 19:05:45 UTC 2010


Directory modules/project
 SCons.top.template        Locally Modified          432 

The latest Bluesim script expects the shared library with the simulated code
to be in the same directory as the wrapper shell script.  Link to the shared
library just as we link to the wrapper.

----------
kfleming    Date: Tue May 18 14:10:19 EDT 2010  CSN: CSN-platforms-434
                  Tue May 18 18:10:19 UTC 2010


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device.bsv      Locally Modified          433 


Set pipe waiting parameter to 0 from 32.  This appeared to needlessly slow rrr-heavy applications.

----------
kfleming    Date: Tue May 18 19:57:12 EDT 2010  CSN: CSN-platforms-435
                  Tue May 18 23:57:12 UTC 2010


Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/rrr_common
 demarshaller.bsv          Locally Modified          434 


Applied patch to demarshaller suggested by Jacob Schwartz.  This patch works around the Bluespec hang in expanded.

----------
pellauer    Date: Wed May 19 00:26:34 EDT 2010  CSN: CSN-platforms-436
                  Wed May 19 04:26:34 UTC 2010


Directory modules/bluespec/common/fpgaenv/fpga-components
 lutram.bsv                Locally Modified          435 


* Expose LUTRAM initialized state as a method. This was necessary because the 
  Bluespec compiler unexepectedly changed the schedule of my design in 
  response to changing some buffer sizes. As with a FIFOF there should be no
  reason for most users to check it, but it does allow the multiplexed LUTRAM
  to remove the scheduling ambiguity.
  
Michael P.


----------
kfleming    Date: Wed May 19 11:04:22 EDT 2010  CSN: CSN-platforms-437
                  Wed May 19 15:04:22 UTC 2010


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-xupv2-serial.apm Locally Modified          436 
 fpgaenv-hybrid-evaluation-arriaII-jtag.apm Locally Modified          436 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          436 
 fpgaenv-htg-hwonly.apm    Locally Modified          436 
 fpgaenv-hybrid-exe.apm    Locally Modified          436 
 fpgaenv-hybrid-exe-serial-ChanIO-loopback.apm Locally Modified          436 
 hasim-fpgaenv-hybrid-sim.apm Locally Modified          436 
 fpgaenv-hybrid-htg-v5-pcie.apm Locally Modified          436 
 fpgaenv-hybrid-xupv2-serial-chanIO-loopback.apm Locally Modified          436 
 hasim-fpgaenv-null.apm    Locally Modified          436 
 fpgaenv-cycloneiii-jtag.apm Locally Modified          436 
 hasim-fpgaenv-xup.apm     Locally Modified          436 

Directory modules/bluespec/common/fpgaenv
 fpga-environment.awb      Locally Modified          436 

Directory modules/project
 project-pipeline.awb      Locally Modified          436 
 pipelines/                Locally Added               0 

Directory modules/project/pipelines
 fpga-build-pipeline.awb   Locally Added               - 

Directory modules/project
 SCons.top.pipeline.template Locally Modified          436 
 build-pipeline.awb        Locally Removed           436 

Moved build pipeline into the fpgaenv, but the build pipeline will not be used unless the top level model is pipeline build.  

----------
kfleming    Date: Wed May 19 12:09:58 EDT 2010  CSN: CSN-platforms-438
                  Wed May 19 16:09:58 UTC 2010


Directory modules/project/pipelines
 sim-build-pipeline.awb    Locally Added               0 
 SimulationPipeline.py     Locally Added               0 
 FPGAPipeline.py           Locally Added               0 

Added missing build pipeline files. 

----------
mcadler     Date: Thu May 20 07:33:49 EDT 2010  CSN: CSN-platforms-439
                  Thu May 20 11:33:49 UTC 2010


Directory modules/bluespec/common/fpgaenv/fpga-components
 hardware-fpga-components-arriaII.awb Locally Modified          438 
 lutram.bsv                Locally Modified          438 
 hardware-fpga-components-virtex2.awb Locally Modified          438 
 hardware-fpga-components-virtex5.awb Locally Modified          438 
 lutram.v                  Locally Modified          438 

Add a LUTRAM_MULTI_READ: a flavor of LUTRAM with explicit naming of read
ports.  Method names are based on LUTRAM with port and module naming
similar to multi-read-port BRAM.

Bluespec's RegFile implementation is the basis for the standard LUTRAM.
The compiler allocates up to 5 read ports based simply on finding calls
to the sub() method.  It makes no effort to take advantage of scheduling
constraints to combine clients of read ports.  Read ports are
expensive!  Xilinx LUT memory usage doubles to add a second read port
and LUT memory usage continues to grow linearly as ports are added.

The new implementation allocates only dual port (one read and one write)
LUT memory.  A further refinement could allocate a mixture of quad and
dual ported memory, as appropriate.

----------
kfleming    Date: Thu May 20 23:18:51 EDT 2010  CSN: CSN-platforms-440
                  Fri May 21 03:18:51 UTC 2010


Directory modules/bluespec/common/fpgaenv/physical-platform/development_board_arriaII_gx/jtag/arriaII_dev
 jtag.sdf                  Locally Modified          439 

Directory modules/project/pipelines
 SimulationPipeline.py     Locally Modified          439 


Fixed the pipeline simulation build

----------
kfleming    Date: Thu May 27 23:56:39 EDT 2010  CSN: CSN-platforms-441
                  Fri May 28 03:56:39 UTC 2010


Directory modules/project
 SCons.top.pipeline.template Locally Modified          440 

Added linking of Bluespec .so to pipeline build.  

----------
mcadler     Date: Fri May 28 16:59:27 EDT 2010  CSN: CSN-platforms-442
                  Fri May 28 20:59:27 UTC 2010


Directory modules/bluespec/librl/base
 lfsr.bsv                  Locally Added               0 
 librl-bsv-base.awb        Locally Modified          441 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.bsv    Locally Modified          441 

- Add a variety of LFSR feed polynomials.
- Manage scratchpad LUTRAM ports.

----------
kfleming    Date: Thu Jun  3 18:10:45 EDT 2010  CSN: CSN-platforms-444
                  Thu Jun  3 22:10:45 UTC 2010


Directory modules/bluespec/common/fpgaenv/fpga-components
 hardware-fpga-components-virtex2.awb Locally Modified          443 
 hardware-fpga-components-virtex5.awb Locally Modified          443 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/jtag/xilinx
 jtag-device-physical.awb  Locally Added               0 
 debug/                    Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/jtag/xilinx/debug
 jtag-debug.h              Locally Added               0 
 jtag-debug.awb            Locally Added               0 
 jtag-debug.bsv            Locally Added               0 
 jtag-debug-server.h       Locally Added               0 
 jtag-debug.cpp            Locally Added               0 
 jtag-debug.rrr            Locally Added               0 
 jtag-debug-server.cpp     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/jtag/xilinx
 jtag-import.bsv           Locally Added               0 
 mdm.vhd                   Locally Modified          443 


Added more body for xilinx jtag, added string parameters for xilinx
families.  These paramaters tend to be sprinkled amoung xilinx
sources, so I added them.

----------
keflemin    Date: Thu Jun  3 20:33:08 EDT 2010  CSN: CSN-platforms-445
                  Fri Jun  4 00:33:08 UTC 2010


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/jtag/xilinx
 srl_fifo.vhd              Locally Removed           444 
 jtag-device.cpp           Locally Added               0 
 jtag-device-physical.awb  Locally Modified          444 
 jtag_control.vhd          Locally Modified          444 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/jtag/xilinx/debug
 jtag-debug.awb            Locally Modified          444 
 jtag-debug.bsv            Locally Modified          444 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/jtag/xilinx
 jtag_srl_fifo.vhd         Locally Added               - 
 jtag-device.h             Locally Added               0 


Fixed numerous compilation bugs.  Still has some issue compiling the
xilinx primitives.

----------
kfleming    Date: Fri Jun  4 13:25:52 EDT 2010  CSN: CSN-platforms-446
                  Fri Jun  4 17:25:52 UTC 2010


Directory modules/bluespec/common/fpgaenv/fpga-components
 bscan-virtex5.v           Locally Added               0 
 hardware-fpga-components-virtex5.awb Locally Modified          445 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/jtag/xilinx
 jtag_control.vhd          Locally Modified          445 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/jtag/xilinx/debug
 jtag-debug-server.h       Locally Modified          445 
 jtag-debug.rrr            Locally Modified          445 
 jtag-debug-server.cpp     Locally Modified          445 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/jtag/xilinx
 jtag-import.bsv           Locally Modified          445 
 mdm.vhd                   Locally Modified          445 


JTAG controller now synthesizes for virtex 5

----------
keflemin    Date: Fri Jun  4 20:05:37 EDT 2010  CSN: CSN-platforms-447
                  Sat Jun  5 00:05:37 UTC 2010


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/jtag/xilinx
 jtag_control.vhd          Locally Modified          446 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/jtag/xilinx/debug
 jtag-debug.bsv            Locally Modified          446 
 jtag-debug-server.h       Locally Modified          446 
 jtag-debug.cpp            Locally Modified          446 
 jtag-debug.rrr            Locally Modified          446 
 jtag-debug-server.cpp     Locally Modified          446 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/jtag/xilinx
 jtag-import.bsv           Locally Modified          446 
 mdm.vhd                   Locally Modified          446 



Jtag now compiles and partly runs.  

----------
keflemin    Date: Sun Jun  6 12:45:22 EDT 2010  CSN: CSN-platforms-448
                  Sun Jun  6 16:45:22 UTC 2010


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/jtag/xilinx
 jtag-device-physical.awb  Locally Modified          447 
 mdm_core.vhd              Locally Modified          447 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/jtag/xilinx/debug
 jtag-debug.bsv            Locally Modified          447 
 jtag-debug.cpp            Locally Modified          447 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/jtag/xilinx
 mdm.vhd                   Locally Modified          447 


JTAG debugger operational.  Running it requires the use of the Xilinx XMD program terminal, as will any physical channel based on the jtag.  Interestingly, multiple JTAGs can be instantiated and used simulatneously (4 on the virtex 5 110t).

----------
keflemin    Date: Fri Jun 11 18:27:15 EDT 2010  CSN: CSN-platforms-449
                  Fri Jun 11 22:27:15 UTC 2010


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-htg-v5-jtag.apm Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/jtag
 jtag-physical-channel.cpp Locally Modified          448 
 jtag-physical-channel.h   Locally Modified          448 
 jtag-physical-channel.bsv Locally Modified          448 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/jtag
 htg-v5-jtag.h             Locally Added               - 
 htg-v5-jtag.bsv           Locally Added               - 
 htg-v5-pcie-enabled.sdc   Locally Removed           448 
 htg-v5-pcie-enabled.awb   Locally Removed           448 
 htg-v5-pcie-enabled.ucf   Locally Removed           448 
 htg-v5-pcie-enabled.cpp   Locally Removed           448 
 htg-v5-pcie-enabled-synplify.awb Locally Removed           448 
 htg-v5-jtag.sdc           Locally Added               - 
 htg-v5-jtag.awb           Locally Added               - 
 htg-v5-pcie-enabled.h     Locally Removed           448 
 htg-v5-pcie-enabled-synplify.ucf Locally Removed           448 
 htg-v5-jtag.ucf           Locally Added               - 
 htg-v5-pcie-enabled.bsv   Locally Removed           448 
 htg-v5-jtag.cpp           Locally Added               - 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/jtag/altera
 AvalonJtag.bsv            Locally Modified          448 
 jtag-device.cpp           Locally Added               0 
 jtag-device.h             Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/jtag/xilinx
 jtag-device.cpp           Locally Modified          448 
 jtag-device-physical.awb  Locally Modified          448 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/jtag/xilinx/debug
 jtag-debug.bsv            Locally Modified          448 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/jtag/xilinx
 jtag-import.bsv           Locally Modified          448 
 jtag-device.h             Locally Modified          448 


Functional JTAG Physical Channel for Xilinx devices.  This can be used
on any Virtex chip for activities such as debugging faster physical
channels.  The speed is low (~100B/s), but can probably be improved
with a little effort. 

XMD is a pretty terrible tool.  For the JTAG to operate, it requires
frequent user input in the form of carriage returns.  It also requires
the hardware to write at least 32 bytes before XMD will deign to read
its buffer.  Just another example of a fine Xilinx tool. 



----------
pellauer    Date: Wed Jun 16 14:35:32 EDT 2010  CSN: CSN-platforms-450
                  Wed Jun 16 18:35:32 UTC 2010


Directory modules/bluespec/librl/storage
 librl-bsv-storage.awb     Locally Modified          449 
 fifo-mem.bsv              Locally Modified          449 
 fpga-fifos.bsv            Locally Removed           449 


* Add mkLUTRAMSizedFIFO to fifo-mem.bsv

* Remove obsolete fpga-fifos.bsv file. Seems to be unused.

Michael P.

----------
pellauer    Date: Thu Jun 17 12:29:00 EDT 2010  CSN: CSN-platforms-451
                  Thu Jun 17 16:29:00 UTC 2010


Directory modules/bluespec/librl/storage
 fifo-mem.bsv              Locally Modified          450 


* Apparently deleting that file had an unexpected side effect: it was the only
place in librl_storage to #include fpga_components. It turns out that other 
files were relying on this #include. So commenting the contents of the file out
worked (since I didn't think to comment out the #includes) but actually
deleting it did not.

Michael P.

----------
pellauer    Date: Fri Jun 18 17:21:35 EDT 2010  CSN: CSN-platforms-452
                  Fri Jun 18 21:21:35 UTC 2010


Directory modules/bluespec/common/fpgaenv/fpga-components
 lutram.bsv                Locally Modified          451 
 lutram.v                  Locally Modified          451 


* Scheduling fix-up. The Bluespec scheduler stopped noticing that things were
  mutually exclusive again, particularly with regards to "initialization" 
  events. So now we use a method that writes a wire that feeds a rule. We
  can put whatever attributes we want on the rule, so everything is happy
  and the hardware is unchanged. MANY fewer warnings are issued though.

* Remove the "initialized" field from LUTRAMs. This was my last attempt at a fix 
  and it wasn't as succesful as the Wire approach.
  
Michael P.

----------
mcadler     Date: Wed Jun 23 07:44:00 EDT 2010  CSN: CSN-platforms-454
                  Wed Jun 23 11:44:00 UTC 2010


Directory modules/bluespec/librl/base
 debug-file.bsv            Locally Modified          453 
 memory-pack.bsv           Locally Modified          453 

- Many to 1 memory packing had an easy deadlock pattern.  The write path must
  do a read-modify-write to update the container.  Because of the module
  hierarchy, the RMW path shares read port 0.  If read requests come in that
  fill the read port 0 output buffer then no writes (RMWs) can fire.

  Adding a separate read port for RMW is not an option because of the module
  hierarchy.  The underlying structure has already been instantiated and the
  many to 1 packing is supposed to be transparent.

  Solution:
    1. All read ports are limited to N outstanding requests.  Currently N is
       set to match the corresponding limit in scratchpads.
    2. Provide local buffering for read port 0 results so the underlying
       shared read port never deadlocks with the wrong data.

  Performance with scratchpads should be unchanged, since the scratchpad
  was already limiting the number of read requests in flight.

- Debug file: for synthesized builds always use the null implementation.
  Xst was not eliminating the whole thing and fan-out was a timing problem.

----------
mcadler     Date: Wed Jun 23 18:57:11 EDT 2010  CSN: CSN-platforms-455
                  Wed Jun 23 22:57:11 UTC 2010


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.cpp    Locally Modified          454 

Update METHOD_ID names following Angshuman's RRR changes.

----------
kfleming    Date: Wed Jun 30 16:47:46 EDT 2010  CSN: CSN-platforms-456
                  Wed Jun 30 20:47:46 UTC 2010


Directory modules/bluespec/common/fpgaenv/physical-platform/development_board_arriaII_gx/jtag
 altera-jtag.bsv           Locally Modified          455 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/jtag/altera
 jtag-device.cpp           Locally Modified          455 
 jtag-device.h             Locally Modified          455 
 avalon_jtag.awb           Locally Modified          455 


Resurrected the altera JTAG physical channel using the unified
jtag-channel driver.  Now Xilinx and Altera share most of the JTAG codes. 

----------
mcadler     Date: Wed Jun 30 22:05:42 EDT 2010  CSN: CSN-platforms-457
                  Thu Jul  1 02:05:42 UTC 2010


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-exe-local-scratchpad.apm Locally Added               0 
 std-virtual-devices-local-scratchpad.apm Locally Added               0 

Add configurations with scratchpads that use local memory (not hybrid and no
central cache.)

----------
kfleming    Date: Thu Jul  1 22:57:28 EDT 2010  CSN: CSN-platforms-458
                  Fri Jul  2 02:57:28 UTC 2010


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-xupv2-serial.apm Locally Modified          457 
 fpgaenv-hybrid-xupv2-serial-synplify.apm Locally Removed           457 
 fpgaenv-hybrid-xupv2-serial-chanIO-loopback.apm Locally Removed           457 


Removed dependencies on MIT 6.375

----------
kfleming    Date: Mon Jul  5 18:17:02 EDT 2010  CSN: CSN-platforms-459
                  Mon Jul  5 22:17:02 UTC 2010


Directory modules/bluespec/common/fpgaenv/fpga-components
 xilinx.xcf                Locally Added               0 
 hardware-fpga-components-virtex5.awb Locally Modified          458 

Directory modules/project
 SCons.top.pipeline.template Locally Modified          458 
 ModuleList.py             Locally Modified          458 

Directory modules/project/xilinx
 XST.py                    Locally Modified          458 


Added support for xcf file type in the pipeline build.  This type allows us to specify ucf constraints to xst directly, allowing us to instantiate unused clock-domain crossings without confusing downstream tools (ngdbuild in particular).  This has the potential to collapse code related to physical platform, as unused physical devices will not crash ngdbuild.   

----------
kfleming    Date: Sat Jul 10 18:04:36 EDT 2010  CSN: CSN-platforms-460
                  Sat Jul 10 22:04:36 UTC 2010


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-evaluation-arriaII-jtag.apm Locally Modified          459 

Directory modules/bluespec/common/fpgaenv/fpga-components
 user-clock-sim.bsv        Locally Added               0 
 user-clock.bsv            Locally Modified          459 
 software-fpga-components.awb Locally Modified          459 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks/simulation
 sim-clocks-device.awb     Locally Modified          459 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks/null
 null-clocks-device.awb    Locally Modified          459 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks/differential
 differential-clocks-device.awb Locally Modified          459 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks/single-ended
 single-ended-clocks-device.awb Locally Modified          459 

Directory modules/project/pipelines
 FPGAPipeline.py           Locally Modified          459 

Directory modules/project/xilinx
 XST.py                    Locally Modified          459 


Altered clocks devices to have CRYSTAL_CLOCK parameter, and added a
ratioed clock simulation model, since this device now appears in user
codes (OFDM).  Also fixed pipeline build to function if no XCF files
are available.

----------
kfleming    Date: Fri Jul 16 11:26:06 EDT 2010  CSN: CSN-platforms-461
                  Fri Jul 16 15:26:06 UTC 2010


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-xupv2-serial.apm Locally Modified          460 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          460 
 fpgaenv-hybrid-evaluation-arriaII-jtag.apm Locally Modified          460 
 fpgaenv-htg-hwonly.apm    Locally Modified          460 
 fpgaenv-hybrid-htg-v5-pcie.apm Locally Modified          460 
 hasim-fpgaenv-null.apm    Locally Modified          460 
 fpgaenv-cycloneiii-jtag.apm Locally Modified          460 
 hasim-fpgaenv-xup.apm     Locally Modified          460 
 fpgaenv-hybrid-htg-v5-jtag.apm Locally Modified          460 

Directory modules/bluespec/common/fpgaenv/fpga-components
 xilinx.xcf                Locally Modified          460 

Directory modules/project/pipelines
 fpga-build-pipeline.awb   Locally Modified          460 
 FPGAPipeline.py           Locally Modified          460 

Directory modules/project
 bluespec/                 Locally Added               0 

Directory modules/project/bluespec
 MCD.py                    Locally Added               0 
 mcd.awb                   Locally Added               0 

Directory modules/project/xilinx
 xst-nobasicio.awb         Locally Added               0 
 XILINX_NGD.py             Locally Modified          460 
 XSTnobasicio.py           Locally Added               - 


Added a few build tools, most notably the mcd build tool, which
injects ucf constraints if MCD codes are detected.  Eventually, we
should make this handle all known synchronization primitives, but it
currently does not.  

Also added new XST build which does not invoke the basicio script on
the top level verilog.  This points to a reorganization, making the
basicio invocation a first class citizen.



----------
keflemin    Date: Tue Jul 20 20:06:03 EDT 2010  CSN: CSN-platforms-462
                  Wed Jul 21 00:06:03 UTC 2010


Directory modules/application-env/hybrid/soft-connections
 application-env-hybrid-soft-conn.bsv Locally Modified          461 


Added a liftModule to drop the Module leavings of the soft connections code. 

----------
keflemin    Date: Wed Jul 21 12:44:52 EDT 2010  CSN: CSN-platforms-463
                  Wed Jul 21 16:44:52 UTC 2010


Directory modules/bluespec/common/fpgaenv/fpga-components
 user-clock.bsv            Locally Modified          462 


Refined clock generation to ensure that we try to eliminate
instantiating DCMs as much as possible.  Also, the case of
instantiating a DCM with multiplier = 1 has been removed, since this
chokes downstream tools.

----------
keflemin    Date: Wed Jul 21 20:14:55 EDT 2010  CSN: CSN-platforms-464
                  Thu Jul 22 00:14:55 UTC 2010


Directory modules/bluespec/common/fpgaenv/fpga-components
 user-clock.bsv            Locally Modified          463 


Fixed egregious typo in user clocks.  Don't know how it passed regression.

----------
keflemin    Date: Sun Jul 25 15:06:10 EDT 2010  CSN: CSN-platforms-465
                  Sun Jul 25 19:06:10 UTC 2010


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/jtag
 jtag-physical-channel.cpp Locally Modified          464 
 jtag-physical-channel.h   Locally Modified          464 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 arbiters.bsv              Locally Modified          464 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/jtag/xilinx
 jtag-device.cpp           Locally Modified          464 
 jtag-device.h             Locally Modified          464 

Directory modules/project
 SCons.top.template        Locally Modified          464 


Adjusted when the jtag connection gets brought up, ensuring that this
occurs after any fpga programming step (by way of waiting until a data
transfer request comes through).  Eventually, we'll build an expanded
system for dealing with FPGA programming.  

I also added the -aul and -aut options to improve multiple tool
compatibility.  Those writing physical platform modules should watch
carefully as missing top level connections will be warnings, rather
than errors.  It is probably best to remove this option when
developing a physical platform.

----------
keflemin    Date: Mon Aug  2 21:09:26 EDT 2010  CSN: CSN-platforms-466
                  Tue Aug  3 01:09:26 UTC 2010


Directory modules/bluespec/common/fpgaenv/fpga-components
 user-clock.bsv            Locally Modified          465 

Directory modules/application-env/hybrid
 soft-services/            Locally Added               0 

Directory modules/application-env/hybrid/soft-services
 application-env-hybrid-soft-service.cpp Locally Added               0 
 application-env-hybrid-soft-service.h Locally Added               0 
 application-env-hybrid-soft-service.awb Locally Added               0 
 application-env-hybrid-soft-service.bsv Locally Added               0 



Added top level for soft-services.

----------
keflemin    Date: Fri Aug  6 20:38:55 EDT 2010  CSN: CSN-platforms-467
                  Sat Aug  7 00:38:55 UTC 2010


Directory modules/project
 SCons.top.pipeline.template Locally Modified          466 


Removed gsl dependencies from build pipeline.  This link step was
subsumed by the better descriptional quality of the library link step.

----------
keflemin    Date: Sun Aug  8 18:10:06 EDT 2010  CSN: CSN-platforms-468
                  Sun Aug  8 22:10:06 UTC 2010


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks/null
 null-clocks-device.awb    Locally Modified          467 

Directory modules/project
 SCons.hw.pipeline.template Locally Modified          467 


Added Clock Multiplier and Divider parameters to null clocks device to
pass check in clocks soft service.  I wonder if these parameters might
be removed in all models at some point.  

Modified pipeline build to use the soft connection switch to awb.
This turns on clock route-through code generation.

----------
kfleming    Date: Fri Aug 13 11:59:04 EDT 2010  CSN: CSN-platforms-469
                  Fri Aug 13 15:59:04 UTC 2010


Directory modules/project
 multifpga/                Locally Added               0 

Directory modules/project/multifpga
 multitest.py              Locally Added               0 
 connection.py             Locally Added               0 
 multilex.py               Locally Added               0 
 environment.py            Locally Added               0 
 platform.py               Locally Added               0 
 multiparse.py             Locally Added               0 


Added python code for reading a multiple fpga specification and
generating routing tables for each node based on the specified
connections.  The main intent of this code is to provide a per-fpga
Bluespec function describing node routing path.  Currently the
generatated routing tables are very simple - directed dijkstra nearest
neighbors.  The code also provides some rudimentatry legality checks
for the user specified graph.  This code requires ply and pygraph
libraries for python.

multi*.py - parser/lexer for input language

environment/platform/connection - rudimentary IR classes.  

This will soon turn in to a build step for constructing multi-fpga
implementations.  

----------
pellauer    Date: Fri Aug 13 14:09:38 EDT 2010  CSN: CSN-platforms-470
                  Fri Aug 13 18:09:38 UTC 2010


Directory modules/bluespec/librl/base
 guarded-pipelines.bsv     Locally Added               0 
 librl-bsv-base.awb        Locally Modified          469 

Directory modules/bluespec/common/fpgaenv/fpga-components
 fp_sqrt.v                 Locally Added               0 
 fp_add.ngc                Locally Added               0 
 fp_cvt_i_to_s.ngc         Locally Added               0 
 fp_mul.ngc                Locally Added               0 
 fp_cvt_i_to_d.v           Locally Added               0 
 fp_cvt_d_to_i.ngc         Locally Added               0 
 fp_cmp.v                  Locally Added               0 
 fp_div.v                  Locally Added               0 
 fp_cvt_s_to_d.v           Locally Added               0 
 fp_cvt_d_to_s.ngc         Locally Added               0 
 fp_cvt_i_to_s.v           Locally Added               0 
 fp_add.v                  Locally Added               0 
 fp_sqrt.ngc               Locally Added               0 
 fp_mul.v                  Locally Added               0 
 floating-point-accel.bsv  Locally Added               0 
 floating-point-import.bsv Locally Added               0 
 fp_cvt_d_to_i.v           Locally Added               0 
 fp_cvt_i_to_d.ngc         Locally Added               0 
 hardware-fpga-components-virtex5.awb Locally Modified          469 
 fp_cmp.ngc                Locally Added               0 
 fp_cvt_d_to_s.v           Locally Added               0 
 fp_div.ngc                Locally Added               0 
 fp_cvt_s_to_d.ngc         Locally Added               0 


* Add Xilinx floating-point cores to hardware FPGA components.
* Add  "guarded pipeline" support -- generically wrap any syncrhonous pipeline
  into a buffer-reserving latency-insensitive version. This is used to wrap
  all the floating point cores.

----------
keflemin    Date: Mon Aug 16 17:14:55 EDT 2010  CSN: CSN-platforms-471
                  Mon Aug 16 21:14:55 UTC 2010


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-exe.apm    Locally Modified          470 

Directory config/pm/hasim/submodels
 pipelines/                Locally Added               0 

Directory config/pm/hasim/submodels/pipelines
 build-pipeline-altera.apm Locally Added               0 
 build-pipeline-xilinx.apm Locally Added               0 
 build-pipeline-bluesim.apm Locally Added               0 

Directory modules/project
 project-pipeline.awb      Locally Modified          470 
 Utils.py                  Locally Modified          470 

Directory modules/project/pipelines
 verilog-build-pipeline.awb Locally Added               0 
 sim-build-pipeline.awb    Locally Modified          470 
 SimulationPipeline.py     Locally Modified          470 
 VerilogPipeline.py        Locally Added               0 
 fpga-build-pipeline.awb   Locally Modified          470 
 FPGAPipeline.py           Locally Modified          470 

Directory modules/project
 SCons.top.pipeline.template Locally Modified          470 
 iface/                    Locally Added               0 

Directory modules/project/iface
 iface.awb                 Locally Added               0 
 iface.py                  Locally Added               0 

Directory modules/project
 verilog/                  Locally Added               0 

Directory modules/project/verilog
 VERILOG.PY                Locally Added               0 
 verilog.py                Locally Added               0 

Directory modules/project
 ModuleList.py             Locally Modified          470 

Directory modules/project/altera
 ALTERA_POST_SYNTH.py      Locally Modified          470 

Directory modules/project/xilinx
 XILINX_LOADER.py          Locally Modified          470 
 XILINX_BITGEN.py          Locally Modified          470 

Directory modules/project
 software/                 Locally Added               0 

Directory modules/project/software
 software.py               Locally Added               0 
 software.awb              Locally Added               0 

Directory modules/project/bluespec
 bsv-exe.awb               Locally Added               0 
 BSV.py                    Locally Added               0 
 bsv.awb                   Locally Added               0 
 bluesim.py                Locally Added               0 

Directory modules/project
 CommandLine.py            Locally Added               0 



This large checkin (I seem to be fond of these lately) refactors large
portions of the build pipeline code.  This change has been anticipated
for some time, but the needs of the multifpga build branch have
finally required it to happen.  This code is also needed for my
attempt to support the fish-class simulators.  The basic idea is that
all the functionality that was in SCons.top has been logically
partitioned into sub builds.  The only thing which has not been
changed are the sw and hw sub-scons.  These will eventually turn into
SCons functions, finally enabling us to get the build deps right (as
opposed to the current amorphous blob-o-deps we get from the sub-scons).

----------
keflemin    Date: Tue Aug 17 14:17:52 EDT 2010  CSN: CSN-platforms-472
                  Tue Aug 17 18:17:52 UTC 2010


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-xupv2-serial.apm Locally Modified          471 
 fpgaenv-hybrid-htg-v5-pcie-synplify.apm Locally Modified          471 
 fpgaenv-hybrid-evaluation-arriaII-jtag.apm Locally Modified          471 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Modified          471 
 fpgaenv-htg-hwonly.apm    Locally Modified          471 
 fpgaenv-hybrid-exe.apm    Locally Modified          471 
 fpgaenv-hybrid-exe-local-scratchpad.apm Locally Modified          471 
 fpgaenv-hybrid-exe-serial-ChanIO-loopback.apm Locally Modified          471 
 hasim-fpgaenv-hybrid-sim.apm Locally Modified          471 
 fpgaenv-hybrid-htg-v5-pcie.apm Locally Modified          471 
 hasim-fpgaenv-null.apm    Locally Modified          471 
 fpgaenv-cycloneiii-jtag.apm Locally Modified          471 
 hasim-fpgaenv-xup.apm     Locally Modified          471 
 fpgaenv-hybrid-htg-v5-jtag.apm Locally Modified          471 

Directory config/pm/hasim/submodels/pipelines
 build-pipeline-xilinx-synplify.apm Locally Added               0 


Fixed broken apms from yesterday's check in.

----------
kfleming    Date: Thu Sep  2 23:40:01 EDT 2010  CSN: CSN-platforms-473
                  Fri Sep  3 03:40:01 UTC 2010


Directory modules/project/xilinx
 XST.py                    Locally Modified          472 


Fixed zero-length list bug in XST.py

----------
kfleming    Date: Sat Sep 11 15:57:13 EDT 2010  CSN: CSN-platforms-474
                  Sat Sep 11 19:57:13 UTC 2010


Directory modules/bluespec/librl/base
 memory-interface.bsv      Locally Modified          473 

Added sized safe reader memory interface.  This was needed to allieviate one of many performance bottlenecks in h.264.

----------
mcadler     Date: Fri Sep 24 10:32:05 EDT 2010  CSN: CSN-platforms-475
                  Fri Sep 24 14:32:05 UTC 2010


Directory modules/bluespec/librl/storage/cache
 rl-set-assoc-cache.bsv    Locally Modified          474 

Fix pipelining of requests.  The metadata read request pipeline was too small,
only allowing two outstanding requests.  Now allows 16.

----------
mcadler     Date: Mon Sep 27 15:58:03 EDT 2010  CSN: CSN-platforms-476
                  Mon Sep 27 19:58:03 UTC 2010


Directory modules/bluespec/librl/storage/cache
 rl-direct-mapped-cache.bsv Locally Modified          475 
 rl-set-assoc-cache.bsv    Locally Modified          475 
 rl-cache.bsv              Locally Modified          475 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/central-cache
 central-cache-interfaces.bsv Locally Modified          475 
 local-mem-central-cache.bsv Locally Modified          475 

- Improve buffering for central cache RAM latency, trying to keep more in flight
  for pipelined memory.
- Move the recent read line cache into the set associative cache implementation.
  This greatly simplifies the central cache code and eliminates a filter that
  blocked the request queue when faced with multiple references to the same line.
  The penalty is longer latency on recent line hits.  This should be offset
  by improved line-conflict handling (next check-in) that will shunt requests
  to in-flight lines to a side buffer.

----------
mcadler     Date: Tue Sep 28 10:19:28 EDT 2010  CSN: CSN-platforms-477
                  Tue Sep 28 14:19:28 UTC 2010


Directory modules/bluespec/librl/storage/cache
 rl-set-assoc-cache.bsv    Locally Modified          476 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/central-cache
 local-mem-central-cache.bsv Locally Modified          476 

- Add a side buffer to the set associative cache.  New requests to a set
  already in flight used to block the request queue.  Now up to 8 are
  buffered on the side.  For now, requests come out of this conflict queue
  FIFO to avoid having to search for the youngest request for a given set.

- Fix a deadlock in the central cache local memory handler introduced in the
  last check-in.

----------
kfleming    Date: Sun Oct  3 16:46:56 EDT 2010  CSN: CSN-platforms-478
                  Sun Oct  3 20:46:56 UTC 2010


Directory config/pm/hasim/submodels/pipelines
 build-pipeline-xilinx.apm Locally Modified          477 

Directory modules/bluespec/common/fpgaenv/fpga-components
 user-clock.bsv            Locally Modified          477 


Fixed bug in user-clock.  When synthesizing for frequency we now use
the mkUserClock decision tree rather than going directly for
mkUserClock_Ratio.  As such, we were not inferring clock dividers. 

I also removed the basicio call from the default xilinx pipeline.
Basicio is useful only when using synplify.  

----------
kfleming    Date: Fri Oct  8 17:24:21 EDT 2010  CSN: CSN-platforms-479
                  Fri Oct  8 21:24:21 UTC 2010


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-xup-v5-jtag.apm Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform
 xilinx_xupV5/             Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5
 jtag/                     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5/jtag
 xilinx-xup-jtag.awb       Locally Added               0 
 xilinx-xup-jtag.bsv       Locally Added               0 
 xilinx.download           Locally Added               0 
 xilinx.ut                 Locally Added               0 
 xilinx.sdc                Locally Added               0 
 xilinx-xup-jtag.ucf       Locally Added               0 
 xilinx.sdf                Locally Added               0 
 xilinx.xst                Locally Added               0 
 xilinx-xup-jtag.cpp       Locally Added               0 
 xilinx-xup-jtag.h         Locally Added               0 



A basic JTAG platform for XUPV5.  

----------
kfleming    Date: Tue Oct 12 19:11:18 EDT 2010  CSN: CSN-platforms-480
                  Tue Oct 12 23:11:18 UTC 2010


Directory config/pm/hasim/submodels/pipelines
 build-pipeline-xilinx.apm Locally Modified          479 

Directory modules/project
 Utils.py                  Locally Modified          479 

Directory modules/project/multifpga
 multitest.py              Locally Modified          479 
 multilex.py               Locally Modified          479 

Directory modules/project
 SCons.top.pipeline.template Locally Modified          479 
 ModuleList.py             Locally Modified          479 

Directory modules/project/xilinx
 XSTnobasicio.py           Locally Modified          479 
 XST.py                    Locally Modified          479 

Directory modules/project
 Module.py                 Locally Modified          479 

Directory modules/project/bluespec
 BSV.py                    Locally Modified          479 
 bluesim.py                Locally Modified          479 
 MCD.py                    Locally Modified          479 

Directory modules/application-env/hybrid/soft-connections
 application-env-hybrid-soft-conn.awb Locally Modified          479 


Major rework of pipeline build to bring BSV builds into the new
compilation scheme. We no longer use the recursive sub-SCons files but
do a synthesis-boundary by synthesis-boundary build in the top level
SCons.  Also changed are the depenedencies for building NGC files for
XST.  We now depend only on the stub verilog files, which means that
changes in one boundary _do_not_ force a rebuild of all boundaries.
This can yield substantial build speedups. Also, bluesim builds should
no longer depend on verilog sources, helping cut down on license usage. 


----------
kfleming    Date: Sun Oct 17 15:03:01 EDT 2010  CSN: CSN-platforms-481
                  Sun Oct 17 19:03:01 UTC 2010


Directory modules/bluespec/common/fpgaenv/fpga-components
 hardware-fpga-components-arriaII.awb Locally Modified          480 
 clock_import.v            Locally Added               0 
 clock-import.bsv          Locally Added               0 
 hardware-fpga-components-virtex2.awb Locally Modified          480 
 hardware-fpga-components-virtex5.awb Locally Modified          480 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel
 pcie-bluespec/            Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-bluespec
 pcie-bluespec-physical-channel.cpp Locally Added               0 
 pcie-bluespec-physical-channel.h Locally Added               0 
 pcie-bluespec-physical-channel.awb Locally Added               0 
 pcie-bluespec-physical-channel.bsv Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5
 pcie/                     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5/pcie
 xilinx-xup-pcie.ucf       Locally Added               0 
 xilinx.download           Locally Added               0 
 xilinx.ut                 Locally Added               0 
 xilinx.sdc                Locally Added               0 
 xilinx-xup-pcie.cpp       Locally Added               0 
 xilinx.sdf                Locally Added               0 
 xilinx.xst                Locally Added               0 
 xilinx-xup-pcie.h         Locally Added               0 
 xilinx-xup-pcie.awb       Locally Added               0 
 xilinx-xup-pcie.bsv       Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 pci-express-bluespec/     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-bluespec
 pcie-import.bsv           Locally Added               0 
 pcie-device.h             Locally Added               0 
 pcie_endpoint.v           Locally Added               0 
 PioFifo.bsv               Locally Added               0 
 Bridge.bsv                Locally Added               0 
 pcie_endpoint.ngc         Locally Added               0 
 server.cpp                Locally Added               0 
 pcie-wrapper.bsv          Locally Added               0 
 pcie-bluespec.awb         Locally Added               0 
 LLVirtex5PCIE.bsv         Locally Added               0 
 pcie_endpoint.xco         Locally Added               0 
 pcie-device.ucf           Locally Added               0 
 server.h                  Locally Added               0 
 pcie-device.cpp           Locally Added               0 

Directory modules/project
 ModuleList.py             Locally Modified          480 

Directory modules/project/software
 software.py               Locally Modified          480 



Intermediate check-in of PCIE support for XUPV5.  This code does
appear to scale to other Xilinx boards, something that might be useful
in the future.  Also included is a minor rework of the build pipeline
which raises our compatibility with pygraph to version 1.8.  This was
needed because earlier versions of pygraph can no longer be built, but
it does break backwards compatibility.  This should be okay moving
forward, but I would like to have an automatic way of building a
python enviroment. 



----------
kfleming    Date: Sun Oct 17 22:55:00 EDT 2010  CSN: CSN-platforms-482
                  Mon Oct 18 02:55:00 UTC 2010


Directory modules/bluespec/common/fpgaenv/fpga-components
 clock_import.v            Locally Modified          481 
 clock-import.bsv          Locally Modified          481 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-bluespec
 pcie-bluespec-physical-channel.bsv Locally Modified          481 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-bluespec
 pcie-import.bsv           Locally Modified          481 
 Bridge.bsv                Locally Modified          481 
 pcie-bluespec.awb         Locally Modified          481 
 pcie-device.ucf           Locally Modified          481 


Modifications to pcie code.  It nearly makes timing at this point. 

----------

----------
kfleming    Date: Mon Oct 25 20:16:39 EDT 2010  CSN: CSN-platforms-483
                  Tue Oct 26 00:16:39 UTC 2010


Directory admin
 mytags                    Locally Modified          482 

Directory modules/project
 SCons.top.pipeline.template Locally Modified          482 
 SCons.top.template        Locally Modified          482 

Directory .
 changes                   Locally Modified          482 


Added a helpful warning about the realtive positioning of leap and
platforms in the build scripts.

----------
kfleming    Date: Fri Oct 29 17:59:04 EDT 2010  CSN: CSN-platforms-484
                  Fri Oct 29 21:59:04 UTC 2010


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-xup-v5-pcie.apm Locally Added               0 

Directory modules/bluespec/common/fpgaenv/fpga-components
 clock-import.bsv          Locally Modified          483 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-bluespec
 pcie-bluespec-physical-channel.cpp Locally Modified          483 
 pcie-bluespec-physical-channel.bsv Locally Modified          483 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5/pcie
 xilinx-xup-pcie.ucf       Locally Modified          483 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-bluespec
 pcie-import.bsv           Locally Modified          483 
 pcie_endpoint.v           Locally Modified          483 
 pcie_bury.v               Locally Added               0 
 Bridge.bsv                Locally Modified          483 
 server.cpp                Locally Modified          483 
 pcie-bluespec.awb         Locally Modified          483 
 pcie-device.ucf           Locally Modified          483 
 pcie-device.xcf           Locally Added               0 
 pcie-device.cpp           Locally Modified          483 
 pcie_bury.bsv             Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks/single-ended
 single-ended-clocks-device.bsv Locally Modified          483 

Directory modules/project
 SCons.top.template        Locally Modified          483 



Completed support for Bluespec's PCIE device.  Now passes rrrtest.
These means awb can probably support all designs that bluespec supports by simply changing some parameters.  We can now operate the XUPV5.

----------
kfleming    Date: Fri Oct 29 18:42:03 EDT 2010  CSN: CSN-platforms-485
                  Fri Oct 29 22:42:03 UTC 2010


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-bluespec
 pcie-bluespec-physical-channel.cpp Locally Modified          484 


Removed some debugging code, PCIE link now 4x faster.  There's a lot
more optimization that can be done here (I think we're leaving ~10-20x
of easy optimization on the table for future generations).  Removing
software layers and exploiting a wider (say 64-bit) interface will be
key.

----------
kfleming    Date: Sat Oct 30 17:01:41 EDT 2010  CSN: CSN-platforms-486
                  Sat Oct 30 21:01:41 UTC 2010


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-xup-v5-pcie-altera.apm Locally Added               0 



Added an altera libraries version of the xup V5.

----------
kfleming    Date: Mon Nov  1 14:14:58 EDT 2010  CSN: CSN-platforms-487
                  Mon Nov  1 18:14:58 UTC 2010


Directory modules/application-env/hybrid/soft-connections
 application-env-hybrid-soft-conn.awb Locally Modified          486 


Removed spurious synthesis boundary.  This prevented building some designs.

----------
jsemer      Date: Thu Nov 11 12:12:46 EST 2010  CSN: CSN-platforms-488
                  Thu Nov 11 17:12:46 UTC 2010


Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 hybrid-fp.cpp             Locally Modified          487 

Use leap-front-panel instead of hasim-front-panel as the
hybrid front panel.

----------
kfleming    Date: Thu Nov 11 23:49:49 EST 2010  CSN: CSN-platforms-489
                  Fri Nov 12 04:49:49 UTC 2010


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-evaluation-arriaII-jtag.apm Locally Modified          488 
 fpgaenv-cycloneiii-jtag.apm Locally Modified          488 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/jtag
 altera/                   Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/jtag/altera
 jtag-physical-channel.cpp Locally Added               0 
 jtag-physical-channel.h   Locally Added               0 
 jtag-physical-channel.awb Locally Added               0 
 jtag-physical-channel.bsv Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform
 development_board_arriaII_gx/ Locally Removed           488 

Directory modules/bluespec/common/fpgaenv/physical-platform/development_board_arriaII_gx
 jtag/                     Locally Removed           488 

Directory modules/bluespec/common/fpgaenv/physical-platform/development_board_arriaII_gx/jtag
 altera-jtag.h             Locally Removed           488 
 altera-jtag.awb           Locally Removed           488 
 altera-jtag.bsv           Locally Removed           488 
 altera-jtag.cpp           Locally Removed           488 
 arriaII_dev/              Locally Removed           488 

Directory modules/bluespec/common/fpgaenv/physical-platform/development_board_arriaII_gx/jtag/arriaII_dev
 jtag.sdf                  Locally Removed           488 
 altera-arriaIIgx_dev-jtag-pins.qsf Locally Removed           488 
 jtag.sdc                  Locally Removed           488 
 altera-arriaIIgx_dev-jtag.awb Locally Removed           488 
 altera-arriaIIgx_dev-jtag.qsf Locally Removed           488 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/jtag/altera
 avalon_jtag.awb           Locally Modified          488 

Directory modules/bluespec/common/fpgaenv/physical-platform/altera_jtag/jtag
 de2/                      Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/altera_jtag/jtag/de2
 jtag.sdf                  Locally Added               0 
 altera-de2-jtag-pins.qsf  Locally Added               0 
 altera-de2-jtag.awb       Locally Added               0 
 altera-de2-jtag.qsf       Locally Added               0 
 jtag.sdc                  Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/altera_jtag/jtag
 de3/                      Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/altera_jtag/jtag/de3
 jtag.sdf                  Locally Added               0 
 altera-de3-jtag-pins.qsf  Locally Added               0 
 altera-de3-jtag.awb       Locally Added               0 
 altera-de3-jtag.qsf       Locally Added               0 
 jtag.sdc                  Locally Added               0 


Resurrected the altera jtag by reverting to old driver code.  Not a
great solution, but I don't have time to investigate why the combined
driver is not working.  Added support for DE2, DE3 boards.  I haven't
tested yet as the DE2 is not hooked up and I haven't got the Synplify
parameters for the DE3.  

----------
kfleming    Date: Fri Nov 12 16:12:56 EST 2010  CSN: CSN-platforms-490
                  Fri Nov 12 21:12:56 UTC 2010


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-de2-jtag.apm      Locally Added               0 
 fpgaenv-de3-jtag.apm      Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks/single-ended
 single-ended-clocks-device-altera.awb Locally Modified          489 

Directory modules/bluespec/common/fpgaenv/physical-platform/altera_jtag/jtag/de2
 altera-de2-jtag-pins.qsf  Locally Modified          489 

Directory modules/bluespec/common/fpgaenv/physical-platform/altera_jtag/jtag/de3
 altera-de3-jtag-pins.qsf  Locally Modified          489 
 altera-de3-jtag.awb       Locally Modified          489 
 altera-de3-jtag.qsf       Locally Modified          489 



Corrected DE* qsf and synthesis parameters, and added environment
APMs.  I can build working hello world designs for both of these
platforms.

----------
kfleming    Date: Mon Nov 15 13:43:02 EST 2010  CSN: CSN-platforms-491
                  Mon Nov 15 18:43:02 UTC 2010


Directory modules/application-env/hybrid/soft-services
 application-env-hybrid-soft-service.bsv Locally Modified          490 



Added some new dependencies to fix build error in the hybrid soft
services build.  I think there's a better fix for this, which I will
try to commit soon.

----------
mstsvetk    Date: Tue Nov 30 13:10:24 MSK 2010  CSN: CSN-platforms-492
                  Tue Nov 30 10:10:24 UTC 2010


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/serial
 serial-physical-channel-loopback.bsv Locally Modified          491 
 serial-physical-channel-loopback.awb Locally Modified          491 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/serial/physical-serial
 uart-import.bsv           Locally Modified          491 


----------
mpellaue    Date: Wed Dec  1 14:48:37 EST 2010  CSN: CSN-platforms-493
                  Wed Dec  1 19:48:37 UTC 2010


Directory config/pm
 hasim/                    Locally Removed           492 

Directory config/pm/hasim
 submodels/                Locally Removed           492 

Directory config/pm/hasim/submodels
 fpgaenv/                  Locally Removed           492 

Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-hybrid-xupv2-serial.apm Locally Removed           492 
 fpgaenv-hybrid-htg-v5-pcie-synplify.apm Locally Removed           492 
 hasim-fpgaenv-htg-v5-pcie.apm Locally Removed           492 
 fpgaenv-hybrid-evaluation-arriaII-jtag.apm Locally Removed           492 
 xup-virtual-devices.apm   Locally Removed           492 
 fpgaenv-de2-jtag.apm      Locally Removed           492 
 fpgaenv-de3-jtag.apm      Locally Removed           492 
 std-virtual-devices-null-mem.apm Locally Removed           492 
 fpgaenv-hybrid-exe.apm    Locally Removed           492 
 fpgaenv-htg-hwonly.apm    Locally Removed           492 
 fpgaenv-hybrid-xup-v5-pcie.apm Locally Removed           492 
 fpgaenv-hybrid-exe-local-scratchpad.apm Locally Removed           492 
 fpgaenv-hybrid-exe-serial-ChanIO-loopback.apm Locally Removed           492 
 fpgaenv-hybrid-xup-v5-jtag.apm Locally Removed           492 
 hasim-fpgaenv-hybrid-sim.apm Locally Removed           492 
 fpgaenv-hybrid-xup-v5-pcie-altera.apm Locally Removed           492 
 fpgaenv-hybrid-htg-v5-pcie.apm Locally Removed           492 
 librl-bsv.apm             Locally Removed           492 
 hasim-fpgaenv-null.apm    Locally Removed           492 
 fpgaenv-cycloneiii-jtag.apm Locally Removed           492 
 std-virtual-devices.apm   Locally Removed           492 
 hasim-fpgaenv-xup.apm     Locally Removed           492 
 fpgaenv-hybrid-htg-v5-jtag.apm Locally Removed           492 
 std-virtual-devices-local-scratchpad.apm Locally Removed           492 

Directory config/pm/hasim/submodels
 pipelines/                Locally Removed           492 

Directory config/pm/hasim/submodels/pipelines
 build-pipeline-xilinx-synplify.apm Locally Removed           492 
 build-pipeline-altera.apm Locally Removed           492 
 build-pipeline-xilinx.apm Locally Removed           492 
 build-pipeline-bluesim.apm Locally Removed           492 

Directory config/pm/platforms
 tests/                    Locally Removed           492 

Directory config/pm/platforms/tests
 chanIO_loopback_sim.apm   Locally Removed           492 
 chanIO_loopback_xup2.apm  Locally Removed           492 

Directory modules/bluespec
 librl/                    Locally Removed           492 

Directory modules/bluespec/librl
 storage/                  Locally Removed           492 

Directory modules/bluespec/librl/storage
 cache/                    Locally Removed           492 

Directory modules/bluespec/librl/storage/cache
 rl-direct-mapped-cache.bsv Locally Removed           492 
 rl-set-assoc-cache.bsv    Locally Removed           492 
 rl-cache.bsv              Locally Removed           492 
 rl-tiny-cache.bsv         Locally Removed           492 
 librl-cache.awb           Locally Removed           492 

Directory modules/bluespec/librl/storage
 librl-bsv-storage.awb     Locally Removed           492 
 fifo-mem.bsv              Locally Removed           492 
 memory-heap.bsv           Locally Removed           492 
 fifo-scoreboard.bsv       Locally Removed           492 

Directory modules/bluespec/librl
 librl-bsv.awb             Locally Removed           492 
 librl-bsv.bsh             Locally Removed           492 
 base/                     Locally Removed           492 

Directory modules/bluespec/librl/base
 bluespec-common.prj       Locally Removed           492 
 fifo-functions.bsv        Locally Removed           492 
 bluespec-def.bsv          Locally Removed           492 
 guarded-pipelines.bsv     Locally Removed           492 
 counters.bsv              Locally Removed           492 
 debug-file.bsv            Locally Removed           492 
 README                    Locally Removed           492 
 lfsr.bsv                  Locally Removed           492 
 memory-interface.bsv      Locally Removed           492 
 counting-filter.bsv       Locally Removed           492 
 extends.bsv               Locally Removed           492 
 fifo-merge.bsv            Locally Removed           492 
 hash-bits.bsv             Locally Removed           492 
 support/                  Locally Removed           492 

Directory modules/bluespec/librl/base/support
 hash-check.c              Locally Removed           492 
 README                    Locally Removed           492 
 hash-inverse.c            Locally Removed           492 

Directory modules/bluespec/librl/base
 librl-bsv-base.awb        Locally Removed           492 
 memory-pack.bsv           Locally Removed           492 

Directory modules/bluespec/common/fpgaenv
 toplevel-wires/           Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/toplevel-wires
 fsb_dme/                  Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/toplevel-wires/fsb_dme
 fsb-dme-toplevel-wires.awb Locally Removed           492 
 fsb_dme.ucf               Locally Removed           492 
 FSB_DME_TopLevelWires.bsv Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/toplevel-wires
 fsb_afu/                  Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/toplevel-wires/fsb_afu
 fsb_afu.ucf               Locally Removed           492 
 FSB_AFU_TopLevelWires.bsv Locally Removed           492 
 fsb-afu-toplevel-wires.awb Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/toplevel-wires
 null/                     Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/toplevel-wires/null
 null-toplevel-wires.awb   Locally Removed           492 
 NullTopLevelWires.bsv     Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/toplevel-wires
 xilinx/                   Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/toplevel-wires/xilinx
 htg-v5-pcie-toplevel-wires.awb Locally Removed           492 
 xilinx.download           Locally Removed           492 
 xilinx.ut                 Locally Removed           492 
 htg-v5-pcie-TopLevelWires.bsv Locally Removed           492 
 xup-toplevel-wires.awb    Locally Removed           492 
 htg-v5-pcie.ucf           Locally Removed           492 
 xup-TopLevelWires.bsv     Locally Removed           492 
 xilinx.xst                Locally Removed           492 
 xup.ucf                   Locally Removed           492 

Directory modules/bluespec/common/fpgaenv
 low-level-platform-interface/ Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/low-level-platform-interface
 platforms-module.h        Locally Removed           492 
 remote-memory/            Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/low-level-platform-interface/remote-memory
 pci-express-dma/          Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/low-level-platform-interface/remote-memory/pci-express-dma
 remote-memory-pcie-dma.cpp Locally Removed           492 
 remote-memory-pcie-dma.h  Locally Removed           492 
 remote-memory-pcie-dma.awb Locally Removed           492 
 remote-memory-pcie-dma.bsv Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/low-level-platform-interface/remote-memory
 null/                     Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/low-level-platform-interface/remote-memory/null
 null-remote-memory.h      Locally Removed           492 
 null-remote-memory.awb    Locally Removed           492 
 null-remote-memory.bsv    Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/low-level-platform-interface
 llpi.cpp                  Locally Removed           492 
 local-mem/                Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/low-level-platform-interface/local-mem
 local-mem-null.awb        Locally Removed           492 
 local-mem-ddr2.awb        Locally Removed           492 
 local-mem-null.bsv        Locally Removed           492 
 local-mem-ddr2.bsv        Locally Removed           492 
 local-mem-bram.awb        Locally Removed           492 
 local-mem-interface.bsv   Locally Removed           492 
 local-mem-bram.bsv        Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/low-level-platform-interface
 hwonly-llpi.awb           Locally Removed           492 
 llpi.h                    Locally Removed           492 
 hybrid-llpi.awb           Locally Removed           492 
 llpi.bsv                  Locally Removed           492 
 platforms-module.cpp      Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform
 channelio/                Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio
 basic/                    Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/basic
 basic-channelio.cpp       Locally Removed           492 
 basic-channelio.h         Locally Removed           492 
 basic-channelio.awb       Locally Removed           492 
 basic-channelio.bsv       Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio
 physical-channel/         Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel
 pcie-dma/                 Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-dma
 dma-physical-channel.cpp  Locally Removed           492 
 dma-physical-channel.h    Locally Removed           492 
 dma-physical-channel.awb  Locally Removed           492 
 dma-physical-channel.bsv  Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel
 serial/                   Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/serial
 serial-physical-channel-loopback.bsv Locally Removed           492 
 serial-physical-channel.cpp Locally Removed           492 
 SerialStream.h            Locally Removed           492 
 serial-physical-channel-8bit.cpp Locally Removed           492 
 PosixSignalHandler.h      Locally Removed           492 
 serial-physical-channel.h Locally Removed           492 
 serial-physical-channel.bsv Locally Removed           492 
 PosixSignalDispatcher.cpp Locally Removed           492 
 serial-physical-channel-8bit.bsv Locally Removed           492 
 PosixSignalDispatcher.h   Locally Removed           492 
 serial-physical-channel-loopback.awb Locally Removed           492 
 SerialPort.cpp            Locally Removed           492 
 serial-physical-channel.awb Locally Removed           492 
 SerialStreamBuf.cpp       Locally Removed           492 
 SerialPort.h              Locally Removed           492 
 serial-physical-channel-8bit.awb Locally Removed           492 
 SerialStream.cpp          Locally Removed           492 
 SerialStreamBuf.h         Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel
 pcie-bluespec/            Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-bluespec
 pcie-bluespec-physical-channel.cpp Locally Removed           492 
 pcie-bluespec-physical-channel.h Locally Removed           492 
 pcie-bluespec-physical-channel.awb Locally Removed           492 
 pcie-bluespec-physical-channel.bsv Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel
 jtag/                     Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/jtag
 jtag-physical-channel.cpp Locally Removed           492 
 altera/                   Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/jtag/altera
 jtag-physical-channel.cpp Locally Removed           492 
 jtag-physical-channel.h   Locally Removed           492 
 jtag-physical-channel.awb Locally Removed           492 
 jtag-physical-channel.bsv Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/jtag
 jtag-physical-channel.h   Locally Removed           492 
 jtag-physical-channel.awb Locally Removed           492 
 jtag-physical-channel.bsv Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel
 pcie-csr/                 Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/pcie-csr
 pcie-physical-channel.cpp Locally Removed           492 
 pcie-physical-channel.h   Locally Removed           492 
 pcie-physical-channel.awb Locally Removed           492 
 pcie-physical-channel.bsv Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel
 sim/                      Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/sim
 sim-physical-channel.awb  Locally Removed           492 
 sim-physical-channel.bsv  Locally Removed           492 
 sim-physical-channel.cpp  Locally Removed           492 
 sim-physical-channel.h    Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio
 unix/                     Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/unix
 unix-channelio.c          Locally Removed           492 
 unix-channelio.awb        Locally Removed           492 
 UNIXChannelIO.bsv         Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio
 loopback/                 Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/loopback
 loopback-channelio.awb    Locally Removed           492 
 loopback-channelio.bsv    Locally Removed           492 
 loopback-channelio.cpp    Locally Removed           492 
 loopback-channelio.h      Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio
 null/                     Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/null
 null-channelio.awb        Locally Removed           492 
 NullChannelIO.bsv         Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform
 std-virtual-platform.cpp  Locally Removed           492 
 rrr/                      Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr
 basic/                    Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/basic
 basic-rrr-client.cpp      Locally Removed           492 
 basic-rrr-server.bsv      Locally Removed           492 
 arbiters.bsv              Locally Removed           492 
 basic-rrr-common.bsh      Locally Removed           492 
 basic-rrr-client.h        Locally Removed           492 
 basic-rrr-client.bsv      Locally Removed           492 
 basic-rrr-server.cpp      Locally Removed           492 
 basic-rrr.awb             Locally Removed           492 
 basic-rrr-server.h        Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr
 null/                     Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/null
 null-rrr-client.h         Locally Removed           492 
 null-rrr-server.cpp       Locally Removed           492 
 null-rrr.awb              Locally Removed           492 
 null-rrr.bsv              Locally Removed           492 
 null-rrr-server.h         Locally Removed           492 
 null-rrr.bsh              Locally Removed           492 
 null-rrr-client.cpp       Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr
 rrr_common/               Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/rrr/rrr_common
 marshaller.bsv            Locally Removed           492 
 rrr_common.awb            Locally Removed           492 
 demarshaller.bsv          Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform
 virtual-devices/          Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 std-virtual-devices.cpp   Locally Removed           492 
 starter/                  Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/starter
 starter-device.cpp        Locally Removed           492 
 starter-device.rrr        Locally Removed           492 
 starter-device.h          Locally Removed           492 
 starter-device.awb        Locally Removed           492 
 starter-device.bsv        Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 std-virtual-devices.h     Locally Removed           492 
 front-panel/              Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel
 fsb_dme/                  Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/fsb_dme
 fsb-dme-fp.awb            Locally Removed           492 
 FSB_DME_FP.bsv            Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel
 arriaII/                  Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/arriaII
 ARRIAIIFP.bsv             Locally Removed           492 
 arriaII-fp.awb            Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel
 hybrid/                   Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/hybrid
 hybrid-fp.cpp             Locally Removed           492 
 hybrid-fp-command-switches.cpp Locally Removed           492 
 hybrid-fp.rrr             Locally Removed           492 
 hybrid-fp.h               Locally Removed           492 
 hybrid-fp.awb             Locally Removed           492 
 hybrid-fp.bsv             Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel
 console/                  Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/console
 NullFP.bsv                Locally Removed           492 
 console-fp.awb            Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel
 fsb_afu/                  Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/fsb_afu
 FSB_AFU_FP.bsv            Locally Removed           492 
 fsb-afu-fp.awb            Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel
 graphical/                Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/graphical
 graphical-fp.awb          Locally Removed           492 
 GraphicalFP.bsv           Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel
 htg_v5_pcie/              Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/htg_v5_pcie
 htg-v5-pcie-fp.awb        Locally Removed           492 
 HTGv5PCIeFP.bsv           Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel
 xup/                      Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/front-panel/xup
 xup-fp.awb                Locally Removed           492 
 XUPFP.bsv                 Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 std-virtual-device-interfaces.bsv Locally Removed           492 
 null-virtual-devices.awb  Locally Removed           492 
 std-virtual-devices.bsv   Locally Removed           492 
 common/                   Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common
 common-utility-devices.h  Locally Removed           492 
 common-utility-devices.awb Locally Removed           492 
 dynamic-parameters-device/ Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/dynamic-parameters-device
 dynamic-parameters-device.dic Locally Removed           492 
 dynamic-parameters-device.cpp Locally Removed           492 
 dynamic-parameters-device.rrr Locally Removed           492 
 dynamic-parameters-device.h Locally Removed           492 
 dynamic-parameters-device.awb Locally Removed           492 
 dynamic-parameters-device.bsv Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common
 common-utility-devices.bsv Locally Removed           492 
 debug-scan-device/        Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/debug-scan-device
 debug-scan-device.dic     Locally Removed           492 
 debug-scan-device.cpp     Locally Removed           492 
 debug-scan-device.rrr     Locally Removed           492 
 debug-scan-device.h       Locally Removed           492 
 debug-scan-device.awb     Locally Removed           492 
 debug-scan-device.bsv     Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common
 assertions-device/        Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/assertions-device
 assertions-device.awb     Locally Removed           492 
 assertions-device.bsv     Locally Removed           492 
 assertions-device.dic     Locally Removed           492 
 assertions-device.cpp     Locally Removed           492 
 assertions-device.rrr     Locally Removed           492 
 assertions-device.h       Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common
 common-utility-null.h     Locally Removed           492 
 common-utility-null.awb   Locally Removed           492 
 common-utility-devices.cpp Locally Removed           492 
 common-utility-null.bsv   Locally Removed           492 
 stats-device/             Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/stats-device
 stats-device.rrr          Locally Removed           492 
 stats-device.h            Locally Removed           492 
 stats-device.awb          Locally Removed           492 
 stats-device.bsv          Locally Removed           492 
 stats-device.dic          Locally Removed           492 
 stats-device.cpp          Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common
 streams-device/           Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/common/streams-device
 streams-common.bsh        Locally Removed           492 
 hybrid-streams-services.rrr Locally Removed           492 
 hybrid-streams.h          Locally Removed           492 
 hybrid-streams.awb        Locally Removed           492 
 hybrid-streams.bsv        Locally Removed           492 
 streamid.dic              Locally Removed           492 
 streams.dic               Locally Removed           492 
 hybrid-streams.cpp        Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 central-cache/            Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/central-cache
 central-cache-interfaces.bsv Locally Removed           492 
 local-mem-central-cache.awb Locally Removed           492 
 local-mem-central-cache.bsv Locally Removed           492 
 central-cache-backing-store.bsv Locally Removed           492 
 null-central-cache.awb    Locally Removed           492 
 null-central-cache.bsv    Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 std-virtual-devices-null-mem.awb Locally Removed           492 
 std-virtual-devices.dic   Locally Removed           492 
 null-starter/             Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/null-starter
 null-starter-device.awb   Locally Removed           492 
 starter-device.cpp        Locally Removed           492 
 starter-device.h          Locally Removed           492 
 starter-device.bsv        Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 null-virtual-devices.cpp  Locally Removed           492 
 console/                  Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/console
 console-serial/           Locally Removed           492 
 graphical-serial/         Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/console/graphical-serial
 graphical-serial.awb      Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/console
 null-serial/              Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/console/null-serial
 null-serial.awb           Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/console
 xup-serial/               Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 null-virtual-devices.h    Locally Removed           492 
 std-virtual-devices.awb   Locally Removed           492 
 null-virtual-devices.bsv  Locally Removed           492 
 memory/                   Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory
 hybrid/                   Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/hybrid
 hybrid-mem-scratch.dic    Locally Removed           492 
 hybrid-mem-scratch.cpp    Locally Removed           492 
 hybrid-mem-scratch.rrr    Locally Removed           492 
 hybrid-mem-scratch.h      Locally Removed           492 
 hybrid-mem-scratch.awb    Locally Removed           492 
 hybrid-mem-scratch.bsv    Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory
 common/                   Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/common
 mem-scratch-common.awb    Locally Removed           492 
 mem-scratch-common-interfaces.bsv Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory
 local/                    Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/memory/local
 local-mem-scratch.awb     Locally Removed           492 
 local-mem-scratch.bsv     Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 std-virtual-devices-null-mem.bsv Locally Removed           492 
 shared-memory/            Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/shared-memory
 standard/                 Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/shared-memory/standard
 standard-shared-memory-server.cpp Locally Removed           492 
 standard-shared-memory.h  Locally Removed           492 
 standard-shared-memory.awb Locally Removed           492 
 standard-shared-memory.bsv Locally Removed           492 
 standard-shared-memory-server.h Locally Removed           492 
 standard-shared-memory.cpp Locally Removed           492 
 standard-shared-memory.rrr Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/shared-memory
 null/                     Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/shared-memory/null
 null-shared-memory.h      Locally Removed           492 
 null-shared-memory.awb    Locally Removed           492 
 null-shared-memory.bsv    Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices
 streams/                  Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform/virtual-devices/streams
 streams-common.bsh        Locally Removed           492 
 hybrid-streams-services.rrr Locally Removed           492 
 hybrid-streams.h          Locally Removed           492 
 hybrid-streams.awb        Locally Removed           492 
 hybrid-streams.bsv        Locally Removed           492 
 streamid.dic              Locally Removed           492 
 simulation-streams.awb    Locally Removed           492 
 simulation-streams.bsv    Locally Removed           492 
 streams.dic               Locally Removed           492 
 hybrid-streams.cpp        Locally Removed           492 

Directory modules/bluespec/common/fpgaenv/virtual-platform
 std-virtual-platform.h    Locally Removed           492 
 std-virtual-platform.awb  Locally Removed           492 
 std-virtual-platform.bsv  Locally Removed           492 
 fast-virtual-platform.awb Locally Removed           492 

Directory modules
 project/                  Locally Removed           492 

Directory modules/project
 SCons.hw.pipeline.template Locally Removed           492 
 project-pipeline.awb      Locally Removed           492 
 synopsis/                 Locally Removed           492 

Directory modules/project/synopsis
 Synplify.py               Locally Removed           492 
 synplify.awb              Locally Removed           492 
 synplify.sdc              Locally Removed           492 

Directory modules/project
 Utils.py                  Locally Removed           492 
 pipelines/                Locally Removed           492 

Directory modules/project/pipelines
 verilog-build-pipeline.awb Locally Removed           492 
 sim-build-pipeline.awb    Locally Removed           492 
 SimulationPipeline.py     Locally Removed           492 
 VerilogPipeline.py        Locally Removed           492 
 fpga-build-pipeline.awb   Locally Removed           492 
 FPGAPipeline.py           Locally Removed           492 

Directory modules/project
 multifpga/                Locally Removed           492 

Directory modules/project/multifpga
 multitest.py              Locally Removed           492 
 connection.py             Locally Removed           492 
 multilex.py               Locally Removed           492 
 environment.py            Locally Removed           492 
 platform.py               Locally Removed           492 
 multiparse.py             Locally Removed           492 

Directory modules/project
 project-hybrid-main.cpp   Locally Removed           492 
 Makefile.top.template     Locally Removed           492 
 project-hw.awb            Locally Removed           492 
 ProjectDependency.py      Locally Removed           492 
 project-hw-main.bsv       Locally Removed           492 
 project-hybrid.awb        Locally Removed           492 
 SCons.top.pipeline.template Locally Removed           492 
 project-sw-main.h         Locally Removed           492 
 hardware-done.h           Locally Removed           492 
 verilog/                  Locally Removed           492 

Directory modules/project/verilog
 VERILOG.PY                Locally Removed           492 
 verilog.py                Locally Removed           492 

Directory modules/project
 iface/                    Locally Removed           492 

Directory modules/project/iface
 iface.awb                 Locally Removed           492 
 iface.py                  Locally Removed           492 

Directory modules/project
 ModuleList.py             Locally Removed           492 
 altera/                   Locally Removed           492 

Directory modules/project/altera
 ALTERA_POST_SYNTH.py      Locally Removed           492 
 altera_post_synth.awb     Locally Removed           492 

Directory modules/project
 xilinx/                   Locally Removed           492 

Directory modules/project/xilinx
 xilinx_ucf.awb            Locally Removed           492 
 xilinx_map.awb            Locally Removed           492 
 xilinx_par.awb            Locally Removed           492 
 xst.awb                   Locally Removed           492 
 XILINX_LOADER.py          Locally Removed           492 
 xst-nobasicio.awb         Locally Removed           492 
 XILINX_BITGEN.py          Locally Removed           492 
 XILINX_NGD.py             Locally Removed           492 
 XILINX_POST_SYNTH.py      Locally Removed           492 
 XSTnobasicio.py           Locally Removed           492 
 XILINX_BMM.py             Locally Removed           492 
 XILINX_MAP.py             Locally Removed           492 
 XILINX_UCF.py             Locally Removed           492 
 XILINX_PAR.py             Locally Removed           492 
 XST.py                    Locally Removed           492 
 xilinx_loader.awb         Locally Removed           492 
 xilinx_ngd.awb            Locally Removed           492 
 xilinx_bitgen.awb         Locally Removed           492 
 xilinx_post_synth.awb     Locally Removed           492 
 xilinx_bmm.awb            Locally Removed           492 

Directory modules/project
 Module.py                 Locally Removed           492 
 SCons.hw.template         Locally Removed           492 
 SCons.dict.template       Locally Removed           492 
 SCons.sw.template         Locally Removed           492 
 software/                 Locally Removed           492 

Directory modules/project/software
 software.py               Locally Removed           492 
 software.awb              Locally Removed           492 

Directory modules/project
 SCons.sw.pipeline.template Locally Removed           492 
 project-hybrid-main.h     Locally Removed           492 
 project-sw-main.cpp       Locally Removed           492 
 project-hybrid-main.bsv   Locally Removed           492 
 SCons.top.template        Locally Removed           492 
 bluespec/                 Locally Removed           492 

Directory modules/project/bluespec
 BSV.py                    Locally Removed           492 
 bsv-exe.awb               Locally Removed           492 
 bsv.awb                   Locally Removed           492 
 bluesim.py                Locally Removed           492 
 MCD.py                    Locally Removed           492 
 mcd.awb                   Locally Removed           492 

Directory modules/project
 project-sw.awb            Locally Removed           492 
 SCons.iface.template      Locally Removed           492 
 CommandLine.py            Locally Removed           492 

Directory modules
 application-env/          Locally Removed           492 

Directory modules/application-env
 hybrid/                   Locally Removed           492 

Directory modules/application-env/hybrid
 base/                     Locally Removed           492 

Directory modules/application-env/hybrid/base
 application-env-hybrid-base.cpp Locally Removed           492 
 application-env-hybrid-base.h Locally Removed           492 
 application-env-hybrid-base.awb Locally Removed           492 
 application-env-hybrid-base.bsv Locally Removed           492 

Directory modules/application-env/hybrid
 soft-connections/         Locally Removed           492 

Directory modules/application-env/hybrid/soft-connections
 application-env-hybrid-soft-conn.h Locally Removed           492 
 application-env-hybrid-soft-conn.awb Locally Removed           492 
 application-env-hybrid-soft-conn.bsv Locally Removed           492 
 default-sw/               Locally Removed           492 

Directory modules/application-env/hybrid/soft-connections/default-sw
 connected-application-default-sw.h Locally Removed           492 
 connected-application-default-sw.awb Locally Removed           492 
 connected-application-default-sw.bsv Locally Removed           492 

Directory modules/application-env/hybrid/soft-connections
 application-env-hybrid-soft-conn.cpp Locally Removed           492 

Directory modules/application-env/hybrid
 soft-services/            Locally Removed           492 

Directory modules/application-env/hybrid/soft-services
 application-env-hybrid-soft-service.cpp Locally Removed           492 
 application-env-hybrid-soft-service.h Locally Removed           492 
 application-env-hybrid-soft-service.awb Locally Removed           492 
 application-env-hybrid-soft-service.bsv Locally Removed           492 

Directory modules/application-env
 hw-only/                  Locally Removed           492 

Directory modules/application-env/hw-only
 base/                     Locally Removed           492 

Directory modules/application-env/hw-only/base
 application-env-hw-only-base.awb Locally Removed           492 
 application-env-hw-only-base.bsv Locally Removed           492 


Moved the following layers to the leap repository:
* librl
* virtual_platforms (including rrr, channelio, llpi, virtual_devices)
* fpgaenv APMs (except for an MIT 6.3.75 outlier which was causing warnings, and needs to be addressed.)

Removed things that now live in leap:
* project
* application-env

Removed some obsolete code:
* old old dme/afu stuff.

Stuff that still lives in platforms:
* physical devices
* hasim-fpga-ctrl (needs to be addressed).
* fpga components
* umf

Michael P.

----------
pellauer    Date: Tue Dec 21 17:01:17 EST 2010  CSN: CSN-platforms-494
                  Tue Dec 21 22:01:17 UTC 2010


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device-bdpi.c   Locally Modified          493 


* Applying Andrey Eefimov's patch to fix UMF_CHUNK_BYTES when set to 8.


----------
kfleming    Date: Sat Jan  8 01:45:39 EST 2011  CSN: CSN-platforms-495
                  Sat Jan  8 06:45:39 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device.awb      Locally Modified          494 
 unix-pipe-device.cpp      Locally Modified          494 


Added simulator arguments as a paramenter.  Verilog simulators don't
expect -w as a command line argument.

----------
pellauer    Date: Wed Jan 12 16:46:09 EST 2011  CSN: CSN-platforms-496
                  Wed Jan 12 21:46:09 UTC 2011


Directory modules/bluespec/common/fpgaenv
 fpga-environment.awb      Locally Removed           495 


* Moving fpga-environmnet.awb to LEAP.

Michael P.

----------
kfleming    Date: Mon Feb 21 23:48:45 EST 2011  CSN: CSN-platforms-497
                  Tue Feb 22 04:48:45 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5
 serial/                   Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5/serial
 xilinx.download           Locally Added               0 
 xilinx.ut                 Locally Added               0 
 xilinx-xup-serial.cpp     Locally Added               0 
 xilinx.sdc                Locally Added               0 
 xilinx.sdf                Locally Added               0 
 xilinx-xup-serial.h       Locally Added               0 
 xilinx.xst                Locally Added               0 
 xilinx-xup-serial.awb     Locally Added               0 
 xilinx-xup-serial.bsv     Locally Added               0 
 xilinx-xup-serial.ucf     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup/serial
 xilinx-xup-serial.ucf     Locally Modified          496 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/serial/physical-serial
 serial-device-physical.awb Locally Modified          496 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/serial
 ucf/                      Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/serial/ucf
 serial-xupv5.ucf          Locally Added               0 
 serial-device-ucf-xupv2.awb Locally Added               0 
 serial-device-ucf-xupv5.awb Locally Added               0 
 serial-xupv2.ucf          Locally Added               0 


Added xupv5 serial device.  Since serial is a general device, I
reorganized it to depend on a platform-specific ucf.  Some more work
is needed.  1) we need to ensure a constant 100Mhz clock - this is
not an issue for XUPv5 and XUPv2, but other platforms may not have an
available 100Mhz oscillator.  2) I need more robust flow control
enable/disable as some platforms, including XUPv5, do not support HW
flow control.

----------
kfleming    Date: Tue Feb 22 16:36:31 EST 2011  CSN: CSN-platforms-498
                  Tue Feb 22 21:36:31 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/serial/ublaze-serial
 serial-device-ublaze.awb  Locally Modified          497 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/serial/physical-serial
 opb_uartlite_core.vhd     Locally Modified          497 
 uart-import.bsv           Locally Modified          497 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/serial/ucf
 serial-device-ucf-xupv2.awb Locally Modified          497 
 serial-device-ucf-xupv5.awb Locally Modified          497 



Added support to enable/disable HW flow control for serial devices as an awb parameter

----------
kfleming    Date: Thu Feb 24 15:54:45 EST 2011  CSN: CSN-platforms-500
                  Thu Feb 24 20:54:45 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5/serial
 xilinx-xup-serial.awb     Locally Modified          499 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5/pcie
 xilinx-xup-pcie.awb       Locally Modified          499 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5/jtag
 xilinx-xup-jtag.awb       Locally Modified          499 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5/pcie-sata
 xilinx-xup-pcie-sata.awb  Locally Modified          499 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5/sata
 xilinx-xup-sata.awb       Locally Modified          499 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup/serial
 xilinx-xup-serial.awb     Locally Modified          499 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup/jtag
 xilinx-xup-jtag.awb       Locally Modified          499 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/jtag
 htg-v5-jtag.awb           Locally Modified          499 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-disabled
 htg-v5-pcie-disabled.awb  Locally Modified          499 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled-synplify.awb Locally Modified          499 
 htg-v5-pcie-enabled.awb   Locally Modified          499 

Directory modules/bluespec/common/fpgaenv/physical-platform/airblue_cycloneiii
 airblue_cycloneiii-jtag.awb Locally Modified          499 

Directory modules/bluespec/common/fpgaenv/physical-platform/null
 null-physical-platfrom.awb Locally Modified          499 

Directory modules/bluespec/common/fpgaenv/physical-platform/altera_jtag/jtag/de2
 altera-de2-jtag.awb       Locally Modified          499 

Directory modules/bluespec/common/fpgaenv/physical-platform/altera_jtag/jtag/de3
 altera-de3-jtag.awb       Locally Modified          499 

Directory modules/bluespec/common/fpgaenv/physical-platform/altera_jtag/jtag/arriaII_dev
 altera-arriaIIgx_dev-jtag.awb Locally Modified          499 

Fixed bit/"bit" typo in apms

----------
kfleming    Date: Thu Feb 24 18:52:43 EST 2011  CSN: CSN-platforms-501
                  Thu Feb 24 23:52:43 UTC 2011


Directory drivers/linux/hasim
 hasim-fpga-ctrl.c         Locally Modified          500 
 Makefile                  Locally Modified          500 


Updated hasim-fpga-ctrl to have a hook for an arbitrary configuration program.

----------
kfleming    Date: Thu Feb 24 19:43:42 EST 2011  CSN: CSN-platforms-502
                  Fri Feb 25 00:43:42 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5/pcie
 xilinx-xup-pcie.awb       Locally Modified          501 


Added SOFT_RESET property to pcie awb, freeing us from modifying the
run script for those platforms which do not support soft reset.

Finally.

----------
kfleming    Date: Fri Feb 25 11:35:18 EST 2011  CSN: CSN-platforms-503
                  Fri Feb 25 16:35:18 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5/sata
 xilinx-xup-sata.awb       Locally Modified          502 


Updated sata platform to export XUPV5 FPGA_PLATFORM

----------
kfleming    Date: Fri Feb 25 12:13:43 EST 2011  CSN: CSN-platforms-504
                  Fri Feb 25 17:13:43 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5/pcie-sata
 xilinx-xup-pcie-sata.awb  Locally Modified          503 


Added FPGA_PLATFORM to pcie-sata platform.

----------
kfleming    Date: Mon Feb 28 13:42:00 EST 2011  CSN: CSN-platforms-506
                  Mon Feb 28 18:42:00 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/sata-bluespec
 XUPV5_SERDES.bsv          Locally Modified          505 


Added a function for processing SERDES data. 

----------
kfleming    Date: Wed Mar 16 11:07:26 EDT 2011  CSN: CSN-platforms-508
                  Wed Mar 16 15:07:26 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-bluespec
 Bridge.bsv                Locally Modified          507 



Throw PCIE wires across a null crossing.

----------
kfleming    Date: Fri Mar 25 14:14:56 EDT 2011  CSN: CSN-platforms-509
                  Fri Mar 25 18:14:56 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/sata-bluespec
 serdes_ip.v               Locally Modified          508 
 XUPV5_SERDES.bsv          Locally Modified          508 


Increased the timeout for synchronization, tweaked the comma/idle values to improve transmission to the TLK2701

----------
mcadler     Date: Wed Apr  6 16:22:06 EDT 2011  CSN: CSN-platforms-511
                  Wed Apr  6 20:22:06 UTC 2011


Directory drivers/linux/hasim
 hasim-fpga-ctrl.c         Locally Removed           510 
 leap-fpga-ctrl.c          Locally Added               - 
 Makefile                  Locally Modified          510 
 init-hasim-fpga           Locally Removed           510 
 init-leap-fpga            Locally Added               - 

- Fix gaping security holes in --command:
  - Don't allow .. anywhere in the string (even in the middle of a file name)
  - Don't allow ~ anywhere in the string
  - Check for unreasonably long script name before calling malloc
- Rename from hasim to leap
- PREFIX now set only in Makefile

Installation still defaults to /usr/hasim but it will now be easier to change.

----------
mcadler     Date: Wed Apr  6 22:00:32 EDT 2011  CSN: CSN-platforms-512
                  Thu Apr  7 02:00:32 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/debuggers/null
 null-debugger.cpp         Locally Modified          511 

Directory drivers/linux/hasim
 leap-fpga-ctrl.c          Locally Removed           511 
 README.dev                Locally Removed           511 
 Makefile                  Locally Removed           511 
 README                    Locally Removed           511 
 init-leap-fpga            Locally Removed           511 

Directory drivers/linux
 leap-fpga-ctrl/           Locally Added               0 

Directory drivers/linux/leap-fpga-ctrl
 leap-fpga-ctrl.c          Locally Added               - 
 README.dev                Locally Added               - 
 Makefile                  Locally Added               - 
 README                    Locally Added               - 
 init-leap-fpga            Locally Added               - 

Move leap-fpga-ctrl to its own build tree, separate from drivers.

----------
mcadler     Date: Wed Apr  6 22:16:30 EDT 2011  CSN: CSN-platforms-513
                  Thu Apr  7 02:16:30 UTC 2011


Directory drivers/linux/hasim
 kernel/                   Locally Removed           512 

Directory drivers/linux/hasim/kernel
 pchnl_if.h                Locally Removed           512 
 pchnl_main.c              Locally Removed           512 
 pchnl_if.awb              Locally Removed           512 
 Makefile                  Locally Removed           512 
 README                    Locally Removed           512 
 pchnl_main.h              Locally Removed           512 

Driver is specific to Virtex-5 PCIe.

----------
joel        Date: Sat Apr  9 13:53:56 EDT 2011  CSN: CSN-platforms-1
                  Sat Apr  9 17:53:56 UTC 2011


Directory .
 configure                 Locally Added               0 

Directory debian
 leap-platforms-bin.postrm Locally Added               0 
 leap-platforms-bin.preinst Locally Added               0 
 control                   Locally Added               0 
 leap-platforms-bin.prerm  Locally Added               0 
 compat                    Locally Added               0 
 leap-platforms-bin.docs   Locally Added               0 
 changelog                 Locally Added               0 
 copyright                 Locally Added               0 
 rules                     Locally Added               0 
 leap-platforms-bin.dirs   Locally Added               0 
 leap-platforms-bin.postinst Locally Added               0 
 README.Debian             Locally Added               0 

Directory .
 debian/                   Locally Added               0 
 Makefile.in               Locally Added               0 

Directory include
 config.h.in               Locally Added               0 
 stamp-h1                  Locally Added               0 
 config.h                  Locally Added               0 

Directory .
 include/                  Locally Added               0 
 configure.in              Locally Added               0 

Directory scripts
 mkinstalldirs             Locally Added               0 
 depcomp                   Locally Added               0 
 compile                   Locally Added               0 
 missing                   Locally Added               0 
 config.guess              Locally Added               0 
 config.sub                Locally Added               0 
 ltmain.sh                 Locally Added               0 
 install-sh                Locally Added               0 

Directory .
 scripts/                  Locally Added               0 

Directory admin/packages
 platforms                 Locally Modified          513 

Directory .
 README                    Locally Added               0 

Directory tools
 Makefile.in               Locally Added               0 
 platforms/                Locally Added               0 

Directory tools/platforms
 Makefile.in               Locally Added               0 
 Makefile.am               Locally Added               0 
 leap-fpga-control/        Locally Added               0 

Directory tools/platforms/leap-fpga-control
 Makefile.in               Locally Added               0 
 Makefile.am               Locally Added               0 
 leap-fpga-control.c       Locally Added               0 

Directory tools
 Makefile.am               Locally Added               0 

Directory .
 tools/                    Locally Added               0 
 INSTALL                   Locally Added               0 
 Makefile.am               Locally Added               0 
 aclocal.m4                Locally Added               0 
 ./                        Locally Modified          513 

Added the autoconfig framework to platforms like the other
packages (hopefully to soon be replaced with a simpler cleaner
scons-based system).

Also added debian package build files and configured them to
create v11.04.

A location (tools/platforms/leap-fpga-control) was created
for leap-fpga-control, but the program there is a dummy...


----------
mcadler     Date: Sun Apr 10 21:48:15 EDT 2011  CSN: CSN-platforms-515
                  Mon Apr 11 01:48:15 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/utils
 utils.awb                 Locally Modified          514 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup/serial
 xilinx-xup-serial.awb     Locally Modified          514 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup/jtag
 xilinx-xup-jtag.awb       Locally Modified          514 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-disabled
 htg-v5-pcie-disabled.awb  Locally Modified          514 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/jtag
 htg-v5-jtag.awb           Locally Modified          514 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.awb   Locally Modified          514 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-new
 pci-express-c-import-mmap.cpp Locally Modified          514 
 pci-express-c-import-mmap.h Locally Modified          514 

Directory drivers/linux/leap-fpga-ctrl
 leap-fpga-ctrl.c          Locally Modified          514 
 iniparser.h               Locally Added               0 
 config-sample             Locally Added               0 
 dictionary.c              Locally Added               0 
 README.dev                Locally Removed           514 
 dictionary.h              Locally Added               0 
 Makefile                  Locally Modified          514 
 init-leap-fpga            Locally Modified          514 
 iniparser.c               Locally Added               0 

Significant changes to leap-fpga-ctrl:

- Support for multiple FPGAs on a single host.  leap-fpga-ctrl will now find
  a free device among multiple.
- Replace /usr/hasim link tree with a single config file that describes
  all FPGAs on a host.
- Change configure script mechanism.  A single well known script name
  (based on the FPGA class) is invoked with parameters requesting some action.
- Use paths more appropriate to Linux.

- Tag XUPv2 and HTG-V5-PCIe configurations with FPGA requests.

- Take the path of an FPGA device on the command line instead of embedding
  the path in C++ code.

  


----------
mcadler     Date: Mon Apr 11 22:16:52 EDT 2011  CSN: CSN-platforms-516
                  Tue Apr 12 02:16:52 UTC 2011


Directory drivers/linux/leap-fpga-ctrl
 scripts/                  Locally Added               0 

Directory drivers/linux/leap-fpga-ctrl/scripts
 HTG-V5-PCIe               Locally Added               0 

Directory drivers/linux/leap-fpga-ctrl
 Makefile                  Locally Modified          515 

- Fix file permissions
- Add a sample configuration script supporting both the "program" and "activate"
  commands.  I'll fill in the details later.

----------
kfleming    Date: Mon Apr 11 22:49:54 EDT 2011  CSN: CSN-platforms-517
                  Tue Apr 12 02:49:54 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5/pcie
 xilinx.sdf                Locally Modified          516 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/sata-bluespec
 XUPV5_SERDES_UG.bsv       Locally Modified          516 
 serdes_ip.v               Locally Modified          516 
 XUPV5_SERDES.bsv          Locally Modified          516 


Added some instrumentation to the SERDES hardware.  Fixed bug in which
errors were being treated as commas.  We now pass these erroneous
symbols on and rely on upper layers to notice the problem.  Also, I
added some synthesis flags which seem to improve Virtex5 timing.


----------
jsemer      Date: Tue Apr 12 17:56:01 EDT 2011  CSN: CSN-platforms-518
                  Tue Apr 12 21:56:01 UTC 2011


Directory .
 configure                 Locally Modified          517 

Directory debian
 changelog                 Locally Modified          517 

Directory .
 Makefile.in               Locally Modified          517 

Directory aux-scripts
 mkinstalldirs             Locally Added               - 
 depcomp                   Locally Added               - 
 compile                   Locally Added               - 
 missing                   Locally Added               - 
 config.guess              Locally Added               - 
 config.sub                Locally Added               - 
 ltmain.sh                 Locally Added               - 
 install-sh                Locally Added               - 

Directory .
 aux-scripts/              Locally Added               0 
 configure.in              Locally Modified          517 

Directory scripts
 mkinstalldirs             Locally Removed           517 
 depcomp                   Locally Removed           517 
 compile                   Locally Removed           517 
 missing                   Locally Removed           517 
 config.guess              Locally Removed           517 
 config.sub                Locally Removed           517 
 ltmain.sh                 Locally Removed           517 
 install-sh                Locally Removed           517 

Directory .
 scripts/                  Locally Removed           517 

Directory tools
 Makefile.in               Locally Modified          517 

Directory tools/platforms
 Makefile.in               Locally Modified          517 

Directory tools/platforms/leap-fpga-control
 Makefile.in               Locally Modified          517 

Directory .
 ./                        Locally Modified          517 

Move the autoconf scripts from scripts/ to aux-scripts/.

----------
joel        Date: Wed Apr 13 08:20:00 EDT 2011  CSN: CSN-platforms-519
                  Wed Apr 13 12:20:00 UTC 2011


Directory .
 Makefile.in               Locally Modified          518 

Small automatic automake induced change.

----------
jsemer      Date: Wed Apr 13 10:34:49 EDT 2011  CSN: CSN-platforms-520
                  Wed Apr 13 14:34:49 UTC 2011


Directory .
 configure                 Locally Modified          519 
 Makefile.in               Locally Modified          519 

Directory include
 config.h.in               Locally Modified          519 
 config.h                  Locally Modified          519 

Directory tools
 Makefile.in               Locally Modified          519 

Directory tools/platforms
 Makefile.in               Locally Modified          519 

Directory tools/platforms/leap-fpga-control
 Makefile.in               Locally Modified          519 

Directory .
 aclocal.m4                Locally Modified          519 

Fix autoconf breakage with an autoreconf.

----------
jsemer      Date: Wed Apr 13 15:43:29 EDT 2011  CSN: CSN-platforms-521
                  Wed Apr 13 19:43:29 UTC 2011


Directory .
 configure                 Locally Modified          520 

Directory debian
 control                   Locally Modified          520 
 changelog                 Locally Modified          520 
 rules                     Locally Modified          520 
 leap-platforms-bin.dirs   Locally Modified          520 

Directory .
 Makefile.in               Locally Modified          520 

Directory aux-scripts
 mkinstalldirs             Locally Modified          520 
 depcomp                   Locally Modified          520 
 missing                   Locally Modified          520 
 install-sh                Locally Modified          520 

Directory include
 config.h.in               Locally Modified          520 
 config.h                  Locally Modified          520 

Directory .
 configure.in              Locally Modified          520 

Directory tools
 Makefile.in               Locally Modified          520 

Directory tools/platforms
 Makefile.in               Locally Modified          520 
 Makefile.am               Locally Modified          520 
 leap-fpga-control/        Locally Removed           520 

Directory tools/platforms/leap-fpga-control
 Makefile.in               Locally Removed           520 
 Makefile.am               Locally Removed           520 
 leap-fpga-control.c       Locally Removed           520 

Directory tools/platforms/leap-fpga-ctrl
 leap-fpga-ctrl.c          Locally Added               - 
 iniparser.h               Locally Added               - 
 config-sample             Locally Added               - 
 dictionary.c              Locally Added               - 
 dictionary.h              Locally Added               - 
 iniparser.c               Locally Added               - 
 init-leap-fpga            Locally Added               - 
 README                    Locally Added               - 

Directory .
 aclocal.m4                Locally Modified          520 

Directory drivers/linux/leap-fpga-ctrl
 iniparser.h               Locally Removed           520 
 config-sample             Locally Removed           520 
 dictionary.c              Locally Removed           520 
 scripts/                  Locally Removed           520 

Directory drivers/linux/leap-fpga-ctrl/scripts
 HTG-V5-PCIe               Locally Removed           520 

Directory drivers/linux/leap-fpga-ctrl
 dictionary.h              Locally Removed           520 
 README                    Locally Removed           520 
 init-leap-fpga            Locally Removed           520 
 iniparser.c               Locally Removed           520 

Move leap-fpga-ctrl to tools/ directory tree and package
for Ubuntu.

----------
jsemer      Date: Wed Apr 13 15:46:09 EDT 2011  CSN: CSN-platforms-522
                  Wed Apr 13 19:46:09 UTC 2011


Directory debian
 changelog                 Locally Modified          521 

Directory drivers/linux
 leap-fpga-ctrl/           Locally Removed           521 

Directory drivers/linux/leap-fpga-ctrl
 leap-fpga-ctrl.c          Locally Removed           521 
 Makefile                  Locally Removed           521 

Finish deleting old leap-fpga-ctrl/ directory.

----------
mcadler     Date: Wed Apr 13 20:50:39 EDT 2011  CSN: CSN-platforms-523
                  Thu Apr 14 00:50:39 UTC 2011


Directory tools/platforms/leap-fpga-ctrl
 leap-fpga-ctrl.c          Locally Modified          522 

Add trailing slashes to directory paths.

----------
joel        Date: Thu Apr 14 08:28:03 EDT 2011  CSN: CSN-platforms-524
                  Thu Apr 14 12:28:03 UTC 2011


Directory debian
 control                   Locally Modified          523 
 changelog                 Locally Modified          523 
 rules                     Locally Modified          523 

Moved locatestate to /var when packaging for Ubuntu. Removed 
requirement for chkconfig which does not seem to work properly on 
Ubuntu since they moved to using upstart. So there are two
things to note:

1) When one wants to manually install in /usr one nieds to use 
the following configure command:

 % ./configure --prefix=/usr --sysconfdir=/etc/ --localstatedir=/var \
                --mandir=/usr/share/man --infodir=/usr/share/info

I need to figure out if there is a standard way for autoconf to set
these dirs when prefix=/usr.


2) You need to manually configure the init script /etc/init.d/init-fpga-ctrl.
On SUSE one can use chkconfig... On Ubuntu it is TBD.


----------
joel        Date: Fri Apr 15 20:35:37 EDT 2011  CSN: CSN-leap-platforms-525
                  Sat Apr 16 00:35:37 UTC 2011


Directory debian
 changelog                 Locally Modified          524 

Directory admin/packages
 leap-platforms            Locally Added               - 
 platforms                 Locally Removed           524 

Changed package name from 'platforms' to 'leap-platforms'. Even
though these awb-based modules might be useful in other
environments than leap, called them just 'platforms' seemed
too grandious.

----------
joel        Date: Sat Apr 16 15:36:02 EDT 2011  CSN: CSN-leap-platforms-526
                  Sat Apr 16 19:36:02 UTC 2011


Directory .
 configure                 Locally Modified          525 

Directory debian
 leap-platforms-bin.postrm Locally Modified          525 
 leap-platforms-bin.prerm  Locally Modified          525 
 changelog                 Locally Modified          525 
 rules                     Locally Modified          525 
 leap-platforms-bin.dirs   Locally Modified          525 
 leap-platforms-bin.postinst Locally Modified          525 
 leap-platforms-bin.init   Locally Added               0 

Directory .
 debian/                   Locally Modified          525 
 Makefile.in               Locally Modified          525 
 configure.in              Locally Modified          525 

Directory tools/platforms/leap-fpga-ctrl
 Makefile.in               Locally Modified          525 
 init/                     Locally Added               0 

Directory tools/platforms/leap-fpga-ctrl/init
 leap-fpga.in              Locally Added               - 

Directory tools/platforms/leap-fpga-ctrl
 config-sample             Locally Removed           525 
 Makefile.am               Locally Modified          525 
 etc/                      Locally Added               0 

Directory tools/platforms/leap-fpga-ctrl/etc
 config-sample             Locally Added               - 

Directory tools/platforms/leap-fpga-ctrl
 init-leap-fpga            Locally Removed           525 

Added packaging support for installing the leap-fpga init 
script and various associated changes. Since dh_installinit
would not restrict its changes to the leap-platforms-bin
package, the pre/post,install/rm operations have been
manually added to the relevant scripts. The actual install
of leap-fpga-ctrl and related files are also still done by 
rules in Makefile.am rather than via debhelper scripts.

----------
kfleming    Date: Mon Apr 18 15:56:07 EDT 2011  CSN: CSN-leap-platforms-527
                  Mon Apr 18 19:56:07 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/sata-bluespec
 XUPV5_SERDES.bsv          Locally Modified          526 


Improved word synchronization in SERDES by fixing bug in the even/odd alignment conditions.  We now align correctly, but we witness spurious alignment events in the odd aligned case when we have back to back control symbols.  These are harmless, and this behavior can be modified. 

----------
mcadler     Date: Tue Apr 26 15:55:23 EDT 2011  CSN: CSN-leap-platforms-528
                  Tue Apr 26 19:55:23 UTC 2011


Directory tools/platforms/leap-fpga-ctrl
 leap-fpga-ctrl.c          Locally Modified          527 

Directory tools/platforms/leap-fpga-ctrl/scripts
 HTG-V5-PCIe               Locally Modified          527 

Directory tools/platforms/leap-fpga-ctrl/etc
 config-sample             Locally Modified          527 

Remove all PCIe power control, driver loading and programming cable control
from the C program.  Device-specific control is now in the script.  A number
of fields are now dropped from the configuration file.

HTG-V5-PCIe now handles its own kernel driver loading and PCIe bus control.
It also can serve as a template for shell scripts running in a setuid root
environment.  (E.g. -p switch to /bin/sh and making sure PATH is clean.)

----------
kfleming    Date: Tue May 10 20:30:52 EDT 2011  CSN: CSN-leap-platforms-529
                  Wed May 11 00:30:52 UTC 2011


Directory .
 Makefile.in               Locally Modified          528 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-bluespec
 pcie-bluespec.awb         Locally Modified          528 
 endpoint_blk_plus_v1_14.v Locally Added               0 


Hacked around bluespec's renaming of the pcie device primitive.

----------
kfleming    Date: Wed May 11 10:30:56 EDT 2011  CSN: CSN-leap-platforms-530
                  Wed May 11 14:30:56 UTC 2011


Directory tools/platforms/leap-fpga-ctrl/scripts
 XUPV5                     Locally Added               0 


Added configuration file for XUPv5.  This config file will not work on all machines, but serves as a template. 


----------
kfleming    Date: Mon May 16 10:07:50 EDT 2011  CSN: CSN-leap-platforms-531
                  Mon May 16 14:07:50 UTC 2011


Directory modules/bluespec/tests/NullConnectedApp
 AudioProcessor.cpp        Locally Modified          530 
 AudioProcessor.h          Locally Modified          530 


Removed references to channelio so that this null connected
application can be used in other testing.

----------
mcadler     Date: Wed May 25 23:00:03 EDT 2011  CSN: CSN-leap-platforms-533
                  Thu May 26 03:00:03 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr2-sdram
 ddr2-sdram-sync-tig.ucf   Locally Modified          532 

Update timing constraints for latest Bluespec SyncFIFOs.

----------
mcadler     Date: Thu Jun  2 15:21:23 EDT 2011  CSN: CSN-leap-platforms-536
                  Thu Jun  2 19:21:23 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-new
 pci-express-device.bsv    Locally Modified          535 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks/simulation
 sim-clocks-device.awb     Locally Modified          535 
 sim-clocks-device.bsv     Locally Modified          535 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks/null
 null-clocks-device.awb    Locally Modified          535 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks/differential
 differential-clocks-device.awb Locally Modified          535 
 differential-clocks-device.bsv Locally Modified          535 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks/single-ended
 single-ended-clocks-device.awb Locally Modified          535 
 single-ended-clocks-device.bsv Locally Modified          535 
 single-ended-clocks-device-altera.awb Locally Removed           535 
 single-ended-clocks-device.vhd Locally Removed           535 
 single-ended-clocks-device.v Locally Modified          535 

- PCIe SyncReg failed with the latest Bluespec due to a change in timing.
  Replaced with a SyncFIFO and HTG / Virtex 5 now works.

- Fix single ended clocks check in.  I don't know how the code checked in last
  week could have worked, syntactically.
- Removed vhdl for single ended clock since it is replaced by Verilog.

- Removed redundant MODEL_CLOCK_MULTIPLIER / MODEL_CLOCK_DIVIDER parameters
  from a number of clock generators.  Use MODEL_CLOCK_FREQ and the PLL
  parameters will be computed automatically.

  NOTE: I did not go through the myriad old, rarely used, models and update
  their clocks.  Some older models that specified PLL parameters explicitly
  will now have their frequencies reset to the default.

----------
mcadler     Date: Thu Jun  9 23:22:52 EDT 2011  CSN: CSN-leap-platforms-537
                  Fri Jun 10 03:22:52 UTC 2011


Directory modules/bluespec/common/fpgaenv/fpga-components
 floating-point-accel.bsv  Locally Modified          536 

Single to double precision FP conversion was picking from the wrong bits
in the Alpha register.

I don't like the Alpha-specific single precision register code being in the
generic library, but that change can wait for another day.

----------
pellauer    Date: Tue Jun 14 14:58:45 EDT 2011  CSN: CSN-leap-platforms-538
                  Tue Jun 14 18:58:45 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks/single-ended
 single-ended-clocks-device-simulation.awb Locally Removed           537 
 single-ended-clocks-device-simulation.bsv Locally Removed           537 
 single-ended-clocks-device-verilog-simulation.bsv Locally Removed           537 
 single-ended-clocks-device-simulation.v Locally Removed           537 


All single-edged clock devices have now been unified under the main 
single-edged clock device. FPGAEnvs will be updated in the next commit.

----------
mcadler     Date: Thu Jul  7 16:50:14 EDT 2011  CSN: CSN-leap-platforms-539
                  Thu Jul  7 20:50:14 UTC 2011


Directory modules/bluespec/common/fpgaenv/fpga-components
 xilinx.sdc                Locally Added               0 
 hardware-fpga-components-virtex2.awb Locally Modified          538 
 hardware-fpga-components-virtex5.awb Locally Modified          538 
 hardware-fpga-components-virtex6.awb Locally Modified          538 

Add Symplify-specific scripting to store LUTRAMs in LUTs.  I believe the syntax
is correct, but am not 100% confident.

----------
kfleming    Date: Fri Jul 22 16:52:12 EDT 2011  CSN: CSN-leap-platforms-540
                  Fri Jul 22 20:52:12 UTC 2011


Directory modules/bluespec/common/fpgaenv/fpga-components
 shiftreg-sim.bsv          Locally Added               0 
 shiftreg.bsv              Locally Added               0 
 shiftreg.v                Locally Added               0 
 hardware-fpga-components-arriaII.awb Locally Modified          539 
 software-fpga-components.awb Locally Modified          539 
 hardware-fpga-components-virtex2.awb Locally Modified          539 
 hardware-fpga-components-virtex5.awb Locally Modified          539 
 hardware-fpga-components-virtex6.awb Locally Modified          539 


Added a shift register primitive to fpga-components.  This is useful
in implementing delay lines and fifos, and may represent a more
efficient implementation of some flavors/parameterizations of mkFIFO.


----------
kfleming    Date: Wed Aug  3 00:14:45 EDT 2011  CSN: CSN-leap-platforms-541
                  Wed Aug  3 04:14:45 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/ml605
 serial/                   Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/ml605/serial
 ml605-serial.cpp          Locally Added               0 
 xilinx.ut                 Locally Added               0 
 ml605-serial.h            Locally Added               0 
 xilinx.sdf                Locally Added               0 
 ml605-serial.awb          Locally Added               0 
 ml605-serial.bsv          Locally Added               0 
 ml605-serial.ucf          Locally Added               0 
 ml605-serial.xst          Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/serial/ucf
 serial-device-ucf-ml605.awb Locally Added               0 
 serial-ml605.ucf          Locally Added               0 



Created an ML605 platform with a serial communications channel attached to it.  The ML605 conveniently has a USB-to-UART connector on it.   

----------
kfleming    Date: Fri Aug 19 14:47:09 EDT 2011  CSN: CSN-leap-platforms-542
                  Fri Aug 19 18:47:09 UTC 2011


Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/little-endian
 umf-little-endian.bsv     Locally Modified          541 


Made umf data types parametric.

----------
mpellaue    Date: Thu Sep  8 16:49:23 EDT 2011  CSN: CSN-leap-platforms-543
                  Thu Sep  8 20:49:23 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/ml605/pcie-dma
 ml605-v6-pcie-dma.awb     Locally Modified          542 
 ml605-v6-pcie-dma.sdc     Locally Added               0 
 ml605-v6-pcie-dma.bsv     Locally Modified          542 
 ml605-v6-pcie-dma.xst     Locally Modified          542 
 ml605-v6-pcie-dma.xcf     Locally Modified          542 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pcie-dma
 BRAM64x512.v              Locally Added               0 
 Xilinx_SyncFIFOLevel_512x64.v Locally Modified          542 
 dma_sgl_loader.v          Locally Added               0 
 BRAM64x512.ngc            Locally Added               0 
 Xilinx_SyncFIFOLevel_512x64.ngc Locally Modified          542 
 pcie_dma_device.v         Locally Modified          542 
 pcie_dma_app.v            Locally Modified          542 
 pci-express-dma.awb       Locally Modified          542 
 pcie_wrapper.bsv          Locally Modified          542 


* Merging Mikhail's updates to ML605 platform.

----------
mcadler     Date: Thu Sep  8 17:05:07 EDT 2011  CSN: CSN-leap-platforms-544
                  Thu Sep  8 21:05:07 UTC 2011


Directory modules/bluespec/common/fpgaenv/fpga-components
 Bram.v                    Locally Modified          543 
 shiftreg.bsv              Locally Modified          543 

- Add scheduling rules to shiftreg to eliminate compiler warnings.

- Code BRAM in exactly the way Xilinx shows a simple dual port BRAM.  In theory
  this gives us one write port and one read port.  If the addresses on the
  ports clash, the read value returned is the old value.  I confirmed this
  works, at least on Virtex 5.

----------
mpellaue    Date: Wed Sep 14 11:39:27 EDT 2011  CSN: CSN-leap-platforms-545
                  Wed Sep 14 15:39:27 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/ml605/pcie-dma
 ml605-v6-pcie-dma.xst     Locally Modified          544 


Remove newline from end of file. This was breaking things when the XST build
pipeline appended flags, since the extra newline caused them to be interpreted
as a new set of commands, rather than an append to the existing set of commands.

This is more of a workaround. The real fix would be to have the XST pipeline
stage chomp spurious newlines out from the end of the file before appending.

----------
mcadler     Date: Thu Sep 15 16:34:24 EDT 2011  CSN: CSN-leap-platforms-547
                  Thu Sep 15 20:34:24 UTC 2011


Directory modules/bluespec/common/fpgaenv/fpga-components
 user-clock.bsv            Locally Modified          546 
 user-clock-pll-virtex5.bsv Locally Modified          546 
 user-clock-pll-virtex5.v  Locally Modified          546 

Add a more flexible clock interface, USER_CLOCK_VEC, designed to match the
output of a Xilinx PLL.  Kept the old interface for compatibility.

The new module mkUserClock_2PhasedPLL generates an output clock of the
requested frequency and a second clock out of phase by the requested amount.

----------
mpellaue    Date: Tue Sep 20 10:37:09 EDT 2011  CSN: CSN-leap-platforms-549
                  Tue Sep 20 14:37:09 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/ml605/pcie-dma
 ml605-v6-pcie-dma.xcf     Locally Modified          548 


Patch from Mikhail. Remove conflicting constraints from ML605.

----------
emer        Date: Wed Sep 21 19:43:43 EDT 2011  CSN: CSN-leap-platforms-554
                  Wed Sep 21 23:43:43 UTC 2011


Directory debian
 control                   Locally Modified          553 
 changelog                 Locally Modified          553 
 rules                     Locally Modified          553 

Start development of v11.12 release.

----------
emer        Date: Thu Sep 22 23:11:05 EDT 2011  CSN: CSN-leap-platforms-555
                  Fri Sep 23 03:11:05 UTC 2011


Directory debian
 changelog                 Locally Modified          554 
 rules                     Locally Modified          554 

Directory tools/platforms/leap-fpga-ctrl
 leap-fpga-ctrl.c          Locally Modified          554 

Directory tools/platforms/leap-fpga-ctrl/etc
 config-sample             Locally Modified          554 

Improved the behavior of leap-fpga-ctrl with respect to the optional control scripts that
live in <PREFIX>/share/leap/scripts, which do extra operations on hardware devices for
certain leap-fpga-ctrl commands. Now if you want to use such a script you must enable
it explictly with a line in the configuration file in <PREFIX>/etc/leap/config. In
specific, one must have a line of the following form for each device in that file:

has_control_script = yes|no

In order to avoid silent failures all devices must now have such a line in their 
section of the configuration file. In addition, if the device is specified to have 
a script and it does not exist, then leap-fpga-ctrl will abort with an error message.

Fixed debian installation so leap-fpga-ctrl is actually installed suid root.

----------
kfleming    Date: Tue Sep 27 23:24:17 EDT 2011  CSN: CSN-leap-platforms-556
                  Wed Sep 28 03:24:17 UTC 2011


Directory tools/platforms/leap-fpga-ctrl/scripts
 XUPV5                     Locally Modified          555 


Updated XUPV5 run script to do a more intelligent interrogation of the
PCIE device.  It can now figure out the magic PCIE memory settings
without user intervention, and can prompt the user to reboot computer
if the PCIE is not properly configured.  

It cannot load or unload the PCIE device driver, though that
functionality will be coming soon.

----------
kfleming    Date: Wed Sep 28 15:22:41 EDT 2011  CSN: CSN-leap-platforms-557
                  Wed Sep 28 19:22:41 UTC 2011


Directory drivers/linux
 hasim/                    Locally Removed           556 

Directory drivers/linux/hasim
 kernel-pcie-virtex5/      Locally Removed           556 

Directory drivers/linux/hasim/kernel-pcie-virtex5
 pchnl_if.h                Locally Removed           556 
 pchnl_main.c              Locally Removed           556 
 pchnl_if.awb              Locally Removed           556 
 Makefile                  Locally Removed           556 
 README                    Locally Removed           556 
 pchnl_main.h              Locally Removed           556 

Directory drivers/linux/platforms
 kernel-pcie-virtex5/      Locally Removed           556 

Directory drivers/linux/platforms/kernel-pcie-virtex5
 pchnl_if.h                Locally Removed           556 
 pchnl_main.c              Locally Removed           556 
 pchnl_if.awb              Locally Removed           556 
 Makefile                  Locally Removed           556 
 README                    Locally Removed           556 
 pchnl_main.h              Locally Removed           556 

Directory drivers/linux/platforms
 xupv5-pcie/               Locally Added               0 

Directory drivers/linux/platforms/xupv5-pcie
 src/                      Locally Added               0 

Directory drivers/linux/platforms/xupv5-pcie/src
 main.c                    Locally Added               0 
 Makefile                  Locally Added               0 

Directory drivers/linux/platforms/xupv5-pcie
 dkms/                     Locally Added               0 

Directory drivers/linux/platforms/xupv5-pcie/dkms
 dkms.conf                 Locally Added               0 

Added XUPV5 driver to leap-platforms. Also included conf for dkms.

----------
emer        Date: Wed Sep 28 16:19:02 EDT 2011  CSN: CSN-leap-platforms-558
                  Wed Sep 28 20:19:02 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 pci-express-driver-header/ Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-driver-header
 pchnl_if.h                Locally Added               0 
 pchnl_if.awb              Locally Added               - 

Directory drivers/linux/platforms/htg-pcie-virtex5
 src/                      Locally Added               0 

Directory drivers/linux/platforms/htg-pcie-virtex5/src
 pchnl_if.h                Locally Added               - 
 pchnl_main.c              Locally Added               - 
 Makefile                  Locally Added               - 
 README                    Locally Added               - 
 pchnl_main.h              Locally Added               - 

Directory drivers/linux/platforms/htg-pcie-virtex5
 pchnl_if.h                Locally Removed           557 
 pchnl_main.c              Locally Removed           557 
 pchnl_if.awb              Locally Removed           557 
 Makefile                  Locally Removed           557 
 README                    Locally Removed           557 
 pchnl_main.h              Locally Removed           557 

Moved pcie-express header file module out of drivers/ tree
and into modules/ tree, with actual source file referenced
by a symbolic link.

Moved htg driver into analagous directory structure to
xupv5 driver - dkpg.conf file still needed.

----------
kfleming    Date: Wed Sep 28 21:54:59 EDT 2011  CSN: CSN-leap-platforms-559
                  Thu Sep 29 01:54:59 UTC 2011


Directory tools/platforms/leap-fpga-ctrl/scripts
 XUPV5                     Locally Modified          558 


XUPV5 script now modprobes the bsemu driver automatically.  This makes
the script full automatic after the initial reboot.

----------
emer        Date: Thu Sep 29 20:58:50 EDT 2011  CSN: CSN-leap-platforms-560
                  Fri Sep 30 00:58:50 UTC 2011


Directory debian
 control                   Locally Modified          559 
 changelog                 Locally Modified          559 
 rules                     Locally Modified          559 
 leap-platforms-xupv5.postinst Locally Added               0 
 leap-platforms-xupv5.prerm Locally Added               0 
 leap-platforms-xupv5.dkms Locally Added               0 

Directory .
 debian/                   Locally Modified          559 
 Makefile.in               Locally Modified          559 
 Makefile.am               Locally Modified          559 

Added debian instructions for building the xupv5 pcie
driver. This driver is now included in the new
debian package leap-platforms-xupv5.

----------
kfleming    Date: Sun Oct  2 14:11:53 EDT 2011  CSN: CSN-leap-platforms-561
                  Sun Oct  2 18:11:53 UTC 2011


Directory tools/platforms/leap-fpga-ctrl/scripts
 XUPV5                     Locally Modified          560 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-bluespec
 server.cpp                Locally Modified          560 
 pcie-bluespec.awb         Locally Modified          560 


Added a debug flag to remove driver print outs.  XUPV5 script now
checks for the /dev/bsemu0 file.

----------
kfleming    Date: Tue Oct 18 15:28:54 EDT 2011  CSN: CSN-leap-platforms-571
                  Tue Oct 18 19:28:54 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/sata-bluespec
 XUPV5_SERDES.bsv          Locally Modified          570 



Added debug interface to second SERDES link.  This is part of an
ongoing effort to build multi-fpga systems composed of several XUPV5.


----------
mcadler     Date: Mon Oct 24 22:43:12 EDT 2011  CSN: CSN-leap-platforms-572
                  Tue Oct 25 02:43:12 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device-bdpi.c   Locally Modified          571 

Support for 64-bit UMF chunks in simulation.

----------
kfleming    Date: Thu Oct 27 13:01:13 EDT 2011  CSN: CSN-leap-platforms-573
                  Thu Oct 27 17:01:13 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5/pcie-sata
 xilinx-xup-pcie-sata.awb  Locally Modified          572 
 xilinx-xup-pcie-sata.bsv  Locally Modified          572 
 xilinx-xup-pcie-sata.bsh  Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5/sata
 xilinx-xup-sata.awb       Locally Modified          572 
 xilinx-xup-sata.bsv       Locally Modified          572 
 xilinx-xup-sata.bsh       Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 sata-bluespec/            Locally Removed           572 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/sata-bluespec
 SERDES_TOP.bsv            Locally Removed           572 
 XUPV5_SERDES_UG.bsv       Locally Removed           572 
 sata-bluespec.awb         Locally Removed           572 
 serdes_ip.v               Locally Removed           572 
 bsc_gtp_attributes.ucf    Locally Removed           572 
 XUPV5_SERDES.bsv          Locally Removed           572 
 serdes_tile.v             Locally Removed           572 
 diff_clock.v              Locally Removed           572 
 serdes.v                  Locally Removed           572 
 bsc_serdes_top.ucf        Locally Removed           572 
 DiffClock.bsv             Locally Removed           572 
 mgt_usrclk_source.v       Locally Removed           572 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 sata-aurora-3gbps/        Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/sata-aurora-3gbps
 aurora_8b10b_v5_2_global_logic.v Locally Added               0 
 aurora_8b10b_v5_2_transceiver_tile.vhd Locally Added               0 
 aurora_8b10b_v5_2_chbond_count_dec.v Locally Added               0 
 aurora_8b10b_v5_2_err_detect.v Locally Added               0 
 aurora_8b10b_v5_2_rx_ll.v Locally Added               0 
 XUPV5_AURORA_SINGLE_UG.bsv Locally Added               0 
 aurora_8b10b_v5_2_tx_ll.v Locally Added               0 
 aurora_8b10b_v5_2_tx_ll_control.v Locally Added               0 
 sata-aurora.awb           Locally Added               0 
 aurora_8b10b_v5_2_example_design.v Locally Added               0 
 aurora_8b10b_v5_2_transceiver_wrapper.v Locally Added               0 
 aurora_8b10b_v5_2_tx_ll_datapath.v Locally Added               0 
 aurora_8b10b_v5_2_aurora_lane.v Locally Added               0 
 aurora_8b10b_v5_2_rx_ll_pdu_datapath.v Locally Added               0 
 aurora_8b10b_v5_2_reset_logic.v Locally Added               0 
 aurora_8b10b_v5_2_clock_module.v Locally Added               0 
 aurora_8b10b_v5_2_lane_init_sm.v Locally Added               0 
 aurora_8b10b_v5_2_transceiver_wrapper.vhd Locally Added               0 
 aurora_8b10b_v5_2_idle_and_ver_gen.v Locally Added               0 
 aurora_8b10b_v5_2_standard_cc_module.v Locally Added               0 
 aurora_8b10b_v5_2.v       Locally Added               0 
 aurora_8b10b_v5_2_sym_dec.v Locally Added               0 
 XUPV5_AURORA_SINGLE.bsv   Locally Added               0 
 aurora_8b10b_v5_2_channel_init_sm.v Locally Added               0 
 aurora_8b10b_v5_2_example_design.ucf Locally Added               0 
 aurora_8b10b_v5_2_sym_gen.v Locally Added               0 
 aurora_8b10b_v5_2_transceiver_tile.v Locally Added               0 
 aurora_8b10b_v5_2_rx_stream.v Locally Added               0 
 aurora_8b10b_v5_2_tx_stream.v Locally Added               0 
 bsc_serdes_top.ucf        Locally Added               0 
 aurora_8b10b_v5_2_channel_err_detect.v Locally Added               0 


Added an implementation of the Xilinx Aurora inter-chip serial IP and
support for multi-fpga compilation for a pair of XUPV5.  

The Aurora IP is available for every post Virtex-4 board, including
the ML605.  The IP introduced in this checkin can be used as a
template for linking those chips.


----------
kfleming    Date: Wed Nov  9 16:18:04 EST 2011  CSN: CSN-leap-platforms-574
                  Wed Nov  9 21:18:04 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5
 pcie-aurora/              Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5/pcie-aurora
 xilinx-xup-pcie-sata.h    Locally Added               0 
 xilinx-xup-pcie-sata.awb  Locally Added               0 
 xilinx.download           Locally Added               0 
 xilinx-xup-pcie-sata.bsv  Locally Added               0 
 xilinx.ut                 Locally Added               0 
 xilinx.sdc                Locally Added               0 
 xilinx-xup-pcie-sata.bsh  Locally Added               0 
 xilinx-xup-pcie-sata.ucf  Locally Added               0 
 xilinx.sdf                Locally Added               0 
 xilinx.xst                Locally Added               0 
 xilinx-xup-pcie-sata.cpp  Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5
 sata/                     Locally Removed           573 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5/sata
 xilinx-xup-sata.h         Locally Removed           573 
 xilinx.download           Locally Removed           573 
 xilinx.ut                 Locally Removed           573 
 xilinx-xup-sata.awb       Locally Removed           573 
 xilinx.sdc                Locally Removed           573 
 xilinx-xup-sata.bsv       Locally Removed           573 
 xilinx.sdf                Locally Removed           573 
 xilinx-xup-sata.bsh       Locally Removed           573 
 xilinx-xup-sata.ucf       Locally Removed           573 
 xilinx.xst                Locally Removed           573 
 xilinx-xup-sata.cpp       Locally Removed           573 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/sata-aurora-3gbps
 XUPV5_AURORA_SINGLE_UG.bsv Locally Modified          573 
 sata-aurora.awb           Locally Modified          573 
 aurora_8b10b_v5_2_example_design.v Locally Modified          573 
 XUPV5_AURORA_SINGLE.bsv   Locally Modified          573 
 bsc_serdes_top.ucf        Locally Modified          573 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 sata-aurora-3.125gbps/    Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/sata-aurora-3.125gbps
 aurora_8b10b_v5_2_global_logic.v Locally Added               0 
 aurora_8b10b_v5_2.v       Locally Added               0 
 aurora_8b10b_v5_2_chbond_count_dec.v Locally Added               0 
 aurora_8b10b_v5_2_err_detect.v Locally Added               0 
 XUPV5_AURORA_SINGLE_UG.bsv Locally Added               0 
 aurora_8b10b_v5_2_sym_dec.v Locally Added               0 
 sata-aurora.awb           Locally Added               0 
 aurora_8b10b_v5_2_example_design.v Locally Added               0 
 aurora_8b10b_v5_2_transceiver_wrapper.v Locally Added               0 
 XUPV5_AURORA_SINGLE.bsv   Locally Added               0 
 aurora_8b10b_v5_2_aurora_lane.v Locally Added               0 
 aurora_8b10b_v5_2_channel_init_sm.v Locally Added               0 
 aurora_8b10b_v5_2_example_design.ucf Locally Added               0 
 aurora_8b10b_v5_2_reset_logic.v Locally Added               0 
 aurora_8b10b_v5_2_clock_module.v Locally Added               0 
 aurora_8b10b_v5_2_sym_gen.v Locally Added               0 
 aurora_8b10b_v5_2_lane_init_sm.v Locally Added               0 
 aurora_8b10b_v5_2_transceiver_tile.v Locally Added               0 
 aurora_8b10b_v5_2_idle_and_ver_gen.v Locally Added               0 
 aurora_8b10b_v5_2_rx_stream.v Locally Added               0 
 aurora_8b10b_v5_2_tx_stream.v Locally Added               0 
 aurora_8b10b_v5_2_channel_err_detect.v Locally Added               0 
 bsc_aurora_sma_top.ucf    Locally Added               0 
 aurora_8b10b_v5_2_standard_cc_module.v Locally Added               0 


Added several high-speed serial implementations for the XUPV5.  These
GTP/GTX links are generally available on Xilinx chips and boards, and
are very useful for board to board communication in the context of a
multiple FPGA implementation.  Although what I have implemented is
device specific, in practice porting to different links is
straightforward (indeed this commit includes two different links on
the XUPV5).  Also good is that the links seem to be scaling with
Moore's law in bandwidth and latency.

----------
kfleming    Date: Thu Nov 10 12:10:03 EST 2011  CSN: CSN-leap-platforms-575
                  Thu Nov 10 17:10:03 UTC 2011


Directory .
 Makefile.in               Locally Modified          574 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/sata-aurora-3gbps
 XUPV5_AURORA_SINGLE.bsv   Locally Modified          574 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/sata-aurora-3.125gbps
 XUPV5_AURORA_SINGLE.bsv   Locally Modified          574 



Changed interface of Aurora interfpga devices to match new style fpga routers.

----------
mcadler     Date: Thu Dec  1 14:24:06 EST 2011  CSN: CSN-leap-platforms-576
                  Thu Dec  1 19:24:06 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/utils
 physical-platform-utils.bsv Locally Added               0 
 utils.awb                 Locally Modified          575 

Add details to identify an individual FPGA platform uniquely among a multi-FPGA
set.  The values are defined for all platforms so code can work both in single
and multiple FPGA environments.

Multi-FPGA configuration/build scripts will set the platform ID automatically.

----------
mcadler     Date: Thu Dec  1 22:44:33 EST 2011  CSN: CSN-leap-platforms-577
                  Fri Dec  2 03:44:33 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/jtag
 htg-v5-jtag.ucf           Locally Modified          576 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled-synplify.ucf Locally Modified          576 
 htg-v5-pcie-enabled.ucf   Locally Modified          576 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/serial/ublaze-serial
 serial-device-ublaze-tig.ucf Locally Modified          576 
 serial-device-ublaze-tig-synplify.ucf Locally Modified          576 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr
 ddr_sdram.ucf             Locally Modified          576 
 ddr_sdram_tig_synplify.ucf Locally Modified          576 
 ddr_sdram_tig.ucf         Locally Modified          576 

LLPI no longer under virtual platform.

----------
kfleming    Date: Fri Dec  9 14:33:46 EST 2011  CSN: CSN-leap-platforms-578
                  Fri Dec  9 19:33:46 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/sata-aurora-3.125gbps
 sata-aurora.awb           Locally Modified          577 


Changed the metadata in the sata link naming to make them easier to identify in awb. 

----------
mcadler     Date: Sat Dec 10 16:39:24 EST 2011  CSN: CSN-leap-platforms-579
                  Sat Dec 10 21:39:24 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/utils
 physical-platform-utils.bsv Locally Modified          578 

Make sure the FPGA_PLATFORM_ID is at least 1 bit.

----------
kfleming    Date: Thu Dec 15 22:13:49 EST 2011  CSN: CSN-leap-platforms-580
                  Fri Dec 16 03:13:49 UTC 2011


Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5/aurora
 xilinx-xup-sata.awb       Locally Modified          579 
 xilinx-xup-sata.bsv       Locally Modified          579 
 xilinx-xup-sata.bsh       Locally Modified          579 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/sata-aurora-3.125gbps
 XUPV5_AURORA_SINGLE_UG.bsv Locally Modified          579 
 aurora_8b10b_v5_2_example_design.v Locally Modified          579 
 XUPV5_AURORA_SINGLE.bsv   Locally Modified          579 


Changed aurora xupv5 platform to actually use the aurora type.  

Added flow control to the SMA Aurora link.  This is a block-style flow
control.  I have not evaluated its performance yet.  This kind of
control should be used by all aurora links, and should be seperated
out from this specific link.

----------
mcadler     Date: Thu Jan 19 08:11:24 EST 2012  CSN: CSN-leap-platforms-581
                  Thu Jan 19 13:11:24 UTC 2012


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/sata-aurora-3.125gbps
 XUPV5_AURORA_SINGLE.bsv   Locally Modified          580 

Update for changed LibRL marshaller interface.

----------
emer        Date: Tue Jan 24 18:48:38 EST 2012  CSN: CSN-leap-platforms-582
                  Tue Jan 24 23:48:38 UTC 2012


Directory debian
 control                   Locally Modified          581 
 changelog                 Locally Modified          581 
 rules                     Locally Modified          581 

Move to version v12.01. Note that version v11.12 was never released.

----------
emer        Date: Wed Jan 25 08:08:33 EST 2012  CSN: CSN-leap-platforms-583
                  Wed Jan 25 13:08:33 UTC 2012


Directory debian
 control                   Locally Modified          582 

For apt installs, 'recommend' previous shared package release rather
than 'require' it.

----------
emer        Date: Wed Jan 25 15:01:14 EST 2012  CSN: CSN-leap-platforms-584
                  Wed Jan 25 20:01:14 UTC 2012


Directory debian
 changelog                 Locally Modified          583 

Directory admin/packages
 leap-platforms            Locally Modified          583 

To alleviate debian package file conflicts, put shared copy of
repository in a version named directory rather than in HEAD. For
example:

/usr/share/asim/packages/awb/v12.01

rather than

/usr/share/asim/packages/awb/HEAD

----------
emer        Date: Thu Jan 26 13:55:03 EST 2012  CSN: CSN-leap-platforms-585
                  Thu Jan 26 18:55:03 UTC 2012


Directory admin/packages
 leap-platforms            Locally Modified          584 

Mark package as a 'prerelease'

----------
wjun        Date: Mon Feb 13 00:19:34 EST 2012  CSN: CSN-leap-platforms-589
                  Mon Feb 13 05:19:34 UTC 2012


Directory drivers/linux/platforms/xupv5-pcie/src
 main.c                    Locally Modified          588 

fixed driver for new linux kernel

----------
wjun        Date: Mon Feb 13 16:33:31 EST 2012  CSN: CSN-leap-platforms-589
                  Mon Feb 13 21:33:31 UTC 2012


Directory admin
 mytags                    Locally Modified          588 

Directory admin/packages
 leap-platforms            Locally Modified          588 

Directory .
 changes                   Locally Modified          588 

Directory drivers/linux/platforms/xupv5-pcie/src
 main.c                    Locally Modified          588 

fixed driver to work in new linux kernel

----------
emer        Date: Tue Feb 28 17:52:08 EST 2012  CSN: CSN-leap-platforms-592
                  Tue Feb 28 22:52:08 UTC 2012


Directory debian
 control                   Locally Modified          591 
 changelog                 Locally Modified          591 
 rules                     Locally Modified          591 

Directory admin/packages
 leap-platforms            Locally Modified          591 

Move to version 12.02.

----------
emer        Date: Thu Apr 12 13:41:28 EDT 2012  CSN: CSN-leap-platforms-593
                  Thu Apr 12 17:41:28 UTC 2012


Directory debian
 control                   Locally Modified          592 
 changelog                 Locally Modified          592 
 rules                     Locally Modified          592 

Directory admin/packages
 leap-platforms            Locally Modified          592 

Prepare for v12.04 release.

----------
kfleming    Date: Mon Apr 16 16:59:38 EDT 2012  CSN: CSN-leap-platforms-596
                  Mon Apr 16 20:59:38 UTC 2012


Directory modules/bluespec/common/fpgaenv/fpga-components
 xilinx.sdc                Locally Removed           595 
 xilinx.xcf                Locally Removed           595 
 hardware-fpga-components-virtex2.awb Locally Modified          595 
 xilinx-components.sdc     Locally Added               - 
 hardware-fpga-components-virtex5.awb Locally Modified          595 
 hardware-fpga-components-virtex6.awb Locally Modified          595 
 xilinx-components.xcf     Locally Added               - 


Renamed xilinx.sdc and xilinx.xcf to something slightly less generic
and updated awb files to reflect this change.

----------
kfleming    Date: Mon Apr 16 23:15:48 EDT 2012  CSN: CSN-leap-platforms-598
                  Tue Apr 17 03:15:48 UTC 2012


Directory modules/bluespec/common/fpgaenv/fpga-components
 hardware-fpga-components-virtex6-generic.awb Locally Added               0 
 user-clock-pll.bsv        Locally Modified          597 
 hardware-fpga-components-virtex5.awb Locally Modified          597 
 hardware-fpga-components-virtex6.awb Locally Modified          597 
 user-clock.bsv            Locally Modified          597 
 user-clock-pll-common.bsv Locally Added               0 
 user-clock-pll-common.v   Locally Added               0 
 user-clock-xilinx-virtex6.v Locally Added               0 
 user-clock-pll-virtex5.bsv Locally Modified          597 
 user-clock-pll-virtex6.bsv Locally Added               0 
 user-clock-pll-virtex5.v  Locally Modified          597 


Refactored the Virtex 5 PLL code to support Virtex 6.  The existing V6
clocking could only generate a 66 MHz clock for some reason. I added
an extra awb file, but this is temporary while others adjust to the
more robust clocking scheme.  I will switch to using the new style V6
clock generation in a few weeks, once people have had time to switch over.

----------
mcadler     Date: Sat Apr 28 21:41:38 EDT 2012  CSN: CSN-leap-platforms-599
                  Sun Apr 29 01:41:38 UTC 2012


Directory modules/bluespec/common/fpgaenv/fpga-components
 hardware-fpga-components-virtex6-generic.awb Locally Modified          598 
 hardware-fpga-components-virtex2.awb Locally Modified          598 
 hardware-fpga-components-virtex5.awb Locally Modified          598 
 hardware-fpga-components-virtex6.awb Locally Modified          598 
 hardware-fpga-components-arriaII.awb Locally Modified          598 

Move COST_TABLE to the build manager so that changing it doesn't cause
Bluespec recompilation.  (A consequence of build-time control over AWB
parameters.)

----------
mcadler     Date: Thu May 10 14:21:52 EDT 2012  CSN: CSN-leap-platforms-600
                  Thu May 10 18:21:52 UTC 2012


Directory modules/bluespec/common/fpgaenv/fpga-components
 lutram.bsv                Locally Modified          599 
 bare-fpga-components.awb  Locally Added               0 

Create a minimal FPGA components module for use by the bare (minimal)
Bluesim-only environment.  Provide LUTRAM so designs can be ported easily
to LEAP and avoid the Xst bug in which BRAM is inferred for storage that
should be LUTs.

----------
mcadler     Date: Mon May 21 10:37:07 EDT 2012  CSN: CSN-leap-platforms-601
                  Mon May 21 14:37:07 UTC 2012


Directory tools/platforms/leap-fpga-ctrl
 leap-fpga-ctrl.c          Locally Modified          600 

Directory tools/platforms/leap-fpga-ctrl/scripts
 HTG-V5-PCIe               Locally Modified          600 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-driver-header
 pchnl_if.h                Locally Removed           600 

Directory drivers/linux/platforms/htg-pcie-virtex5/src
 Makefile                  Locally Modified          600 

- Update HTG control script for new machine on SLES11.
- Update leap control and driver build for SLES11.
- pchnl_if.h was a link and should be a file.

----------
mcadler     Date: Mon May 21 10:40:58 EDT 2012  CSN: CSN-leap-platforms-602
                  Mon May 21 14:40:58 UTC 2012


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-driver-header
 pchnl_if.h                Locally Added               0 

Add pchnl_if.h as a file.

----------
mcadler     Date: Fri Jun 29 10:31:37 EDT 2012  CSN: CSN-leap-platforms-603
                  Fri Jun 29 14:31:37 UTC 2012


Directory tools/platforms/leap-fpga-ctrl
 leap-fpga-ctrl.c          Locally Modified          602 
 Makefile.in               Locally Modified          602 

Directory tools/platforms/leap-fpga-ctrl/scripts
 HTG-V5-PCIe               Locally Modified          602 

Directory tools/platforms/leap-fpga-ctrl
 Makefile.am               Locally Modified          602 

Directory tools/platforms/leap-fpga-ctrl/etc
 config-sample             Locally Modified          602 

- Add programming cable id (prog_cable_id) to device configuration in order to
  support multiple programming cables on a single machine.
- Assume no control script if the parameter isn't specified.

----------
mcadler     Date: Fri Jun 29 15:59:24 EDT 2012  CSN: CSN-leap-platforms-604
                  Fri Jun 29 19:59:24 UTC 2012


Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5/serial
 xilinx.download           Locally Removed           603 
 xilinx-xup-serial.awb     Locally Modified          603 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5/pcie
 xilinx.download           Locally Removed           603 
 xilinx-xup-pcie.awb       Locally Modified          603 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5/jtag
 xilinx-xup-jtag.awb       Locally Modified          603 
 xilinx.download           Locally Removed           603 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5/pcie-sata
 xilinx-xup-pcie-sata.awb  Locally Modified          603 
 xilinx.download           Locally Removed           603 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5/pcie-aurora
 xilinx-xup-pcie-sata.awb  Locally Modified          603 
 xilinx.download           Locally Removed           603 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5/aurora
 xilinx.download           Locally Removed           603 
 xilinx-xup-sata.awb       Locally Modified          603 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xupV5/chipscope
 xilinx.download           Locally Removed           603 
 xilinx-xup-chipscope.awb  Locally Modified          603 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup/serial
 xilinx.download           Locally Removed           603 
 xilinx-xup-serial.awb     Locally Modified          603 

Directory modules/bluespec/common/fpgaenv/physical-platform/xilinx_xup/jtag
 xilinx-xup-jtag.awb       Locally Modified          603 
 xilinx.download           Locally Removed           603 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/jtag
 xilinx.download           Locally Removed           603 
 htg-v5-jtag.awb           Locally Modified          603 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 xilinx.download           Locally Removed           603 
 htg-v5-pcie-enabled-synplify.awb Locally Modified          603 
 htg-v5-pcie-enabled.awb   Locally Modified          603 

All bitfile download scripts were the same!  Generate the script in the build
rules instead of replicating this file.

----------
mcadler     Date: Sat Jun 30 08:19:38 EDT 2012  CSN: CSN-leap-platforms-605
                  Sat Jun 30 12:19:38 UTC 2012


Directory tools/platforms/leap-fpga-ctrl
 leap-fpga-ctrl.c          Locally Modified          604 

Directory tools/platforms/leap-fpga-ctrl/scripts
 HTG-V5-PCIe               Locally Modified          604 

Directory tools/platforms/leap-fpga-ctrl/etc
 config-sample             Locally Modified          604 

- Add a bus_id to the configuration database
- Pass device id to configuration scripts
- Update HTG sample script to use the device id to query the database and find
  the PCIe bus id.

----------
mcadler     Date: Sat Jun 30 09:48:26 EDT 2012  CSN: CSN-leap-platforms-606
                  Sat Jun 30 13:48:26 UTC 2012


Directory tools/platforms/leap-fpga-ctrl/scripts
 HTG-V5-PCIe               Locally Modified          605 

Clean up.

----------
kfleming    Date: Mon Jul 16 22:39:43 EDT 2012  CSN: CSN-leap-platforms-607
                  Tue Jul 17 02:39:43 UTC 2012


Directory modules/bluespec/common/fpgaenv/fpga-components
 hardware-fpga-components-virtex6-generic.awb Locally Modified          606 
 user-clock-pll-common.bsv Locally Modified          606 
 user-clock-xilinx-virtex6.v Locally Modified          606 
 user-clock-pll-virtex6.bsv Locally Modified          606 


We can now generate generic clocks for the Virtex6 parts.

More proof that Xilinx hates its customers: rather than converting
Integer parameters to Reals, Xilinx randomly chokes with odd error
messages about out of range VCO values.  

----------
mcadler     Date: Sun Jul 29 14:29:52 EDT 2012  CSN: CSN-leap-platforms-608
                  Sun Jul 29 18:29:52 UTC 2012


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device.h        Locally Modified          607 
 unix-pipe-device.cpp      Locally Modified          607 

Update for new --help argument interface.

----------
kfleming    Date: Mon Sep 24 00:42:58 EDT 2012  CSN: CSN-leap-platforms-616
                  Mon Sep 24 04:42:58 UTC 2012


Directory modules/bluespec/common/fpgaenv/physical-platform/ml605/pcie-bluenoc
 xilinx-xup-pcie.bsv       Locally Modified          615 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-bluenoc
 pcie-import.bsv           Locally Modified          615 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-bluenoc/bluenoc-core
 bluenoc-top.bsv           Locally Modified          615 


Switched to driving user domain off of pcie-clock derivatives.  It is
unclear to me why similar code using the 66Mhz crystal was
non-functional.  In any case clocks are clocks, and we needed to make
this work three months ago...

----------
kfleming    Date: Mon Sep 24 11:47:31 EDT 2012  CSN: CSN-leap-platforms-618
                  Mon Sep 24 15:47:31 UTC 2012


Directory tools/platforms/leap-fpga-ctrl/scripts
 ML605                     Locally Added               0 

Directory drivers/linux/platforms
 ml605-pcie/               Locally Added               0 

Directory drivers/linux/platforms/ml605-pcie
 driver/                   Locally Added               0 

Directory drivers/linux/platforms/ml605-pcie/driver
 bluenoc                   Locally Added               0 
 bluenoc.c                 Locally Added               0 
 Makefile                  Locally Added               0 
 bluenoc.h                 Locally Added               0 

Directory drivers/linux/platforms/ml605-pcie
 dkms/                     Locally Added               0 

Directory drivers/linux/platforms/ml605-pcie/dkms
 dkms.conf                 Locally Added               0 



Added ML605 driver, its dkms hook, and a run script for
leap-fpga-ctrl.  I have done some limited testing, but more will
follow.

----------
kfleming    Date: Wed Sep 26 14:56:40 EDT 2012  CSN: CSN-leap-platforms-620
                  Wed Sep 26 18:56:40 UTC 2012


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-bluenoc
 server.cpp                Locally Modified          619 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-bluenoc/bluenoc-core
 bluenoc-top.bsv           Locally Modified          619 



Hello seems to work reliably, though I am not sure of how this came to pass.

----------
kfleming    Date: Wed Sep 26 15:04:48 EDT 2012  CSN: CSN-leap-platforms-621
                  Wed Sep 26 19:04:48 UTC 2012


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-bluenoc
 server.cpp                Locally Modified          620 



Driver code for working hello world. 

----------
mcadler     Date: Mon Oct  1 18:37:34 EDT 2012  CSN: CSN-leap-platforms-622
                  Mon Oct  1 22:37:34 UTC 2012


Directory modules/bluespec/common/fpgaenv/fpga-components
 bram.bsv                  Locally Modified          621 
 bram-multi-read.bsv       Locally Modified          621 

- Clean up BRAM interfaces and internal FIFO usage.
- Break mkBRAMBUfferedPseudoMultiRead into two flavors:  one with the old
  behavior with writes strictly ordered with reads.  The new flavor allows
  writes to update their values immediately, independent of outstanding
  reads.

----------
kfleming    Date: Tue Oct  2 01:07:50 EDT 2012  CSN: CSN-leap-platforms-623
                  Tue Oct  2 05:07:50 UTC 2012


Directory tools/platforms/leap-fpga-ctrl/scripts
 ML605                     Locally Modified          622 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-bluenoc
 server.cpp                Locally Modified          622 

Directory drivers/linux/platforms/ml605-pcie/driver
 bluenoc.c                 Locally Modified          622 
 Makefile                  Locally Modified          622 
 bluenoc.h                 Locally Modified          622 


Upgraded driver so that ioctls are avialable for resetting driver
state..  Ioctls in host-side code enable it to reinitialize the
bluenoc driver after re-programming, whereas previously we needed
rmmod/insmod.  In short, we can now run things on the ML605 from the
bm directory.

----------
kfleming    Date: Fri Oct  5 23:30:54 EDT 2012  CSN: CSN-leap-platforms-625
                  Sat Oct  6 03:30:54 UTC 2012


Directory modules/bluespec/common/fpgaenv/fpga-components
 reset_import.v            Locally Added               0 
 hardware-fpga-components-virtex6-generic.awb Locally Modified          624 
 differential-import-virtex6.bsv Locally Added               0 
 reset-import.bsv          Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/ml605/pcie-bluenoc
 xilinx-xup-pcie.ucf       Locally Modified          624 
 xilinx-xup-pcie.bsv       Locally Modified          624 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-bluenoc
 pcie-import.bsv           Locally Modified          624 
 pcie-device.ucf           Locally Modified          624 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks/differential
 differential-clocks-device.awb Locally Modified          624 
 differential-clocks-device.bsv Locally Modified          624 


Several bug fixes and augmentations now that the defense slides are under control.

1) Added reset import (we had clock import already)
2) Fixed the differential clock to actually do a differential clock (i.e. more than one clock wire)
3) ML605 pcie core was using the wrong pcie reset. Changed it to use the correct reset. 

----------
kfleming    Date: Sat Oct  6 10:18:40 EDT 2012  CSN: CSN-leap-platforms-626
                  Sat Oct  6 14:18:40 UTC 2012


Directory modules/bluespec/common/fpgaenv/physical-platform/ml605/pcie-bluenoc
 xilinx-xup-pcie.bsv       Locally Modified          625 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-bluenoc/bluenoc-core
 bluenoc-top.bsv           Locally Modified          625 


Added support for model clock to ml605.

----------
kfleming    Date: Sat Oct  6 19:15:11 EDT 2012  CSN: CSN-leap-platforms-627
                  Sat Oct  6 23:15:11 UTC 2012


Directory modules/bluespec/common/fpgaenv/fpga-components
 hardware-fpga-components-virtex6-generic.awb Locally Modified          626 

Directory modules/bluespec/common/fpgaenv/physical-platform/ml605/pcie-bluenoc
 xilinx-xup-pcie.ucf       Locally Modified          626 
 xilinx-xup-pcie.bsv       Locally Modified          626 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-bluenoc
 pcie-import.bsv           Locally Modified          626 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-bluenoc/bluenoc-core
 bluenoc-top.bsv           Locally Modified          626 


Tied system reset to derivative of PCIE reset.  Fixed bug in ucf that
caused tools to ignore the existence of the user-domain clock.

----------
mcadler     Date: Fri Oct 12 15:42:44 EDT 2012  CSN: CSN-leap-platforms-629
                  Fri Oct 12 19:42:44 UTC 2012


Directory modules/bluespec/common/fpgaenv/fpga-components
 bram.bsv                  Locally Modified          628 
 clock-buffers.bsv         Locally Modified          628 
 shiftreg.v                Locally Modified          628 
 Bram.v                    Locally Modified          628 
 lutram.bsv                Locally Modified          628 
 shiftreg.bsv              Locally Modified          628 
 lutram.v                  Locally Modified          628 

Bluespec beta compiler changes the name of RST_N to RST in BVI when no reset
is specified.  Specify default reset and clock explicitly so the code
works with both old and new compilers.

----------
kfleming    Date: Sat Oct 13 15:39:58 EDT 2012  CSN: CSN-leap-platforms-630
                  Sat Oct 13 19:39:58 UTC 2012


Directory modules/bluespec/common/fpgaenv/fpga-components
 user-clock.bsv            Locally Modified          629 

Directory modules/bluespec/common/fpgaenv/physical-platform/ml605/pcie-bluenoc
 xilinx-xup-pcie.ucf       Locally Modified          629 
 xilinx-xup-pcie.bsv       Locally Modified          629 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-bluenoc
 pcie_bury.v               Locally Modified          629 


1) Updated ML605 modules to compile with new version of bluespec
2) fixed bug in ucf.  differential clock is 200MHz, not 100 Mhz

hello and rrrtest work on the ml605, but the driver may still not be
correct.

----------
mcadler     Date: Mon Oct 15 15:38:24 EDT 2012  CSN: CSN-leap-platforms-631
                  Mon Oct 15 19:38:24 UTC 2012


Directory drivers/linux/platforms/ml605-pcie/driver
 bluenoc.c                 Locally Modified          630 
 bluenoc.h                 Locally Modified          630 

Update to latest BlueNoC drivers.

----------
kfleming    Date: Fri Oct 19 15:56:29 EDT 2012  CSN: CSN-leap-platforms-633
                  Fri Oct 19 19:56:29 UTC 2012


Directory modules/bluespec/common/fpgaenv/fpga-components
 differential-import-virtex6.bsv Locally Modified          632 

Directory modules/bluespec/common/fpgaenv/physical-platform/ml605/pcie-bluenoc
 xilinx-xup-pcie.awb       Locally Modified          632 
 xilinx-xup-pcie.bsv       Locally Modified          632 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 ddr3-sdram/               Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr3-sdram
 ddr3-sdram.xcf            Locally Added               0 
 ui_wr_data.v              Locally Added               0 
 infrastructure.v          Locally Added               0 
 bank_compare.v            Locally Added               0 
 ecc_gen.v                 Locally Added               0 
 bank_common.v             Locally Added               0 
 phy_pd.v                  Locally Added               0 
 rank_mach.v               Locally Added               0 
 ecc_buf.v                 Locally Added               0 
 rd_bitslip.v              Locally Added               0 
 phy_dly_ctrl.v            Locally Added               0 
 arb_mux.v                 Locally Added               0 
 mc.v                      Locally Added               0 
 ui_top.v                  Locally Added               0 
 memc_ui_top.v             Locally Added               0 
 ddr3-sdram-device.awb     Locally Added               0 
 mem_intfc.v               Locally Added               0 
 ddr3-sdram-verilog-import.bsv Locally Added               0 
 rank_common.v             Locally Added               0 
 arb_select.v              Locally Added               0 
 phy_rdlvl.v               Locally Added               0 
 phy_rdclk_gen.v           Locally Added               0 
 phy_dm_iob.v              Locally Added               0 
 phy_write.v               Locally Added               0 
 phy_rddata_sync.v         Locally Added               0 
 ecc_dec_fix.v             Locally Added               0 
 bank_state.v              Locally Added               0 
 bank_cntrl.v              Locally Added               0 
 example_top.v             Locally Added               0 
 phy_dq_iob.v              Locally Added               0 
 clk_ibuf.v                Locally Added               0 
 phy_ocb_mon_top.v         Locally Added               0 
 bank_queue.v              Locally Added               0 
 phy_data_io.v             Locally Added               0 
 phy_top.v                 Locally Added               0 
 ddr3-sdram-device.bsv     Locally Added               0 
 phy_init.v                Locally Added               0 
 phy_wrlvl.v               Locally Added               0 
 phy_control_io.v          Locally Added               0 
 arb_row_col.v             Locally Added               0 
 ddr3_v3_5.v               Locally Added               0 
 phy_read.v                Locally Added               0 
 ui_rd_data.v              Locally Added               0 
 dbg_display_driver.v      Locally Added               0 
 phy_ocb_mon.v             Locally Added               0 
 ddr3_wrapper.v            Locally Added               0 
 rank_cntrl.v              Locally Added               0 
 ecc_merge_enc.v           Locally Added               0 
 xilinx_ddr3_sodimm.v      Locally Added               0 
 phy_dqs_iob.v             Locally Added               0 
 ui_cmd.v                  Locally Added               0 
 phy_clock_io.v            Locally Added               0 
 bank_mach.v               Locally Added               0 
 ddr2_ddr3_chipscope.v     Locally Added               0 
 round_robin_arb.v         Locally Added               0 
 col_mach.v                Locally Added               0 
 phy_pd_top.v              Locally Added               0 
 phy_ck_iob.v              Locally Added               0 
 phy_rdctrl_sync.v         Locally Added               0 
 ddr3-sdram.ucf            Locally Added               0 
 circ_buffer.v             Locally Added               0 
 iodelay_ctrl.v            Locally Added               0 


Added memory controller for ml605.  Still has memory corruption in the
debug mode, but the behavior is at least partially correct.

----------
kfleming    Date: Wed Oct 24 14:52:27 EDT 2012  CSN: CSN-leap-platforms-634
                  Wed Oct 24 18:52:27 UTC 2012


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-bluenoc
 pcie-device.ucf           Locally Modified          633 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr3-sdram
 ui_wr_data.v              Locally Modified          633 
 infrastructure.v          Locally Modified          633 
 bank_compare.v            Locally Modified          633 
 ecc_gen.v                 Locally Modified          633 
 bank_common.v             Locally Modified          633 
 phy_pd.v                  Locally Modified          633 
 rank_mach.v               Locally Modified          633 
 ecc_buf.v                 Locally Modified          633 
 rd_bitslip.v              Locally Modified          633 
 phy_dly_ctrl.v            Locally Modified          633 
 arb_mux.v                 Locally Modified          633 
 mc.v                      Locally Modified          633 
 ui_top.v                  Locally Modified          633 
 memc_ui_top.v             Locally Modified          633 
 ddr3-sdram-device.awb     Locally Modified          633 
 mem_intfc.v               Locally Modified          633 
 rank_common.v             Locally Modified          633 
 arb_select.v              Locally Modified          633 
 phy_rdlvl.v               Locally Modified          633 
 phy_rdclk_gen.v           Locally Modified          633 
 phy_dm_iob.v              Locally Modified          633 
 phy_write.v               Locally Modified          633 
 phy_rddata_sync.v         Locally Modified          633 
 ecc_dec_fix.v             Locally Modified          633 
 bank_state.v              Locally Modified          633 
 bank_cntrl.v              Locally Modified          633 
 phy_dq_iob.v              Locally Modified          633 
 clk_ibuf.v                Locally Modified          633 
 bank_queue.v              Locally Modified          633 
 phy_data_io.v             Locally Modified          633 
 phy_top.v                 Locally Modified          633 
 phy_init.v                Locally Modified          633 
 phy_wrlvl.v               Locally Modified          633 
 phy_control_io.v          Locally Modified          633 
 arb_row_col.v             Locally Modified          633 
 ddr3_v3_5.v               Locally Modified          633 
 phy_read.v                Locally Modified          633 
 ui_rd_data.v              Locally Modified          633 
 ddr3_wrapper.v            Locally Modified          633 
 rank_cntrl.v              Locally Modified          633 
 ecc_merge_enc.v           Locally Modified          633 
 phy_dqs_iob.v             Locally Modified          633 
 ui_cmd.v                  Locally Modified          633 
 phy_clock_io.v            Locally Modified          633 
 bank_mach.v               Locally Modified          633 
 ddr2_ddr3_chipscope.v     Locally Modified          633 
 round_robin_arb.v         Locally Modified          633 
 col_mach.v                Locally Modified          633 
 phy_pd_top.v              Locally Modified          633 
 phy_ck_iob.v              Locally Modified          633 
 phy_rdctrl_sync.v         Locally Modified          633 
 ddr3-sdram.ucf            Locally Modified          633 
 circ_buffer.v             Locally Modified          633 
 iodelay_ctrl.v            Locally Modified          633 


Some fixes to the ddr3 controller for the ml605.

1) Fixed pcie ucf, which had wrong clock frequencies
2) Upgraded to mig v39

The memory controller now passes the debugger test. 


----------
mcadler     Date: Sun Oct 28 09:49:30 EDT 2012  CSN: CSN-leap-platforms-635
                  Sun Oct 28 13:49:30 UTC 2012


Directory modules/bluespec/common/fpgaenv/fpga-components
 differential-import-virtex6.bsv Locally Modified          634 

Directory modules/bluespec/common/fpgaenv/physical-platform/ml605/pcie-dma
 ml605-v6-pcie-dma.h       Locally Modified          634 
 ml605-v6-pcie-dma.awb     Locally Modified          634 
 ml605-v6-pcie-dma.sdc     Locally Removed           634 
 ml605-v6-pcie-dma.bsv     Locally Modified          634 
 xilinx.sdc                Locally Added               - 
 ml605-v6-pcie-dma.ucf     Locally Modified          634 
 ml605-v6-pcie-dma.xst     Locally Removed           634 
 ml605-v6-pcie-dma.xcf     Locally Removed           634 
 xilinx.xst                Locally Added               - 
 ml605-v6-pcie-dma.cpp     Locally Modified          634 

Directory modules/bluespec/common/fpgaenv/physical-platform/ml605
 pcie-bluenoc/             Locally Removed           634 

Directory modules/bluespec/common/fpgaenv/physical-platform/ml605/pcie-bluenoc
 xilinx-xup-pcie.ucf       Locally Removed           634 
 xilinx.ut                 Locally Removed           634 
 xilinx.sdc                Locally Removed           634 
 xilinx-xup-pcie.cpp       Locally Removed           634 
 xilinx.sdf                Locally Removed           634 
 xilinx.xst                Locally Removed           634 
 xilinx-xup-pcie.h         Locally Removed           634 
 old.ucf                   Locally Removed           634 
 xilinx-xup-pcie.awb       Locally Removed           634 
 xilinx-xup-pcie.bsv       Locally Removed           634 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr3-sdram
 ddr3-sdram-device.awb     Locally Modified          634 
 ddr3-sdram-verilog-import.bsv Locally Modified          634 
 ddr3-sdram-device.bsv     Locally Modified          634 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express
 pci-express-device-ioctl.awb Locally Removed           634 
 f2h_data_fifo.ngc         Locally Removed           634 
 h2f_data_fifo.ngc         Locally Removed           634 
 libpchnl.h                Locally Removed           634 
 pcieblkplus.ngc           Locally Removed           634 
 pci-express-c-import-ioctl.cpp Locally Removed           634 
 DMA_CONTROLLER.vhd        Locally Removed           634 
 pci-express-device.bsv    Locally Removed           634 
 channel.vhd               Locally Removed           634 
 pci-express-c-import-ioctl.h Locally Removed           634 
 RST_CONTROLLER.vhd        Locally Removed           634 
 pci-express-vhdl-import.bsv Locally Removed           634 
 CSR_BRAM.ngc              Locally Removed           634 
 PCIE_RX_ENGINE.vhd        Locally Removed           634 
 pci-express-device-mmap.awb Locally Removed           634 
 INTR_CONTROLLER.vhd       Locally Removed           634 
 PCIE_TX_ENGINE.vhd        Locally Removed           634 
 pci-express-c-import-mmap.cpp Locally Removed           634 
 PCIE_BAR0.vhd             Locally Removed           634 
 pcie-bluenoc/             Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express/pcie-bluenoc
 pcie-bluenoc.bsh          Locally Added               0 
 pcie-bury.v               Locally Added               0 
 pcie-bluenoc-tests.cpp    Locally Added               0 
 pcie-bluenoc.cpp          Locally Added               0 
 bluenoc-simple-switch.bsv Locally Added               0 
 pcie-bury.bsv             Locally Added               0 
 pcie-bluenoc.h            Locally Added               0 
 pcie-bluenoc-tests.h      Locally Added               0 
 pcie-bluenoc-ifc.awb      Locally Added               0 
 pcie-bluenoc.awb          Locally Added               0 
 pcie-bluenoc-ifc.bsv      Locally Added               0 
 bluenoc.h                 Locally Added               0 
 pcie-bluenoc.bsv          Locally Added               0 
 pcie-bluenoc-tests.bsv    Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express
 pci-express-c-import-mmap.h Locally Removed           634 
 Channel_top.vhd           Locally Removed           634 
 CSR_CONTROLLER.vhd        Locally Removed           634 
 pcie-bluenoc-virtex6/     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express/pcie-bluenoc-virtex6
 pcie_reset_delay_v6.v     Locally Added               0 
 bluenoc-top.bsv           Locally Added               0 
 gtx_drp_chanalign_fix_3752_v6.v Locally Added               0 
 pcie_gtx_v6.v             Locally Added               0 
 gtx_wrapper_v6.v          Locally Added               0 
 pcie_bram_top_v6.v        Locally Added               0 
 pcie_brams_v6.v           Locally Added               0 
 pcie_pipe_misc_v6.v       Locally Added               0 
 xilinx_v6_pcie_wrapper.v  Locally Added               0 
 pcie-virtex6.awb          Locally Added               0 
 pcie_2_0_v6.v             Locally Added               0 
 pcie_bram_v6.v            Locally Added               0 
 pcie-virtex6.ucf          Locally Added               0 
 pcie-endpoint.v           Locally Added               0 
 gtx_tx_sync_rate_v6.v     Locally Added               0 
 pcie-virtex6.xcf          Locally Added               0 
 pcie_clocking_v6.v        Locally Added               0 
 pcie_pipe_lane_v6.v       Locally Added               0 
 pcie_upconfig_fix_3451_v6.v Locally Added               0 
 pcie_pipe_v6.v            Locally Added               0 
 gtx_rx_valid_filter_v6.v  Locally Added               0 
 pcie-virtex6.bsv          Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express
 libpchnl.c                Locally Removed           634 

- New BlueNoC implementation hierarchy:

  - PCIe driver is a generic BlueNoC wrapper layer.  It requires a PCIe
    device layer (e.g. Xilinx Virtex-6).  This should make it possible to
    share almost all code with a Virtex-7 version.  The driver exposes
    a network port to the rest of the design along with the port's clock
    and a reset signal that can be triggered from software.

  - The generic PCIe driver instantiates a simple switch at the base of the
    hierarchy.  Network destinations 1-3 are debugging ports.  Destination
    1 is passed to the PCIe driver and currently tied off.  Destination 2
    is a sink and 3 is a flooder.  These are used by integrity / bandwidth
    test code when --pcie-tests is set on the run-time command line.
    Destinations 4 and above are passed out of the driver.

- Remove obsolete BlueNoC code.

- Fix scheduler warnings in DDR3 driver (missing BVI CF declarations).

- Remove a few signals from debug info. in DDR3 driver.  Reading the wires
  every cycle caused DDR3 value errors or hangs.  This makes no sense since
  they are all output wires.  Strange.

----------
mcadler     Date: Sun Oct 28 11:24:06 EDT 2012  CSN: CSN-leap-platforms-636
                  Sun Oct 28 15:24:06 UTC 2012


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 pcie-dma/                 Locally Removed           635 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pcie-dma
 BRAM64x512.v              Locally Removed           635 
 Xilinx_SyncFIFOLevel_512x64.v Locally Removed           635 
 dma_sgl_loader.v          Locally Removed           635 
 BRAM64x512.ngc            Locally Removed           635 
 Xilinx_SyncFIFOLevel_512x64.ngc Locally Removed           635 
 pcie_dma_device.v         Locally Removed           635 
 pcie_dma_app.v            Locally Removed           635 
 pcie_core/                Locally Removed           635 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pcie-dma/pcie_core
 pcie_core.v               Locally Removed           635 
 pcie-core.awb             Locally Removed           635 
 pcie_core.ngc             Locally Removed           635 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pcie-dma
 pci-express-dma.awb       Locally Removed           635 
 pcie_wrapper.bsv          Locally Removed           635 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 pci-express-driver-header/ Locally Removed           635 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-driver-header
 pchnl_if.h                Locally Removed           635 
 pchnl_if.awb              Locally Removed           635 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 pci-express-bluenoc/      Locally Removed           635 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-bluenoc
 pcie-import.bsv           Locally Removed           635 
 pcie_endpoint_old.v       Locally Removed           635 
 PioFifo.bsv               Locally Removed           635 
 pcie_bury.v               Locally Removed           635 
 Bridge.bsv                Locally Removed           635 
 pcie_endpoint.ngc         Locally Removed           635 
 pcie-wrapper.bsv          Locally Removed           635 
 server.cpp                Locally Removed           635 
 LLVirtex5PCIE.bsv         Locally Removed           635 
 pcie-device.ucf           Locally Removed           635 
 endpoint_blk_plus_v1_14.v Locally Removed           635 
 pcie-device.xcf           Locally Removed           635 
 server.h                  Locally Removed           635 
 pcie-device.cpp           Locally Removed           635 
 pcie-device.h             Locally Removed           635 
 old-pcie-device.ucf       Locally Removed           635 
 pcie_endpoint.xco         Locally Removed           635 
 pcie_bury.bsv             Locally Removed           635 
 bluenoc-core/             Locally Removed           635 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-bluenoc/bluenoc-core
 pcie_reset_delay_v6.v     Locally Removed           635 
 gtx_drp_chanalign_fix_3752_v6.v Locally Removed           635 
 bluenoc-top.bsv           Locally Removed           635 
 gtx_wrapper_v6.v          Locally Removed           635 
 pcie_gtx_v6.v             Locally Removed           635 
 pcie_bram_top_v6.v        Locally Removed           635 
 pcie_brams_v6.v           Locally Removed           635 
 pcie_endpoint.v           Locally Removed           635 
 pcie_bury.v               Locally Removed           635 
 bluenoc-core.awb          Locally Removed           635 
 ByteBuffer.bsv            Locally Removed           635 
 pcie_pipe_misc_v6.v       Locally Removed           635 
 MsgFormat.bsv             Locally Removed           635 
 v6_pcie_v1_6.v            Locally Removed           635 
 xilinx_v6_pcie_wrapper.v  Locally Removed           635 
 PCIEtoBNoCBridge.bsv      Locally Removed           635 
 pcie_2_0_v6.v             Locally Removed           635 
 pcie_bram_v6.v            Locally Removed           635 
 gtx_tx_sync_rate_v6.v     Locally Removed           635 
 ByteCompactor.bsv         Locally Removed           635 
 pcie_clocking_v6.v        Locally Removed           635 
 pcie_bury.bsv             Locally Removed           635 
 pcie_pipe_lane_v6.v       Locally Removed           635 
 pcie_upconfig_fix_3451_v6.v Locally Removed           635 
 pcie_pipe_v6.v            Locally Removed           635 
 gtx_rx_valid_filter_v6.v  Locally Removed           635 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-bluenoc
 pcie-bluenoc.awb          Locally Removed           635 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 pci-express-new/          Locally Removed           635 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-new
 h2f_data_fifo.ngc         Locally Removed           635 
 f2h_data_fifo.ngc         Locally Removed           635 
 pcieblkplus.ngc           Locally Removed           635 
 pci-express-device.bsv    Locally Removed           635 
 csr_host_ctrl.vhd         Locally Removed           635 
 csr_fpga_ctrl.vhd         Locally Removed           635 
 csr_ctrl.vhd              Locally Removed           635 
 rst_controller.vhd        Locally Removed           635 
 pci-express-vhdl-import.bsv Locally Removed           635 
 CSR_BRAM.ngc              Locally Removed           635 
 pci-express-device-mmap.awb Locally Removed           635 
 intr_controller.vhd       Locally Removed           635 
 pci-express-c-import-mmap.cpp Locally Removed           635 
 pcie_bar0.vhd             Locally Removed           635 
 dma_ctrl.vhd              Locally Removed           635 
 pci-express-c-import-mmap.h Locally Removed           635 
 pcie_rx_wrapper.vhd       Locally Removed           635 
 channel_top.vhd           Locally Removed           635 
 pcie_tx_wrapper.vhd       Locally Removed           635 
 channel_ctrl.vhd          Locally Removed           635 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 pci-express-bluespec/     Locally Removed           635 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-bluespec
 pcie-import.bsv           Locally Removed           635 
 pcie_endpoint.v           Locally Removed           635 
 PioFifo.bsv               Locally Removed           635 
 pcie_bury.v               Locally Removed           635 
 Bridge.bsv                Locally Removed           635 
 pcie_endpoint.ngc         Locally Removed           635 
 pcie-wrapper.bsv          Locally Removed           635 
 server.cpp                Locally Removed           635 
 pcie-bluespec.awb         Locally Removed           635 
 LLVirtex5PCIE.bsv         Locally Removed           635 
 pcie-device.ucf           Locally Removed           635 
 endpoint_blk_plus_v1_14.v Locally Removed           635 
 pcie-device.xcf           Locally Removed           635 
 server.h                  Locally Removed           635 
 pcie-device.cpp           Locally Removed           635 
 pcie-device.h             Locally Removed           635 
 pcie_endpoint.xco         Locally Removed           635 
 pcie_bury.bsv             Locally Removed           635 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 pci-express-bluenoc4/     Locally Removed           635 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-bluenoc4
 pcie-import.bsv           Locally Removed           635 
 pcie_endpoint_old.v       Locally Removed           635 
 PioFifo.bsv               Locally Removed           635 
 pcie_bury.v               Locally Removed           635 
 Bridge.bsv                Locally Removed           635 
 pcie_endpoint.ngc         Locally Removed           635 
 pcie-wrapper.bsv          Locally Removed           635 
 server.cpp                Locally Removed           635 
 LLVirtex5PCIE.bsv         Locally Removed           635 
 pcie-device.ucf           Locally Removed           635 
 endpoint_blk_plus_v1_14.v Locally Removed           635 
 pcie-device.xcf           Locally Removed           635 
 server.h                  Locally Removed           635 
 pcie-device.cpp           Locally Removed           635 
 pcie-device.h             Locally Removed           635 
 old-pcie-device.ucf       Locally Removed           635 
 pcie_endpoint.xco         Locally Removed           635 
 pcie_bury.bsv             Locally Removed           635 
 bluenoc-core/             Locally Removed           635 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-bluenoc4/bluenoc-core
 pcie_reset_delay_v6.v     Locally Removed           635 
 gtx_drp_chanalign_fix_3752_v6.v Locally Removed           635 
 bluenoc-top.bsv           Locally Removed           635 
 gtx_wrapper_v6.v          Locally Removed           635 
 pcie_gtx_v6.v             Locally Removed           635 
 pcie_bram_top_v6.v        Locally Removed           635 
 pcie_brams_v6.v           Locally Removed           635 
 pcie_endpoint.v           Locally Removed           635 
 pcie_bury.v               Locally Removed           635 
 bluenoc-core.awb          Locally Removed           635 
 ByteBuffer.bsv            Locally Removed           635 
 pcie_pipe_misc_v6.v       Locally Removed           635 
 MsgFormat.bsv             Locally Removed           635 
 v6_pcie_v1_6.v            Locally Removed           635 
 xilinx_v6_pcie_wrapper.v  Locally Removed           635 
 PCIEtoBNoCBridge.bsv      Locally Removed           635 
 pcie_2_0_v6.v             Locally Removed           635 
 pcie_bram_v6.v            Locally Removed           635 
 gtx_tx_sync_rate_v6.v     Locally Removed           635 
 ByteCompactor.bsv         Locally Removed           635 
 pcie_clocking_v6.v        Locally Removed           635 
 pcie_bury.bsv             Locally Removed           635 
 pcie_pipe_lane_v6.v       Locally Removed           635 
 pcie_upconfig_fix_3451_v6.v Locally Removed           635 
 pcie_pipe_v6.v            Locally Removed           635 
 gtx_rx_valid_filter_v6.v  Locally Removed           635 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express-bluenoc4
 pcie-bluenoc.awb          Locally Removed           635 

- Remove old code
- Move all PCIe drivers into one tree.

----------
mcadler     Date: Mon Oct 29 10:03:39 EDT 2012  CSN: CSN-leap-platforms-637
                  Mon Oct 29 14:03:39 UTC 2012


Directory modules/bluespec/common/fpgaenv/fpga-components
 hardware-fpga-components-virtex6-generic.awb Locally Modified          636 
 differential-clock-import.bsv Locally Added               - 
 differential-import-virtex6.bsv Locally Removed           636 

Directory modules/bluespec/common/fpgaenv/physical-platform/ml605/pcie-dma
 ml605-v6-pcie-dma.bsv     Locally Modified          636 
 ml605-v6-pcie-dma.ucf     Locally Modified          636 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr3-sdram
 ddr3-sdram-device.bsv     Locally Modified          636 
 ddr3-sdram.ucf            Locally Modified          636 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express/pcie-bluenoc
 pcie-bluenoc.bsv          Locally Modified          636 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express/pcie-bluenoc-virtex6
 pcie-virtex6.ucf          Locally Modified          636 
 pcie-virtex6.xcf          Locally Modified          636 
 pcie-virtex6.bsv          Locally Modified          636 

- Clean up naming of clocks

- PCIe:
  - Add timing specification for clock crossings that Xilinx tools thought
    required no time.
  - Clean up UCF file

- DDR
  - Clean up UCF file (move non-DDR constraints elsewhere).
  - Update sync FIFO constraints to more recent versions.
  - Enable area group, which seems to work now.

----------
mcadler     Date: Mon Oct 29 10:25:11 EDT 2012  CSN: CSN-leap-platforms-638
                  Mon Oct 29 14:25:11 UTC 2012


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 ddr/                      Locally Removed           637 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr
 ddr-sdram-device.awb      Locally Removed           637 
 ddr-sdram-verilog-import.bsv Locally Removed           637 
 NPICommon.bsv             Locally Removed           637 
 NPIMaster.bsv             Locally Removed           637 
 ddr-sdram-device-synplify.awb Locally Removed           637 
 ddr_sdram_xilinx.v        Locally Removed           637 
 clock_generator_ddr_wrapper.ngc Locally Removed           637 
 proc_sys_reset_ddr_wrapper.ngc Locally Removed           637 
 ddr_sdram_wrapper.v       Locally Removed           637 
 ddr_sdram.v               Locally Removed           637 
 ddr-sdram-device.bsv      Locally Removed           637 
 ddr_sdram_wrapper.ngc     Locally Removed           637 
 ddr_sdram.sdc             Locally Removed           637 
 ddr_sdram_synplify.ucf    Locally Removed           637 
 ddr_sdram.ucf             Locally Removed           637 
 ddr_sdram_tig_synplify.ucf Locally Removed           637 
 ddr_sdram_tig.ucf         Locally Removed           637 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 ddr-sdram/                Locally Added               0 

Begin reorganization of DDR SDRAM drivers into a rational tree.  First move
the old XUPv2 code out of the way.

----------
mcadler     Date: Mon Oct 29 18:43:05 EDT 2012  CSN: CSN-leap-platforms-639
                  Mon Oct 29 22:43:05 UTC 2012


Directory modules/bluespec/common/fpgaenv/physical-platform/ml605/pcie-dma
 ml605-v6-pcie-dma.awb     Locally Modified          638 
 ml605-v6-pcie-dma.bsv     Locally Modified          638 

Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/pcie-enabled
 htg-v5-pcie-enabled.awb   Locally Modified          638 
 htg-v5-pcie-enabled.bsv   Locally Modified          638 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 ddr2-sdram/               Locally Removed           638 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr2-sdram
 ddr2_phy_io.vhd           Locally Removed           638 
 ddr2_phy_ctl_io.vhd       Locally Removed           638 
 ddr2-sdram-device.bsv     Locally Removed           638 
 ddr2_usr_top.vhd          Locally Removed           638 
 ddr2_sdram.sdc            Locally Removed           638 
 ddr2_top.vhd              Locally Removed           638 
 ddr2_ctrl.vhd             Locally Removed           638 
 ddr2_sdram.vhd            Locally Removed           638 
 ddr2_phy_write.vhd        Locally Removed           638 
 ddr2-pll.bsv              Locally Removed           638 
 ddr2_infrastructure.vhd   Locally Removed           638 
 ddr2_usr_wr.vhd           Locally Removed           638 
 ddr2_phy_top.vhd          Locally Removed           638 
 ddr2-sdram-device-synplify.awb Locally Removed           638 
 ddr2-sdram-sync-tig-synplify.ucf Locally Removed           638 
 ddr2-pll.v                Locally Removed           638 
 ddr2_phy_calib.vhd        Locally Removed           638 
 ddr2_idelay_ctrl.vhd      Locally Removed           638 
 ddr2_usr_rd.vhd           Locally Removed           638 
 ddr2-sdram-vhdl-import.bsv Locally Removed           638 
 ddr2_phy_dqs_iob.vhd      Locally Removed           638 
 ddr2_sdram.ucf            Locally Removed           638 
 ddr2_usr_addr_fifo.vhd    Locally Removed           638 
 ddr2_phy_dm_iob.vhd       Locally Removed           638 
 ddr2-sdram-device.awb     Locally Removed           638 
 ddr2-sdram-sync-tig.ucf   Locally Removed           638 
 ddr2_chipscope.vhd        Locally Removed           638 
 ddr2_phy_dq_iob.vhd       Locally Removed           638 
 ddr2_sdram-synplify.ucf   Locally Removed           638 
 ddr2_mem_if_top.vhd       Locally Removed           638 
 ddr2_phy_init.vhd         Locally Removed           638 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 ddr3-sdram/               Locally Removed           638 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr3-sdram
 ddr3-sdram.xcf            Locally Removed           638 
 ui_wr_data.v              Locally Removed           638 
 infrastructure.v          Locally Removed           638 
 bank_compare.v            Locally Removed           638 
 ecc_gen.v                 Locally Removed           638 
 bank_common.v             Locally Removed           638 
 phy_pd.v                  Locally Removed           638 
 rank_mach.v               Locally Removed           638 
 ecc_buf.v                 Locally Removed           638 
 rd_bitslip.v              Locally Removed           638 
 phy_dly_ctrl.v            Locally Removed           638 
 arb_mux.v                 Locally Removed           638 
 mc.v                      Locally Removed           638 
 ui_top.v                  Locally Removed           638 
 memc_ui_top.v             Locally Removed           638 
 mem_intfc.v               Locally Removed           638 
 ddr3-sdram-device.awb     Locally Removed           638 
 ddr3-sdram-verilog-import.bsv Locally Removed           638 
 arb_select.v              Locally Removed           638 
 phy_rdlvl.v               Locally Removed           638 
 rank_common.v             Locally Removed           638 
 phy_rdclk_gen.v           Locally Removed           638 
 phy_dm_iob.v              Locally Removed           638 
 phy_write.v               Locally Removed           638 
 ecc_dec_fix.v             Locally Removed           638 
 bank_state.v              Locally Removed           638 
 phy_rddata_sync.v         Locally Removed           638 
 example_top.v             Locally Removed           638 
 bank_cntrl.v              Locally Removed           638 
 phy_dq_iob.v              Locally Removed           638 
 phy_ocb_mon_top.v         Locally Removed           638 
 clk_ibuf.v                Locally Removed           638 
 bank_queue.v              Locally Removed           638 
 phy_data_io.v             Locally Removed           638 
 ddr3-sdram-device.bsv     Locally Removed           638 
 phy_top.v                 Locally Removed           638 
 phy_init.v                Locally Removed           638 
 phy_wrlvl.v               Locally Removed           638 
 phy_control_io.v          Locally Removed           638 
 ddr3_v3_5.v               Locally Removed           638 
 arb_row_col.v             Locally Removed           638 
 phy_read.v                Locally Removed           638 
 ui_rd_data.v              Locally Removed           638 
 ddr3_wrapper.v            Locally Removed           638 
 dbg_display_driver.v      Locally Removed           638 
 phy_ocb_mon.v             Locally Removed           638 
 rank_cntrl.v              Locally Removed           638 
 ecc_merge_enc.v           Locally Removed           638 
 xilinx_ddr3_sodimm.v      Locally Removed           638 
 phy_dqs_iob.v             Locally Removed           638 
 ui_cmd.v                  Locally Removed           638 
 phy_clock_io.v            Locally Removed           638 
 bank_mach.v               Locally Removed           638 
 ddr2_ddr3_chipscope.v     Locally Removed           638 
 round_robin_arb.v         Locally Removed           638 
 col_mach.v                Locally Removed           638 
 phy_pd_top.v              Locally Removed           638 
 phy_ck_iob.v              Locally Removed           638 
 phy_rdctrl_sync.v         Locally Removed           638 
 ddr3-sdram.ucf            Locally Removed           638 
 circ_buffer.v             Locally Removed           638 
 iodelay_ctrl.v            Locally Removed           638 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram
 ddr-sdram-xilinx/         Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram/ddr-sdram-xilinx
 ddr-sdram-xilinx.bsv      Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram/ddr-sdram-xilinx/ddr3-sdram-ml605
 ddr3-sdram-device.bsv     Locally Removed           638 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram/ddr-sdram-xilinx
 ddr-sdram-xilinx.bsh      Locally Added               0 
 ddr-sdram-xilinx.ucf      Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram/ddr-sdram-xilinx/ddr2-sdram-v5-htg
 ddr2_sdram.ucf            Locally Removed           638 
 ddr2-sdram.ucf            Locally Added               - 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram/ddr-sdram-xilinx
 ddr-sdram-xilinx.h        Locally Added               0 
 README                    Locally Added               0 
 ddr-sdram-xilinx.awb      Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram/sdram-xupv2
 ddr-sdram-device.awb      Locally Modified          638 
 ddr-sdram-device-synplify.awb Locally Modified          638 

Reorganize the DDR SDRAM drivers into a shared component and device-specific
components.  DDR2 and DDR3 driver interfaces are nearly identical, making
it possible to share a controller.

Wires and parameters flow from the device-specific code through the device-
independent wrapper.  The wrapper mainly manages clock domain crossing and
DDR request timing requirements.

----------
mcadler     Date: Mon Oct 29 20:25:57 EDT 2012  CSN: CSN-leap-platforms-640
                  Tue Oct 30 00:25:57 UTC 2012


Directory modules/bluespec/common/fpgaenv/physical-platform/htg_virtex5/jtag
 htg-v5-jtag.awb           Locally Modified          639 
 htg-v5-jtag.bsv           Locally Modified          639 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express
 pcie-xupv5/               Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express/pcie-xupv5
 pcie-import.bsv           Locally Added               0 
 pcie_endpoint.v           Locally Added               0 
 PioFifo.bsv               Locally Added               0 
 pcie_bury.v               Locally Added               0 
 Bridge.bsv                Locally Added               0 
 pcie_endpoint.ngc         Locally Added               0 
 pcie-wrapper.bsv          Locally Added               0 
 server.cpp                Locally Added               0 
 pcie-bluespec.awb         Locally Added               0 
 LLVirtex5PCIE.bsv         Locally Added               0 
 pcie-device.ucf           Locally Added               0 
 endpoint_blk_plus_v1_14.v Locally Added               0 
 pcie-device.xcf           Locally Added               0 
 server.h                  Locally Added               0 
 README                    Locally Added               0 
 pcie-device.cpp           Locally Added               0 
 pcie-device.h             Locally Added               0 
 pcie_endpoint.xco         Locally Added               0 
 pcie_bury.bsv             Locally Added               0 

Restore the XUPv5 PCIe driver I overzealously deleted.

----------
mcadler     Date: Thu Nov  1 08:05:09 EDT 2012  CSN: CSN-leap-platforms-641
                  Thu Nov  1 12:05:09 UTC 2012


Directory modules/bluespec/common/fpgaenv/physical-platform/simulation
 sim-physical-platform.awb Locally Modified          640 
 sim-physical-platform.bsv Locally Modified          640 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram/ddr-sdram-xilinx
 ddr-sdram-xilinx.bsv      Locally Modified          640 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram/ddr-sdram-xilinx/ddr3-sdram-ml605
 ddr3-sdram-device.awb     Locally Modified          640 
 ddr3-sdram-verilog-import.bsv Locally Modified          640 
 ddr3-sdram.ucf            Locally Modified          640 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram/ddr-sdram-xilinx
 ddr-sdram-xilinx.ucf      Locally Modified          640 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram/ddr-sdram-xilinx/ddr2-sdram-v5-htg
 ddr2-sdram-device.bsv     Locally Modified          640 
 ddr2-sdram-vhdl-import.bsv Locally Modified          640 
 ddr2-sdram-device.awb     Locally Modified          640 
 ddr2-sdram.ucf            Locally Modified          640 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram
 ddr-sdram-bram/           Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram/ddr-sdram-bram
 ddr-sdram-bram.awb        Locally Added               0 
 ddr-sdram-bram.bsv        Locally Added               0 
 README                    Locally Added               0 

- Clean up naming of DRAM AWB configuration parameters so I actually know what
  they mean without rereading the source.

- Add a DDR RAM emulator using BRAM for use in Bluesim or on platforms lacking
  external memory.  This makes it possible to debug the local memory code
  in Bluesim.  It also provides a consistent physical platform, making parts
  of the virtual platform easier to write.  Now used by default in Bluesim
  platforms.

- Add support for multiple memory banks to generic Xilinx DRAM wrapper.

----------
mcadler     Date: Thu Nov  1 16:46:37 EDT 2012  CSN: CSN-leap-platforms-642
                  Thu Nov  1 20:46:37 UTC 2012


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram/ddr-sdram-bram
 ddr-sdram-bram.awb        Locally Modified          641 
 ddr-sdram-bram.bsv        Locally Modified          641 

Add optional latency to read responses in simulated DRAM.  This may be useful
for emulating DDR SDRAM latencies in Bluesim.  The latency is 0 by default.

----------
mcadler     Date: Mon Nov  5 19:50:38 EST 2012  CSN: CSN-leap-platforms-643
                  Tue Nov  6 00:50:38 UTC 2012


Directory modules/bluespec/common/fpgaenv/physical-platform/ml605/pcie-dma
 ml605-v6-pcie-dma.bsv     Locally Modified          642 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram/ddr-sdram-xilinx
 ddr-sdram-xilinx.bsv      Locally Modified          642 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram/ddr-sdram-bram
 ddr-sdram-bram.bsv        Locally Modified          642 

- Reset the model on ML605 when PCIe reset is asserted on the host driver's
  ioctl interface.

- Add some DDR definitions used by local memory.

- BRAM DDR emulator now handles DDR word size the same as the beat size.

----------
mcadler     Date: Thu Nov  8 07:10:41 EST 2012  CSN: CSN-leap-platforms-644
                  Thu Nov  8 12:10:41 UTC 2012


Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/little-endian
 umf-little-endian.h       Locally Modified          643 

Directory modules/bluespec/common/fpgaenv/physical-platform/ml605/pcie-dma
 ml605-v6-pcie-dma.bsv     Locally Modified          643 
 ml605-v6-pcie-dma.ucf     Locally Modified          643 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express/pcie-bluenoc
 pcie-bluenoc.cpp          Locally Modified          643 
 pcie-bluenoc.h            Locally Modified          643 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express/pcie-bluenoc-virtex6
 pcie-virtex6.awb          Locally Modified          643 
 pcie-virtex6.xcf          Locally Removed           643 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram/ddr-sdram-xilinx/ddr3-sdram-ml605
 ddr3-sdram.ucf            Locally Modified          643 

- Add a multi-chunk copy loop to UMF for host->FPGA messages.
- BlueNoC PCIe software interface is now basic read/write.
- Updates for ML605 timing:
  - Add a DDR TIG
  - Remove unnecessary xcf constraints for PCIe

----------
mcadler     Date: Thu Nov  8 20:14:16 EST 2012  CSN: CSN-leap-platforms-645
                  Fri Nov  9 01:14:16 UTC 2012


Directory modules/bluespec/common/fpgaenv/virtual-platform/umf/little-endian
 umf-little-endian.h       Locally Modified          644 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express/pcie-bluenoc
 pcie-bluenoc-ifc.awb      Locally Modified          644 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/unix-pipe
 unix-pipe-device.bsv      Locally Modified          644 
 unix-pipe-device-bdpi.c   Locally Modified          644 
 unix-pipe-device-bdpi.h   Locally Modified          644 

Support UMF_CHUNK sizes up to 16 bytes.  Make the default ML605 BlueNoC 16
byes per beat.


----------
mcadler     Date: Sun Nov 11 13:21:20 EST 2012  CSN: CSN-leap-platforms-646
                  Sun Nov 11 18:21:20 UTC 2012


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express/pcie-bluenoc
 pcie-bluenoc.cpp          Locally Modified          645 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express/pcie-bluenoc-virtex6
 pcie-virtex6.bsv          Locally Modified          645 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks/differential
 differential-clocks-device.bsv Locally Modified          645 

- Put back deactivate/reactivate in addition to soft reset.  Deactivating seems to do a
  better job of clearing old I/O state.

- No longer need to protect read() with poll() because the FPGA-side channel code
  is now better about sending only complete packets.

- Tweak reset timing.

----------
mcadler     Date: Mon Nov 12 15:32:31 EST 2012  CSN: CSN-leap-platforms-647
                  Mon Nov 12 20:32:31 UTC 2012


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram/ddr-sdram-xilinx
 ddr-sdram-xilinx.bsv      Locally Modified          646 
 ddr-sdram-xilinx.ucf      Locally Modified          646 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram/ddr-sdram-xilinx/ddr2-sdram-v5-htg
 ddr2-sdram-device.bsv     Locally Modified          646 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram/ddr-sdram-bram
 ddr-sdram-bram.bsv        Locally Modified          646 

- Reset was not synchronized between DRAM and model domains, allowing the
  model to make requests when the DRAM was in reset.  In addition, the DRAM
  domain was reset only after programming and not by a soft reset.  Fixed
  both these problems.

- Correct the driver's assumption that DRAM bursts are always 2 beats.

- Add debug scan support for the DRAM driver.  Platform drivers can't use
  soft connections.  Instead, scan state is exported as a list that is
  ultimately connected to a debug scan node by the local memory virtual
  device.

----------
mcadler     Date: Wed Nov 14 21:06:30 EST 2012  CSN: CSN-leap-platforms-648
                  Thu Nov 15 02:06:30 UTC 2012


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express/pcie-bluenoc-virtex6
 pcie-virtex6.ucf          Locally Modified          647 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram/ddr-sdram-xilinx/ddr3-sdram-ml605
 ddr3-sdram.ucf            Locally Modified          647 

Improved area groups.  I don't know who picked the previous ones, but they were
strange.  DDR3 now sits directly over the memory pins.  The PCIe driver and
FIFOs now sit next to the PCIe hard block.  BlueNoC's bridge is next to the PCIe
driver.

----------
mcadler     Date: Fri Nov 16 13:46:47 EST 2012  CSN: CSN-leap-platforms-649
                  Fri Nov 16 18:46:47 UTC 2012


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express/pcie-bluenoc-virtex6
 bluenoc-top.bsv           Locally Removed           648 
 pcie-virtex6.awb          Locally Modified          648 
 pcie-virtex6.ucf          Locally Modified          648 
 pcie-virtex6-include.v    Locally Added               0 
 pcie-virtex6.bsv          Locally Modified          648 

Force synthesis of the PCIe driver and BlueNoC bridge as separate boundaries
using (* synthesize *).  This guarantees that the entire module is part of
the designated area group.  Without the boundary some compiler-generated
temporary names wound up not matching the INST pattern and were forced outside
the area group, leading to timing problems.

The unfortunate hack here is that pcie-virtex6-include.v is needed to include
the generated Verilog.  Ideally, we would have syntax in AWB or automatic
detection of generated Verilog files as part of the build process.

----------
mcadler     Date: Sat Nov 17 09:25:06 EST 2012  CSN: CSN-leap-platforms-650
                  Sat Nov 17 14:25:06 UTC 2012


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram/ddr-sdram-xilinx/ddr3-sdram-ml605
 ddr3-sdram-device.awb     Locally Modified          649 

Doh!  ML605 memory was configured for 1GB but the board only has 512MB.  The
high part aliased the low half.

----------
mcadler     Date: Mon Nov 19 15:11:25 EST 2012  CSN: CSN-leap-platforms-651
                  Mon Nov 19 20:11:25 UTC 2012


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram/ddr-sdram-xilinx
 ddr-sdram-xilinx.bsv      Locally Modified          650 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram/ddr-sdram-xilinx/ddr3-sdram-ml605
 ui_wr_data.v              Locally Modified          650 
 infrastructure.v          Locally Modified          650 
 bank_compare.v            Locally Modified          650 
 ecc_gen.v                 Locally Modified          650 
 bank_common.v             Locally Modified          650 
 phy_pd.v                  Locally Modified          650 
 rank_mach.v               Locally Modified          650 
 ecc_buf.v                 Locally Modified          650 
 rd_bitslip.v              Locally Modified          650 
 phy_dly_ctrl.v            Locally Modified          650 
 arb_mux.v                 Locally Modified          650 
 mc.v                      Locally Modified          650 
 ui_top.v                  Locally Modified          650 
 memc_ui_top.v             Locally Modified          650 
 ddr3-sdram-device.awb     Locally Modified          650 
 mem_intfc.v               Locally Modified          650 
 ddr3-sdram-verilog-import.bsv Locally Modified          650 
 rank_common.v             Locally Modified          650 
 phy_rdlvl.v               Locally Modified          650 
 arb_select.v              Locally Modified          650 
 phy_rdclk_gen.v           Locally Modified          650 
 phy_dm_iob.v              Locally Modified          650 
 phy_write.v               Locally Modified          650 
 phy_rddata_sync.v         Locally Modified          650 
 bank_state.v              Locally Modified          650 
 ecc_dec_fix.v             Locally Modified          650 
 phy_dq_iob.v              Locally Modified          650 
 bank_cntrl.v              Locally Modified          650 
 example_top.v             Locally Modified          650 
 phy_ocb_mon_top.v         Locally Removed           650 
 clk_ibuf.v                Locally Modified          650 
 bank_queue.v              Locally Modified          650 
 phy_data_io.v             Locally Modified          650 
 phy_top.v                 Locally Modified          650 
 phy_wrlvl.v               Locally Modified          650 
 phy_control_io.v          Locally Modified          650 
 ddr3_v3_5.v               Locally Modified          650 
 arb_row_col.v             Locally Modified          650 
 phy_read.v                Locally Modified          650 
 ui_rd_data.v              Locally Modified          650 
 ddr3_wrapper.v            Locally Modified          650 
 dbg_display_driver.v      Locally Removed           650 
 phy_ocb_mon.v             Locally Removed           650 
 rank_cntrl.v              Locally Modified          650 
 ecc_merge_enc.v           Locally Modified          650 
 xilinx_ddr3_sodimm.v      Locally Removed           650 
 phy_dqs_iob.v             Locally Modified          650 
 ui_cmd.v                  Locally Modified          650 
 phy_clock_io.v            Locally Modified          650 
 bank_mach.v               Locally Modified          650 
 ddr2_ddr3_chipscope.v     Locally Modified          650 
 round_robin_arb.v         Locally Modified          650 
 col_mach.v                Locally Modified          650 
 phy_pd_top.v              Locally Modified          650 
 phy_ck_iob.v              Locally Modified          650 
 phy_rdctrl_sync.v         Locally Modified          650 
 ddr3-sdram.ucf            Locally Modified          650 
 iodelay_ctrl.v            Locally Modified          650 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram/ddr-sdram-xilinx
 ddr-sdram-xilinx.awb      Locally Modified          650 

Somewhat successful effort to get SDRAM working on all ML605 platforms.  It
appears we are suffering from http://www.xilinx.com/support/answers/39767.htm
as some boards sometimes fail to initialize SDRAM, signalling dbg_wrlvl_err.

Changes:
  - Set ddr_reset_n I/O standard to LVCMOS15 per Xilinx AR# 36078.
  - Restore BUFG on clock in DDR3 controller (iodelay_ctrl.v).
  - Remove the parameters in ddr3_wrapper that skipped DDR3 calibration.
    The Xilinx documentation says these should only be set for simulation,
    but is ambiguous on what happens when the parameters are set on hardware.
  - Update to code generated by MIG from ISE 14.3.  I didn't see any significant
    changes, but it didn't hurt.

  - Export calibration debug state as debug scan records when DEBUG_DDR3 AWB
    parameter is non-zero.

----------
mcadler     Date: Tue Nov 20 08:09:17 EST 2012  CSN: CSN-leap-platforms-652
                  Tue Nov 20 13:09:17 UTC 2012


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express/pcie-bluenoc-virtex6
 pcie-virtex6.awb          Locally Modified          651 
 pcie-virtex6-include.v    Locally Removed           651 

Use %generated for modules that are synthesized.

----------
mcadler     Date: Wed Nov 21 18:22:56 EST 2012  CSN: CSN-leap-platforms-653
                  Wed Nov 21 23:22:56 UTC 2012


Directory drivers/linux/platforms/ml605-pcie/driver
 bluenoc.c                 Locally Modified          652 

Edge condition in BlueNoC driver caused 0-size region to be sent to DMA engine
instead of a full page when the transfer was more than one page and the
last page ended on a page boundary.  The result was some combination of
data corruption and crashes.

----------
mcadler     Date: Sat Nov 24 15:43:21 EST 2012  CSN: CSN-leap-platforms-654
                  Sat Nov 24 20:43:21 UTC 2012


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express/pcie-bluenoc
 pcie-bluenoc.cpp          Locally Modified          653 
 pcie-bluenoc.h            Locally Modified          653 

Add option to Probe() to block until a message is available.

----------
mcadler     Date: Fri Dec  7 16:09:53 EST 2012  CSN: CSN-leap-platforms-655
                  Fri Dec  7 21:09:53 UTC 2012


Directory modules/bluespec/common/fpgaenv/physical-platform/ml605/pcie-dma
 ml605-v6-pcie-dma.h       Locally Removed           654 
 ml605-v6-pcie-dma.awb     Locally Removed           654 
 ml605-v6-pcie-dma.bsv     Locally Removed           654 
 xilinx.ut                 Locally Removed           654 
 xilinx.sdc                Locally Removed           654 
 ml605-v6-pcie-dma.ucf     Locally Removed           654 
 xilinx.sdf                Locally Removed           654 
 xilinx.xst                Locally Removed           654 
 ml605-v6-pcie-dma.cpp     Locally Removed           654 

Directory modules/bluespec/common/fpgaenv/physical-platform/simulation
 sim-physical-platform.bsv Locally Modified          654 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram/ddr-sdram-bram
 ddr-sdram-bram.bsv        Locally Modified          654 

Directory modules/bluespec/common/fpgaenv/physical-platform
 pci-express-generic/      Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/pci-express-generic
 pcie-generic-platform.h   Locally Added               0 
 pcie-generic-platform.awb Locally Added               0 
 pcie-generic-platform.bsv Locally Added               0 
 config/                   Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/pci-express-generic/config
 ml605/                    Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/pci-express-generic/config/ml605
 ml605-v6-pcie-dma.awb     Locally Added               - 
 ml605-v6-pcie-dma.ucf     Locally Added               - 
 ml605-v6-pcie-dma.xst     Locally Added               - 

Directory modules/bluespec/common/fpgaenv/physical-platform/pci-express-generic
 pcie-generic-platform.bsh Locally Added               0 
 pcie-generic-platform.cpp Locally Added               0 

Prepare to share standard PCIe board physical platforms instead of replicating
the board wrapper.  So far this is just a restructuring of the ML605 code.

----------
mcadler     Date: Mon Dec 10 22:00:30 EST 2012  CSN: CSN-leap-platforms-657
                  Tue Dec 11 03:00:30 UTC 2012


Directory modules/bluespec/common/fpgaenv/fpga-components
 user-clock-xilinx-virtex7.v Locally Added               0 
 hardware-fpga-components-virtex7.awb Locally Added               0 
 user-clock-pll-virtex7.bsv Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express/pcie-bluenoc
 pcie-bluenoc-tests.cpp    Locally Modified          656 
 pcie-bluenoc.cpp          Locally Modified          656 
 pcie-bluenoc-tests.h      Locally Modified          656 
 pcie-bluenoc.bsv          Locally Modified          656 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express/pcie-bluenoc-virtex6
 pcie-virtex6.ucf          Locally Modified          656 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express
 pcie-bluenoc-virtex7/     Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express/pcie-bluenoc-virtex7
 v7_pcie_v1_7_pipe_clock.v Locally Added               0 
 v7_pcie_v1_7_gtp_pipe_reset.v Locally Added               0 
 v7_pcie_v1_7_gt_wrapper.v Locally Added               0 
 v7_pcie_v1_7_axi_basic_tx_thrtl_ctl.v Locally Added               0 
 v7_pcie_v1_7_qpll_drp.v   Locally Added               0 
 v7_pcie_v1_7_axi_basic_rx_null_gen.v Locally Added               0 
 xilinx_v7_pcie_wrapper.v  Locally Added               0 
 v7_pcie_v1_7_axi_basic_rx_pipeline.v Locally Added               0 
 v7_pcie_v1_7_pcie_bram_top_7x.v Locally Added               0 
 v7_pcie_v1_7_pcie_pipe_pipeline.v Locally Added               0 
 v7_pcie_v1_7_axi_basic_tx_pipeline.v Locally Added               0 
 pcie-virtex7.awb          Locally Added               0 
 v7_pcie_v1_7_rxeq_scan.v  Locally Added               0 
 pcie-virtex7.ucf          Locally Added               0 
 v7_pcie_v1_7_pipe_sync.v  Locally Added               0 
 v7_pcie_v1_7_axi_basic_rx.v Locally Added               0 
 v7_pcie_v1_7_gt_top.v     Locally Added               0 
 v7_pcie_v1_7_pcie_pipe_lane.v Locally Added               0 
 v7_pcie_v1_7_axi_basic_tx.v Locally Added               0 
 v7_pcie_v1_7_pcie_bram_7x.v Locally Added               0 
 v7_pcie_v1_7_pcie_top.v   Locally Added               0 
 v7_pcie_v1_7_pipe_drp.v   Locally Added               0 
 pcie-virtex7.bsv          Locally Added               0 
 v7_pcie_v1_7_axi_basic_top.v Locally Added               0 
 v7_pcie_v1_7_qpll_wrapper.v Locally Added               0 
 v7_pcie_v1_7_pcie_pipe_misc.v Locally Added               0 
 v7_pcie_v1_7_pipe_rate.v  Locally Added               0 
 v7_pcie_v1_7_qpll_reset.v Locally Added               0 
 v7_pcie_v1_7.v            Locally Added               0 
 v7_pcie_v1_7_pcie_brams_7x.v Locally Added               0 
 v7_pcie_v1_7_pipe_eq.v    Locally Added               0 
 v7_pcie_v1_7_gtp_pipe_rate.v Locally Added               0 
 v7_pcie_v1_7_gt_rx_valid_filter_7x.v Locally Added               0 
 xilinx_pcie_2_1_ep_7x_08_lane_gen1_xc7vx485t-ffg1761-2_VC707.ucf Locally Added               0 
 v7_pcie_v1_7_pipe_user.v  Locally Added               0 
 v7_pcie_v1_7_pipe_wrapper.v Locally Added               0 
 v7_pcie_v1_7_pcie_7x.v    Locally Added               0 
 v7_pcie_v1_7_pipe_reset.v Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/pci-express-generic/config
 vc707/                    Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/pci-express-generic/config/vc707
 vc707-v7-pcie-dma.awb     Locally Added               0 
 vc707-v7-pcie-dma.ucf     Locally Added               0 
 vc707-v7-pcie-dma.xst     Locally Added               0 

Directory drivers/linux/platforms/ml605-pcie/driver
 bluenoc.c                 Locally Modified          656 

- Virtex-7 PCIe (VC707) with channel I/O through BlueNoC.  (Requires very recent
  Bluespec compiler.)

- Virtex-7 clocks.

----------
mcadler     Date: Wed Dec 12 09:04:37 EST 2012  CSN: CSN-leap-platforms-658
                  Wed Dec 12 14:04:37 UTC 2012


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express/pcie-bluenoc-virtex7
 pcie-virtex7.ucf          Locally Modified          657 
 pcie-virtex7.bsv          Locally Modified          657 
 v7_pcie_v1_7.v            Locally Modified          657 

- The PCIe reset signal in the Xilinx-generated Verilog has high fan-out
  and the host machine crashes when reset timing is relaxed.  Reset was
  already buffered in the driver, but with fan-out the tools rarely found
  a timing solution at 250MHz.  Added explit fan-out during buffering,
  using multiple registers.

- Placement changes (UCF file):
  - Add area groups for PCIe driver and the BlueNoC buffers.
  - Move PCIe MMCM near the PCIe driver instead of the strange place Xilinx
    tools recommended.
  - Lock down PCIe driver BRAM locations per Xilinx coregen recommendation.
  - Set the IOSTANDARD for PCIe I/O pins to get rid of the warnings.  The
    VC707 master UCF file doesn't name the I/O standard for these pins,
    so I used the default (LVCMOS18).

----------
mcadler     Date: Fri Dec 14 15:37:03 EST 2012  CSN: CSN-leap-platforms-659
                  Fri Dec 14 20:37:03 UTC 2012


Directory modules/bluespec/common/fpgaenv/fpga-components
 reset-import.bsv          Locally Modified          658 
 clock-import.bsv          Locally Modified          658 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express/pcie-bluenoc
 pcie-bury.v               Locally Modified          658 
 pcie-bury.bsv             Locally Modified          658 
 pcie-bluenoc.bsv          Locally Modified          658 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express/pcie-bluenoc-virtex6
 pcie-virtex6.ucf          Locally Modified          658 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express/pcie-bluenoc-virtex7
 pcie-virtex7.ucf          Locally Modified          658 
 v7_pcie_v1_7.v            Locally Modified          658 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram/ddr-sdram-xilinx/ddr3-sdram-ml605
 ddr3-sdram.ucf            Locally Modified          658 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/clocks/differential
 differential-clocks-device.awb Locally Modified          658 
 differential-clocks-from-clocks.awb Locally Added               0 
 README                    Locally Added               0 
 differential-clocks-from-clocks.bsv Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/pci-express-generic
 pcie-generic-platform.awb Locally Modified          658 
 pcie-generic-platform.bsv Locally Modified          658 

Directory modules/bluespec/common/fpgaenv/physical-platform/pci-express-generic/config/ml605
 ml605-v6-pcie-dma.awb     Locally Modified          658 
 ml605-v6-pcie-dma.ucf     Locally Modified          658 

Directory modules/bluespec/common/fpgaenv/physical-platform/pci-express-generic/config/vc707
 vc707-v7-pcie-dma.awb     Locally Modified          658 
 vc707-v7-pcie-dma.ucf     Locally Modified          658 

- VC707 Xilinx PCIe driver system reset is buffered in a register that starts
  out of reset.  Changed to start in reset.  The one cycle at startup out of
  reset appears to have caused instability.  Let us hope this eliminates all
  the startup errors.  Why would they write it this way?

- PCIe generic platform (i.e. ML605 and VC707) now take advantage of the new
  LEAP ability to export Bluespec Clock and Reset types at the top level.
  We thus avoid the mess of importing clocks and can write always-enabled
  top-level interface methods referenced to top-level Bluespec clocks.

- Add new modules for importing clocks and resets using Put interfaces,
  where the put() method can be always enabled.  This avoids exposing
  spurious ready (RDY_) wires at the top level.  The modules also make
  it easy to maintain the fiction for Bluespec that the incoming wires
  are attached to some top-level exported clock -- required by the
  compiler.

- Simplify PCIE_EXP burying in the BlueNoC PCIe driver.  The old, complicated,
  interface is replaced by wire copies and is now just a shim for a
  fictitious Bluespec clock domain crossing.  In reality, wires are connected
  from top-level to the driver.

----------
mcadler     Date: Tue Dec 18 09:12:59 EST 2012  CSN: CSN-leap-platforms-660
                  Tue Dec 18 14:12:59 UTC 2012


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express/pcie-bluenoc
 pcie-bluenoc-tests.cpp    Locally Modified          659 
 pcie-bluenoc.cpp          Locally Modified          659 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/pci-express/pcie-bluenoc-virtex7
 pcie-virtex7.ucf          Locally Modified          659 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram/ddr-sdram-xilinx
 ddr3-sdram-vc707/         Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram/ddr-sdram-xilinx/ddr3-sdram-vc707
 mig_7series_v1_7_arb_row_col.v Locally Added               0 
 mig_7series_v1_7_ddr_phy_tempmon.v Locally Added               0 
 mig_7series_v1_7_ddr_prbs_gen.v Locally Added               0 
 mig_7series_v1_7_ecc_merge_enc.v Locally Added               0 
 mig_7series_v1_7_ddr_if_post_fifo.v Locally Added               0 
 mig_7series_v1_7_ddr_byte_group_io.v Locally Added               0 
 mig_7series_v1_7_mc.v     Locally Added               0 
 mig_7series_v1_7_ddr_phy_4lanes.v Locally Added               0 
 mig_7series_v1_7_ddr_phy_oclkdelay_cal.v Locally Added               0 
 mig_7series_v1_7_ui_top.v Locally Added               0 
 mig_7series_v1_7_arb_select.v Locally Added               0 
 mig_7series_v1_7_bank_mach.v Locally Added               0 
 mig_7series_v1_7_round_robin_arb.v Locally Added               0 
 mig_7series_v1_7_ddr_of_pre_fifo.v Locally Added               0 
 ddr3-sdram-device.awb     Locally Added               0 
 mig_7series_v1_7_ddr_mc_phy_wrapper.v Locally Added               0 
 ddr3-sdram-verilog-import.bsv Locally Added               0 
 mig_7series_v1_7_bank_state.v Locally Added               0 
 mig_7series_v1_7_bank_cntrl.v Locally Added               0 
 mig_7series_v1_7_clk_ibuf.v Locally Added               0 
 mig_7series_v1_7_bank_queue.v Locally Added               0 
 mig_7series_v1_7_ddr_phy_prbs_rdlvl.v Locally Added               0 
 mig_7series_v1_7_bank_common.v Locally Added               0 
 mig_7series_v1_7_rank_mach.v Locally Added               0 
 mig_7series_v1_7_ecc_gen.v Locally Added               0 
 mig_7series_v1_7_ddr_calib_top.v Locally Added               0 
 mig_7series_v1_7_ecc_buf.v Locally Added               0 
 mig_7series_v1_7_ui_rd_data.v Locally Added               0 
 mig_7series_v1_7_ddr_byte_lane.v Locally Added               0 
 mig_7series_v1_7_ddr_phy_rdlvl.v Locally Added               0 
 mig_7series_v1_7_rank_cntrl.v Locally Added               0 
 mig_7series_v1_7_arb_mux.v Locally Added               0 
 ddr3_v1_7.v               Locally Added               0 
 mig_7series_v1_7_ui_cmd.v Locally Added               0 
 mig_7series_v1_7_mem_intfc.v Locally Added               0 
 mig_7series_v1_7_ddr_phy_ck_addr_cmd_delay.v Locally Added               0 
 mig_7series_v1_7_rank_common.v Locally Added               0 
 ddr3_wrapper.v            Locally Added               0 
 mig_7series_v1_7_ddr_phy_dqs_found_cal_hr.v Locally Added               0 
 mig_7series_v1_7_col_mach.v Locally Added               0 
 mig_7series_v1_7_ddr_mc_phy.v Locally Added               0 
 mig_7series_v1_7_memc_ui_top_std.v Locally Added               0 
 mig_7series_v1_7_iodelay_ctrl.v Locally Added               0 
 mig_7series_v1_7_ddr_phy_dqs_found_cal.v Locally Added               0 
 mig_7series_v1_7_ecc_dec_fix.v Locally Added               0 
 mig_7series_v1_7_ddr_phy_top.v Locally Added               0 
 mig_7series_v1_7_ddr_phy_init.v Locally Added               0 
 mig_7series_v1_7_ui_wr_data.v Locally Added               0 
 mig_7series_v1_7_tempmon.v Locally Added               0 
 mig_7series_v1_7_ddr_phy_wrlvl.v Locally Added               0 
 ddr3-sdram.ucf            Locally Added               0 
 mig_7series_v1_7_infrastructure.v Locally Added               0 
 mig_7series_v1_7_bank_compare.v Locally Added               0 
 mig_7series_v1_7_ddr_phy_wrcal.v Locally Added               0 

Directory drivers/linux/platforms/ml605-pcie/driver
 bluenoc.c                 Locally Modified          659 

- Fix PCIe data errors when timing score is 0.  Caused by not tagging a 125 MHz
  clock domain properly.  The Virtex 6 driver exports both a 250 MHz and a
  125 MHz clock.  The Virtex 7 driver only exports the "user" 250 MHz clock.
  The Bluespec-provided driver wrapper creates a 125 MHz clock.

- BlueNoC driver now creates device names using the PCIe bus ID so that we
  get consistent device names even when multiple boards are present in a system.

- Add Virtex 7 DDR3 SDRAM controller.

----------
mcadler     Date: Thu Dec 20 17:15:02 EST 2012  CSN: CSN-leap-platforms-662
                  Thu Dec 20 22:15:02 UTC 2012


Directory modules/bluespec/common/fpgaenv/fpga-components
 user-clock-mmcm-virtex6.v Locally Removed           661 
 hardware-fpga-components-virtex6.awb Locally Removed           661 
 user-clock.bsv            Locally Modified          661 
 user-clock-pll-common.bsv Locally Modified          661 
 clock_gen.v               Locally Removed           661 
 user-clock-mmcm-virtex6.bsv Locally Removed           661 

Directory modules/bluespec/common/fpgaenv/physical-platform/pci-express-generic/config/ml605
 ml605-v6-pcie-dma.ucf     Locally Modified          661 

Directory modules/bluespec/common/fpgaenv/physical-platform/pci-express-generic/config/vc707
 vc707-v7-pcie-dma.ucf     Locally Modified          661 

- Remove TIG on main model reset in ML605 and VC707.  Being larger and faster,
  the VC707 is much more sensitive to timing errors.  The STDIO service
  uses an automatically addressed ring that sends a message around the ring
  on the first cycle after reset.  With a TIG on reset the long wire between
  the service and the next ring stop dropped the message at high frequencies.

- Stop using a Bluespec divide by 2 clock when the model frequency is half the
  crystal frequency.  Always build an MMCM.  The Xilinx tools fail to see the
  clock domain change and compute timing incorrectly.

- Delete the unused and needlessly confusing old Virtex 6 clock code.

----------
mcadler     Date: Fri Dec 21 10:12:07 EST 2012  CSN: CSN-leap-platforms-663
                  Fri Dec 21 15:12:07 UTC 2012


Directory tools/platforms/leap-fpga-ctrl
 Makefile.in               Locally Modified          662 

Directory tools/platforms/leap-fpga-ctrl/scripts
 ML605                     Locally Modified          662 
 VC707                     Locally Added               0 

Directory tools/platforms/leap-fpga-ctrl
 Makefile.am               Locally Modified          662 

Directory tools/platforms/leap-fpga-ctrl/etc
 config-sample             Locally Modified          662 

Directory drivers/linux/platforms
 ml605-pcie/               Locally Removed           662 

Directory drivers/linux/platforms/ml605-pcie
 driver/                   Locally Removed           662 

Directory drivers/linux/platforms/ml605-pcie/driver
 bluenoc                   Locally Removed           662 
 bluenoc.c                 Locally Removed           662 
 Makefile                  Locally Removed           662 
 bluenoc.h                 Locally Removed           662 

Directory drivers/linux/platforms/ml605-pcie
 dkms/                     Locally Removed           662 

Directory drivers/linux/platforms/ml605-pcie/dkms
 dkms.conf                 Locally Removed           662 

- Move BlueNoC driver to generic location instead of ML605.
- Provide the Intel versions of ML605 and VC707 scripts.  The MIT versions
  were old.  Scripts are machine / OS specific anyway and just a starting
  point for most users.


----------
mcadler     Date: Sun Dec 23 11:56:21 EST 2012  CSN: CSN-leap-platforms-664
                  Sun Dec 23 16:56:21 UTC 2012


Directory modules/bluespec/common/fpgaenv/fpga-components
 lutram.bsv                Locally Modified          663 

Add mkLUTRAMIfcToMemIfc to convert a LUTRAM's interface to a MEMORY_IFC.
The current implementation has the timing of a normal BRAM:  read results
are available a cycle after read requests.

----------
kfleming    Date: Tue Jan  1 14:30:11 EST 2013  CSN: CSN-leap-platforms-667
                  Tue Jan  1 19:30:11 UTC 2013


Directory modules/bluespec/common/fpgaenv/physical-platform/ml605/aurora-pcie-dma
 ml605-v6-pcie-dma.bsv     Locally Modified          666 
 aurora-ml605-v6-pcie-dma.awb Locally Modified          666 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/ddr-sdram/ddr-sdram-xilinx
 ddr-sdram-xilinx.ucf      Locally Modified          666 

Directory modules/bluespec/common/fpgaenv/physical-platform/pci-express-generic/config/ml605
 ml605-v6-pcie-dma.ucf     Locally Modified          666 

Directory modules/bluespec/common/fpgaenv/physical-platform/pci-express-generic
 pcie-generic-platform.bsv Locally Modified          666 


Two small changes

1) Ported the ml605 physical platforms to the new-style from clocks constructor.

2) Added a new TIG to the ddr3 ucf.  There were timing paths between
the model reset and the syncWriteQ.

----------
kfleming    Date: Sun Jan  6 15:16:51 EST 2013  CSN: CSN-leap-platforms-669
                  Sun Jan  6 20:16:51 UTC 2013


Directory modules/bluespec/common/fpgaenv/physical-platform/ml605/aurora-pcie-dma
 ml605-v6-pcie-dma.bsv     Locally Modified          668 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/aurora-sma-ml605
 aurora-sma.awb            Locally Modified          668 
 XUPV5_AURORA_SINGLE_UG.bsv Locally Modified          668 
 aurora_8b10b_v5_3_example_design.v Locally Modified          668 
 XUPV5_AURORA_SINGLE.bsv   Locally Modified          668 
 aurora-import.bsv         Locally Modified          668 
 aurora-ug.bsv             Locally Modified          668 
 aurora_8b10b_v5_3_example_design.ucf Locally Modified          668 


Many changes to the ml605 aurora code.  The code can now transmit data
between boards.  However, it routinely loses channel lock after
exchanging ~10000 messages.  I'm attempting to resolve this issue now.  

The flow-control layer needs to be cleaned up as well.

Specific changes:

1) Upgraded flow control protocol.  Old protocol was suspicious, and
it seemed like deadlocks were possible.

2) Fixed a number of declarations in ucf to match LEAP module hierarchy. 

3) Fixed inhigh bug in verilog import.  We were transmitting random values. 

4) Added extra debug registers at various points in the aurora code.
These should be changed to debug scan at some point. 


----------
kfleming    Date: Wed Jan 23 21:01:07 EST 2013  CSN: CSN-leap-platforms-670
                  Thu Jan 24 02:01:07 UTC 2013


Directory modules/bluespec/common/fpgaenv/physical-platform/ml605/aurora-pcie-dma
 ml605-v6-pcie-dma.bsv     Locally Modified          669 
 ml605-v6-pcie-dma.bsh     Locally Added               0 
 aurora-ml605-v6-pcie-dma.awb Locally Modified          669 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 aurora/                   Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/aurora
 aurora-flowcontrol/       Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/aurora/aurora-flowcontrol
 XUPV5_AURORA_SINGLE.bsv   Locally Added               0 
 aurora-device.awb         Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/aurora
 aurora-driver-simulation/ Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/aurora/aurora-driver-simulation
 aurora-import.bsv         Locally Added               0 
 aurora-driver-simulation.awb Locally Added               0 
 aurora-driver-simulation.bsv Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/aurora
 aurora-device/            Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/aurora/aurora-device
 aurora-device.bsv         Locally Added               0 
 aurora-device.bsh         Locally Added               0 
 aurora-device.awb         Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/aurora
 aurora-device-simulation/ Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/aurora/aurora-device-simulation
 aurora-device-simulation.awb Locally Added               0 
 aurora-device-simulation.bsv Locally Added               0 
 aurora-device-simulation.bsh Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/aurora-sma-ml605
 aurora-sma.awb            Locally Modified          669 
 aurora_8b10b_v5_3_hotplug.v Locally Modified          669 
 aurora_8b10b_v5_3_example_design.v Locally Modified          669 
 XUPV5_AURORA_SINGLE.bsv   Locally Modified          669 
 aurora-ug.bsv             Locally Modified          669 
 aurora_8b10b_v5_3_example_design.ucf Locally Modified          669 
 aurora_8b10b_v5_3_gtx.v   Locally Modified          669 


1) Refactored the aurora code to cleanly separate out the verilog
driver from the upper portions of the stack.  It may be that as we add
support for the ML707 that we will want to have a board-specific ucf
module as well.  We could also do the same for the 5 and 6.125 Gbps
transceivers.  I did not attempt to port the Virtex 5 devices although
that may be a good idea.

2) Fixed a few bugs in the aurora verilog.  Xilinx thoughfully reset
the aurora block every few thousand cycles.  I also changed some gtx
signal parameters to match the IBERT test bench. 

----------
kfleming    Date: Mon Jan 28 15:11:39 EST 2013  CSN: CSN-leap-platforms-671
                  Mon Jan 28 20:11:39 UTC 2013


Directory modules/bluespec/common/fpgaenv/fpga-components
 hardware-fpga-components-virtex6-generic.awb Locally Modified          670 
 v6_ila.v                  Locally Added               0 
 v6_icon.v                 Locally Added               0 
 v6_ila.ngc                Locally Added               0 
 v6_icon.ngc               Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/ml605/aurora-pcie-dma
 ml605-v6-pcie-dma.bsv     Locally Modified          670 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/aurora/aurora-flowcontrol
 XUPV5_AURORA_SINGLE.bsv   Locally Modified          670 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/aurora/aurora-driver-simulation
 aurora-driver-simulation.bsv Locally Modified          670 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/aurora-sma-ml605
 aurora_8b10b_v5_3_example_design.v Locally Modified          670 
 aurora-ug.bsv             Locally Modified          670 
 aurora_8b10b_v5_3_example_design.ucf Locally Modified          670 


1) Added icon and ila ngcs.  These are the components of the chipscope
logic analyzer.  Currently, they are only used in xilinx-provided
verilog as a low-level debugging aide. However, this sort of global
resource is the kind of thing that is screaming for inclusion as a
soft-service.

2) Minor modifications and a flow control bug fix to the aurora flow
control layer.  The aurora link is quite stable now, and I have
sucessfully run a partitioned HAsim model on the ML605 setup. 


----------
mcadler     Date: Fri Feb  1 15:49:35 EST 2013  CSN: CSN-leap-platforms-672
                  Fri Feb  1 20:49:35 UTC 2013


Directory modules/bluespec/common/fpgaenv/fpga-components
 lutram.bsv                Locally Modified          671 

Sigh.  The bug that won't die.  On Virtex-7 Xst started putting 1-bit wide
LUTRAMs in block RAM despite the fact that a read on the cycle immediately
following a write to the same address returns stale data.

I had fixed (hacked around) this bug long ago for widths larger than 1 bit.
At the time it appeared Xst never did this with 1-bit data.

----------
mcadler     Date: Thu Feb 14 22:38:04 EST 2013  CSN: CSN-leap-platforms-673
                  Fri Feb 15 03:38:04 UTC 2013


Directory modules/bluespec/common/fpgaenv/fpga-components
 lutram.bsv                Locally Modified          672 
 lutram.v                  Locally Modified          672 

Add reset() method to LUTRAM.

----------
kfleming    Date: Sat Feb 16 13:24:03 EST 2013  CSN: CSN-leap-platforms-674
                  Sat Feb 16 18:24:03 UTC 2013


Directory modules/bluespec/common/fpgaenv/physical-platform/ml605/aurora-pcie-dma
 ml605-v6-pcie-dma.bsv     Locally Modified          673 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/aurora/aurora-flowcontrol
 XUPV5_AURORA_SINGLE.bsv   Locally Modified          673 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/aurora/aurora-driver-simulation
 aurora-driver-simulation.bsv Locally Modified          673 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/aurora
 aurora-device-ml605/      Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/aurora/aurora-device-ml605
 aurora-device-ml605.awb   Locally Added               0 
 aurora-device-ml605.bsv   Locally Added               0 
 aurora-device-ml605.bsh   Locally Added               0 
 ml605_sma_aurora.ucf      Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/aurora-sma-ml605
 aurora-sma.awb            Locally Modified          673 
 XUPV5_AURORA_SINGLE_UG.bsv Locally Removed           673 
 aurora_8b10b_v5_3_example_design.v Locally Modified          673 
 XUPV5_AURORA_SINGLE.bsv   Locally Removed           673 
 aurora-ug.bsv             Locally Modified          673 
 aurora_8b10b_v5_3_example_design.ucf Locally Removed           673 


Modified the aurora logic for the ML605.  We now have distinct driver
and flow control layers which may be instantiated many times per
platform.  

At the board level, a single AURORA_COMPLEX module
(e.g. aurora-device-ml605.bsv) instantiates all the aurora drivers,
enables us to have a vector of aurora interfaces per board.  The board
level interface also allows us to distribute a shared clock among many
different gtx blocks.

To extend the interface to new boards, only the AURORA_COMPLEX needs
to be changed.  For new boards, a new driver needs to be implemented
targeting that board.  Note that as always Xilinx verilog is buggy and
may need to be patched.


----------
kfleming    Date: Sun Feb 17 11:30:18 EST 2013  CSN: CSN-leap-platforms-675
                  Sun Feb 17 16:30:18 UTC 2013


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/aurora/aurora-device-ml605
 aurora-device-ml605.awb   Locally Modified          674 
 aurora-device-ml605.bsv   Locally Modified          674 
 ml605_sma_aurora.ucf      Locally Modified          674 


Changed the ML605 to have four additional Aurora SERDES channels.
These channels are attached to the pinned out hpc connector.  

Unfortunately, due to clock management issues, we cannot yet make use
of all of the available SERDES.  Each SERDES appears to require its
own MMCM if it is to be used individually.  It may be possible to
relax this constraint, but I am not sure how to do it yet.

Fortunately, the SERDES can be ganged to for a wider, multi-lane
channel.  In this configuration, they can share a single MMCM.

----------
kfleming    Date: Fri Feb 22 13:23:32 EST 2013  CSN: CSN-leap-platforms-676
                  Fri Feb 22 18:23:32 UTC 2013


Directory modules/bluespec/common/fpgaenv/fpga-components
 hardware-fpga-components-virtex6-generic.awb Locally Modified          675 
 icon-virtex6.bsv          Locally Added               0 
 ila-virtex6.bsv           Locally Added               0 
 v6_icon_wrapper.v         Locally Added               0 


Wrapped ila and icon modules for use in bluespec. 

----------
mcadler     Date: Tue Feb 26 07:35:39 EST 2013  CSN: CSN-leap-platforms-677
                  Tue Feb 26 12:35:39 UTC 2013


Directory modules/bluespec/common/fpgaenv/fpga-components
 floating-point-accel.bsv  Locally Modified          676 

Conversion from double to single took the resulting 32 bit single precision
value and remapped it to be stored as a double, which is what Alpha wants.
The Alpha pipeline took the remapped value and did the same thing, resulting
in garbage.  Removed the remapping here, since this code is supposed to
be ISA neutral.  Double to single now returns data in the low 32 bits.

----------
mcadler     Date: Wed Feb 27 09:29:34 EST 2013  CSN: CSN-leap-platforms-678
                  Wed Feb 27 14:29:34 UTC 2013


Directory modules/bluespec/common/fpgaenv/fpga-components
 floating-point-accel.bsv  Locally Modified          677 

- cvtsd now expects float in low 32 bits instead of the Alpha representation.
- Moved Alpha-specific float to double mapping functions to hasim-alpha.

----------
kfleming    Date: Thu Feb 28 16:24:12 EST 2013  CSN: CSN-leap-platforms-679
                  Thu Feb 28 21:24:12 UTC 2013


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/aurora/aurora-flowcontrol
 XUPV5_AURORA_SINGLE.bsv   Locally Modified          678 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/aurora/aurora-device-ml605
 aurora-device-ml605.awb   Locally Modified          678 
 aurora-device-ml605.bsv   Locally Modified          678 
 ml605_sma_aurora.ucf      Locally Modified          678 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/aurora-sma-ml605
 aurora-virtex6-4gbps.awb  Locally Added               0 
 aurora-virtex6-5gbps.awb  Locally Added               0 
 aurora-sma.awb            Locally Modified          678 
 aurora_8b10b_v5_3_example_design.v Locally Modified          678 
 aurora_8b10b_v5_3_clock_module_4gbps.v Locally Added               0 
 aurora_8b10b_v5_3_clock_module_5gbps.v Locally Added               0 
 aurora_8b10b_v5_3_gtx_4gbps.v Locally Added               0 
 aurora_8b10b_v5_3_gtx_5gbps.v Locally Added               0 


1) Added support for several different transceiver throughputs.  

2) Refactored the SERDES flowcontrol layer to support different clock
ratios by parameter.

3) Simplified some program logic to achieve 200MHz timing closure.  I
don't think it's likely that we'll be able to get beyond 200MHz, at
least on the ML605.  

Things that need to be done:

1) Better code factoring.  Currently the aurora device ucf is
hard-coded for 4gbps.  It would be nice if that were not the case.

2) We're only using the 16-bit interface, and 5gbps, which requires
that the flow control logic operates at 250MHz, is really not
acheiveable.  However, Xilinx has a 32-bit interface which might allow
us to get to 8gbps/lane.  

3) Better area groups.  I took a stab at areagroups, and things seem
to work, but it needs to be tightened up.

----------
mcadler     Date: Sun Mar  3 18:48:30 EST 2013  CSN: CSN-leap-platforms-680
                  Sun Mar  3 23:48:30 UTC 2013


Directory modules/bluespec/common/fpgaenv/fpga-components
 lutram.bsv                Locally Modified          679 

Add a new LUTRAM that is initialized by a Get interface passed in as a
function.  With this it is easy to initialize a LUTRAM from software by
tying an RRR stream (morphed into a Get) directly to a RAM.  When we
finally drop RRR and replace it with soft connections toGet() will be
defined automatically, making initialization from software a one-line
declaration.
